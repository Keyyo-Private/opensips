=========================== Release 1.11.11 ==============================

2017-05-18  Razvan Crainea  <razvan at opensips dot org>
	* [8a70acd56] :

	Bump version to 1.11.11


2017-05-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b7cb23a6b] :

	Fix documentation on tracing triggers.
	Closes #932


2017-05-17  Razvan Crainea  <razvan at opensips dot org>
	* [d77bda6b1] :

	rtpproxy: allow multiple servers on same machine
	Before this fix, rtpproxy was accepting a single connection from a
	specific IP. This prevented multiple rtpproxy servers on the same
	machine (or behind the same NAT) to send timeout notifications
	simultaneously.
	Using this fix each rtpproxy provisioned can have on connection to
	opensips.
	This commit also adds some extra debugging.

	Reported and debugged by Flavio Goncalves.
	Fix #865
	(cherry picked from commit 070e7d4710983abf76a3d16bdc67371c6c4941ce)


2017-05-11  Razvan Crainea  <razvan at opensips dot org>
	* [74c9bcec0] :

	fix $source_uri pvar when using IPv6
	This fix encloses the IPv6 address in square brackets in the resulted
	URI

	Reported by Ankur Gupta on mailing list
	(cherry picked from commit 9798924ba8b24d3829e9ef536ef8f1542056d34d)


2017-05-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [47e602ecd] :

	Fix doc formating and improve some description
	(cherry picked from commit aa2f0f5f2bd304e3f4923aca358bdacc70065e15)


2017-05-03  Dan Pascu  <dan at ag-projects dot com>
	* [d3782be1f] :

	Backported support for compiling against libradcli


2017-05-03  Dan Pascu  <dan at ag-projects dot com>
	* [cc8435e60] :

	Fixed compilation when SSLv3 is not available


2017-04-25  Dan Pascu  <dan at ag-projects dot com>
	* [7fb9ef1fc] :

	Added support for RFC6598 private address range
	(cherry picked from commit b604bd9a977f7237a0eab7abe15616b7a1a6364b)


2017-04-24  ionutrazvanionita  <ionutionita at opensips dot org>
	* [65c5b34ea] :

	[db datetime parsing] parse only date if date-time format parsing fails
	(cherry picked from commit 334c67a9fb93fefe724292bd883f30ba722b2aa3)


2017-04-21  Liviu Chircu  <liviu at opensips dot org>
	* [9f0e7ee97] :

	opensipsctl: Fix PostgreSQL login
	Closes #1089
	(cherry picked from commit 00906dec7df55d9feb117af53e059943a229993b)

	Conflicts:
		scripts/opensipsctl.pgsql


2017-04-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f4576ba76] :

	Fixed t_check_trans() not to report end-2-end ACKs
	end-2-end ACKs are sequential requests (in dialog) forming a separate transaction than the INVITE; In terms of ACK matching, the t_check_trans() reports only hop-by-hop ACKs (to negative replies) which are part of the INVITE transaction.
	(cherry picked from commit dee4d12f8e99adbb6e46476eaeaf2b80130cb5a9)


2017-04-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4cef80fb4] :

	Fixed bogus returned code for sl_send_reply()
	If called for an ACK request, the sl_send_reply() func returns 0, terminated the script execution; Changed to return success (1).
	(cherry picked from commit 527017104058deb253ba5be6b32239483f834839)


2017-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [d60f70f70] :

	add support for gcc 6.x compilers


2017-04-13  Razvan Crainea  <razvan at opensips dot org>
	* [d8bf1acdd] :

	tls_mgm: fix kerberos error log
	(cherry picked from commit b4ce514b0a22fb3d301126723cd455aa33e516dd)


2017-04-12  Razvan Crainea  <razvan at opensips dot org>
	* [6843ee099] :

	tm: update branch route only if it was specified in branch route
	(cherry picked from commit 77b37f5316623e0e55da4b798e6e0549100ff2f2)


2017-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f0992d5ef] :

	Fixed mixing of return code.
	Do not re-use the "ret" return code variable when comes to testing the running of the script route (per rule) - it may stay stay to 0 and stop the whole script execution.
	(cherry picked from commit 981209748cd07b876a29e0fb0e5b991ac39a99a7)


2017-04-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [da68b9b5f] :

	Fix printing the RURI value in debug log


2017-04-05  Liviu Chircu  <liviu at opensips dot org>
	* [7d8abcd62] :

	opensipsctl: Supress random "path not found" errors
	In case a binary is not found (e.g. gdb), opensipsctl will properly
	report this by default when its related command is called.
	(cherry picked from commit 5717839d265bd97d040634bb371ed1e7fecf33c5)


2017-03-30  Razvan Crainea  <razvan at opensips dot org>
	* [0354cd6d9] :

	snmpstats: fix int to unsigned int warnings
	(cherry picked from commit 5e61f3b910d78d2e9087801214545965febb4d6a)


2017-03-30  Liviu Chircu  <liviu at opensips dot org>
	* [40b6ce531] :

	core "net:" statistics: Fix an integer signedness bug
	Due to runaway usage of bitwise shifting, the byte matching code would fail to
	work for interfaces having low order bytes with greater values than 128
	(e.g. udp:31.32.33.147:5060). Consequently, all "net:" statistics for them
	would show up as zeroes.

	Thanks to Bogdan and Răzvan for discovering and troubleshooting
	(cherry picked from commit 009691c6c7672927f68cfb8a0340166167a04107)


2017-03-27  Razvan Crainea  <razvan at opensips dot org>
	* [05ea491a3] :

	fix transformations for input larger than 1024 bytes
	(cherry picked from commit 8e9eb3efb2734714d5303e92cf03fccaee3b88e9)
	(cherry picked from commit 99beee231032dd7fdb6e358d60c7937069d179a8)


2017-03-27  Razvan Crainea  <razvan at opensips dot org>
	* [43bc0da98] :

	mod_fix: optimize formats when only a pvar is used
	This currently breaks this modules which are mistakenly using gparam:
	exec, siptrace
	(cherry picked from commit daafbc82da7ff6bfe54b1ffe6958a49c853d1bd2)


2017-03-24  Razvan Crainea  <razvan at opensips dot org>
	* [e6ff63d1c] :

	dialog: update cseq under lock
	Close #1008
	(cherry picked from commit 596fb1f3d4b227185556a992dbd9945fed206f5e)


2017-03-22  Răzvan Crainea  <razvan at opensips dot org>
	* [4ef05e2c1] :

	consider global advertised address when choosing a listener
	When searching for 2nd RR (the inbound one) also look into the globally
	declared advertised address
	(cherry picked from commit 9491782ab150be5d61b592e16d64121ecaab2420)


2017-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e78066e72] :

	removed dead code
	Reported by Liviu Chircu
	(cherry picked from commit aec22a3f12f93e12ff2dadf49e3d0acf7fac6779)


2017-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3ed61b96e] :

	Fix str comparison in IP matching
	Closes #1077
	(cherry picked from commit ec8842e673bcd1c64be586a4d6f2323f4b778aa1)


2017-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [0fd074830] :

	drouting: fix gw whitelist pkg mem leak
	Thanks go to John Nash for reporting this
	(cherry picked from commit db49bb5bb516601ff213db7096d3abc281d07df4)


2017-03-09  Liviu Chircu  <liviu at opensips dot org>
	* [bf113b02d] :

	cachedb_mongodb: Improve reconnect handling
	Avoid exiting the retry loop with a NULL cursor after several failed
	reconnects
	(cherry picked from commit f4dd4027ea71ce0dd0a3ff53af4bf7befda3d3ee)


2017-03-08  Nick Altmann  <nick.altmann at gmail dot com>
	* [16c57bdcd] :

	RPM spec: disable aaa_radius for fedora > 23 because radiusclient-ng-devel is not available


2017-03-08  Nick Altmann  <nick.altmann at gmail dot com>
	* [1795e3285] :

	RPM spec: exclude build cachedb_redis for el6 because hiredis_devel package was removed from epel


2017-02-24  Andrey Vorobiev  <andrey.o.vorobiev at gmail dot com>
	* [39d29802e] :

	Set 'CURLOPT_FAILONERROR' option to '0' in rest_client module
	This is done in order to archive following goals:
	- suppress error log messages like 'curl_easy_perform: ...' when HTTP
	  server returns response with status code larger or equal to 400.
	- make 'rest_xxx' functions to have the same behaviour with different
	  Curl distributions. Now for different Curls these functions may
	  return different exit codes for the same HTTP response.

	There is an option in Curl named 'CURLOPT_FAILONERROR'. If it's set to
	'1' then if returned HTTP code is equal to or larger than 400 the HTTP
	request is considered as failed and 'curl_easy_perform' returns non
	'CURLE_OK' code. In vanilla (upstream) Curl this option is set to '0'
	(do not fail) but some patched Curl versions set this option to '1'
	(at least this is true for Debian Wheezy). As result we have a
	different behaviour for different Curl derivatives. So it seems to be
	better to enforce setting this option to '0' in order to have the same
	behaviour for different Curls.
	(cherry picked from commit 7bb059fa9cbfe6222d7eb7ebad4a2d51c4a25a8b)

	Conflicts:
		modules/rest_client/rest_methods.c


2017-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [7b0189be5] :

	update ChangeLog for 1.11.10


2017-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [95419e130] :

	bump version to 1.11.10

=========================== Release 1.11.10 ==============================

2017-02-23  Razvan Crainea  <razvan at opensips dot org>
	* [95419e130] :

	bump version to 1.11.10


2017-02-22  Razvan Crainea  <razvan at opensips dot org>
	* [e643bcfe2] :

	usrloc: do not ignore contacts that don't match a listener
	(cherry picked from commit 3b99412c9c5cff30baa9bcd0aeba71a2c5a63267)


2017-02-20  Razvan Crainea  <razvan at opensips dot org>
	* [e1c1695a0] :

	python: fix documentation links
	(cherry picked from commit 3ca7813ae6d352b53f79bcdcc460e4c20e3d31c6)


2017-02-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e46490b74] :

	Fix loosing destination status during reload.
	Preserve the status (enabled or not) during a data reload from DB.
	(cherry picked from commit c2df8a8feaa96bc278f60a82ce6e845a620599a9)


2017-02-14  Razvan Crainea  <razvan at opensips dot org>
	* [c1d5b33ee] :

	load_balancer: rename internal used AVPs
	This prevents using them from script by mistake
	(cherry picked from commit 076c78cbf3acb63842a924c9535fc687cbe40f1d)


2017-02-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8320020d9] :

	README regenerated


2017-02-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1b073549d] :

	Fix docs : pattern_col is not regexp but file wildcard pattern
	Reported by @arovetto
	Closes #1041
	(cherry picked from commit 38e237d0f75d023f4a31ee1c59933c0af621e96c)


2017-02-13  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ba5cc04e8] :

	Merge pull request #1050 from sippy/master_clean
	Fix a crash in the python module.
	(cherry picked from commit f40707ecc4541358de2c159c700ac4b83e0ddf71)


2017-02-09  Razvan Crainea  <razvan at opensips dot org>
	* [8d6a9656d] :

	tcp: don't add conn in TCP main reactor after async write
	When getting back a TCP connection from a TCP worker after it wrote some
	async chunks, we should not add the connection in the reactor for read.
	The reason is that the connection might already be polled by a different
	process. If the poll triggers for read in the main reactor, the
	connection will be assigned to a new process - and we end up having a
	connection for read in two different processes reactor - this breaks
	connections list and results in double frees and invalid memory access.

	Many thanks to Federico Edorna for all the help given to track down this
	issue!


2017-02-07  Razvan Crainea  <razvan at opensips dot org>
	* [672a05d75] :

	rtpproxy: add clarifications about timeout notification
	(cherry picked from commit 4e91d1c3e1421e4a9285ea7ef2d0e9528b4455c3)


2017-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d6baaa085] :

	Fixed entity index in the b2b callbacks.
	After some rework of the B2B API, the entities are counted starting from 0, while before they were form 1 - this was affecting the call center logic by mixing the caller versus callee parties of the call.

	Reported by Jonathan Hunter - many thanks also for testing !!
	(cherry picked from commit 1e21f91c45debc75ee46fcfa893ce21379667589)


2017-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0e42067be] :

	Fix missing lock release - related to 36b4908.
	(cherry picked from commit 5739b15c442d86f305571b963aa53c9292d33cf8)


2017-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7ed1ade1c] :

	Fix handling extra B2B events in callbacks.
	We need to filter out some new B2B events which are not relevant for the CC scenario.
	Fix for #984.
	Reported by John Steel ( @J0hnSteel ).
	(cherry picked from commit 36b490858f9ae84a01ae4389915e3ae47b5b9119)


2017-02-04  Le Roy Christophe  <c.leroy at alphalink dot fr>
	* [d7b36dfb9] :

	drouting: Fix out-of-bound initialization
	Upon load/reload of drouting tables, if parse_destination_list() needs to
	increase destinations array size, it asks for a new array twice the size of
	the previous one.
	It memset() the newly allocated capacity, skipping memory that is to be filled
	with already learnt destinations, but using the array size instead of the
	remaining capacity.
	This patch fixes the size for this memset().

	Closes OpenSIPS/opensips#1039
	(cherry picked from commit b11ce9723f1ca43cb7646b96e51dfa306a6280d7)


2017-01-25  Liviu Chircu  <liviu at opensips dot org>
	* [3754b4d42] :

	dialog docs: Fix get_profile_size() examples
	(cherry picked from commit 9f0474c93994efa47581b078ba8a017d3ae779dd)

	Conflicts:
		modules/dialog/README


2017-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [79c4006cb] :

	Fix finding the script functions in assigments.
	Do an aggressive search by digging through all possible ACTIONS or EXPRessions to see if a function is used in the script.
	Fix for #1022
	(cherry picked from commit 87a3a412aa720e858b126a5c2dc0ffe7c6c28530)


2017-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [dbb8f8b72] :

	tm: add usage scope in documentation
	Informs users about the scope where the transaction functions should
	be used. Should prevent misuse cases, such as #1019 and so.

	Thanks go to Ryan Bullock for reporting and documenting this.
	(cherry picked from commit 202193bf8b1bf132e39ecf7dc4b7258839ac5ff4)


2017-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [79cecefd4] :

	Relax the dialog state machine - allow PRACK after dialog is established
	There are some weird UDP scenarios where the PRACK may land on the server after the ACK. Rejecting the PRACK at dialog level leads to infinit looping (if used with TH). Better be more flexible and ignore PRACKs after ACK.
	(cherry picked from commit 8442dd115e729891710e75d5f0ec1dc5f6fbf322)


2017-01-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1d0a67e0e] :

	Fix missing FROM body on URI restore.
	As transaction may be created before the call of the uac_repalce_xxx(), the FROM header may not have a body when cloned in TM.
	The restore_uris_reply() should be ready to deal with a transactional request without FROM body parsed.
	(cherry picked from commit 83170767d4b49a7309c9ab8b37c6af7e38d74426)


2017-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [143e4171e] :

	Fix cherry-pick error


2017-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cd094714b] :

	Fix fallback after another fallback.
	Avoid decrementing the prefix len if already 0.
	(cherry picked from commit 54438e474dd33eb28e2e62f6106d6a532d6a0ec9)


2017-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3f7741904] :

	Additional Fix for fallback on default rules.
	(cherry picked from commit 59d10efe466c079fe853b14b3e6601f8f673c698)


2017-01-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [54f94aaa9] :

	Fix crash on fallback from a prefix-less rule.
	If a prefix-less (empty prefix) rule matched, do not attempt to do fallback by reducing the len of the prefix.
	(cherry picked from commit 6e7495a011a127b8d6451e0ee99fce1efd4eabf0)


2016-12-15  Razvan Crainea  <razvan at opensips dot org>
	* [7fa10e3af] :

	siptrace: fix insufficient transaction check
	In case the transaction is undefineds, do not run the REQUEST_IN
	callback


2016-12-15  Razvan Crainea  <razvan at opensips dot org>
	* [523a47b69] :

	Makefile: cleanup after building debian


2016-12-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ad387652b] :

	Fix handling of NULL proto in sip_resolvehost()
	"proto" is not not mandatory (it may be NULL) as parameter, but there were cases where the code was assuming a not NULL proto variable.

	Reported by Nick Altmann
	(cherry picked from commit 29a048ac2cfd010cb26efad5e07ffb4d747882a4)


2016-12-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [960bcf1eb] :

	Add some extra tests to prevent any overflows
	Related to #c5c1f4
	(cherry picked from commit 56c596851319b721287adb9931cd69f257c3c667)


2016-12-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5cd47cb21] :

	Fix recalculating Active nodes and weight sums after reload
	When inheriting the state from in-mem old data set, the state of a node may change, so we need to recalculate the number of active nodes and the running sums (for weights) in the set.

	Fixes #972, but we need @hydrosine confirmation on this.
	(cherry picked from commit c5c1f40ea54f0908421ece09bdc5e4b70ceba6cb)


2016-12-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [743662282] :

	Fix bug in removing dialogs from profiles.
	If we fail to remove a dialog from a profile, do not return, but continue with removing the dialog from the remaining profiles.
	(cherry picked from commit 2eb576d8f1d578405cec9aa0ad673319edd2399d)


2016-12-09  Liviu Chircu  <liviu at opensips dot org>
	* [d91e3f5e7] :

	rest_client: Disable CURLOPT_FAILONERROR
	Immediately closing HTTP connections on negative replies is not
	desirable, as system logic may be built around such replies.

	Reported on IRC by holysip
	(cherry picked from commit bf59a6082bbe52e8e9a5efc001daf68627ecc09f)

	Conflicts:
		modules/rest_client/rest_methods.c

	(cherry picked from commit 6193cdd16e39006c57f143f9f4fd6abca46383cf)

	Conflicts:
		modules/rest_client/rest_methods.c


2016-12-07  Razvan Crainea  <razvan at opensips dot org>
	* [baf5d958c] :

	uac: properly store replaced URI if not used in branch route
	Restores the proper URI for UPSTREAM sequential requests

	Reported by Antonis Psaras
	Close #1001
	(cherry picked from commit ed2746a1faa768b70aa67a2d68d5a0451d0c727f)


2016-12-06  Liviu Chircu  <liviu at opensips dot org>
	* [dfc3b432d] :

	tls: Improve startup error reporting


2016-12-06  Razvan Crainea  <razvan at opensips dot org>
	* [72b7c975f] :

	tm: replace ERROR to DBG when bavp list is not found
	(cherry picked from commit 92fde1be1fcfcf8df0c89181f3baba7df520ff27)


2016-12-06  Razvan Crainea  <razvan at opensips dot org>
	* [7cff59b61] :

	dns_cache: remove bogus library path
	The module does not use any library, so it does not have to tune the
	library path and libraries used.
	(cherry picked from commit 7e5142a22d683c297b4bdc2a10aecac5873bea7a)


2016-12-05  Razvan Crainea  <razvan at opensips dot org>
	* [34c94d4c2] :

	avpops: remove avp_printf() from docs
	(cherry picked from commit 6151c7af54be64dd8b5af906c234b946c10f9ac9)
	(cherry picked from commit ec61c895d32ce4d03a53fc18ed3f159e4c097135)


2016-12-05  Razvan Crainea  <razvan at opensips dot org>
	* [331ea23fb] :

	Makefile-readme: allow different xsl-stylesheets versions
	(cherry picked from commit 5ff322dfcf6502b965917ad8779a14d3ed041856)


2016-11-24  Razvan Crainea  <razvan at opensips dot org>
	* [5d262654e] :

	statistics: only raise warning when setting stat with smth != 0
	(cherry picked from commit c1b0c80595ac9ee1f30583ad794cab420ee1925f)


2016-11-16  Razvan Crainea  <razvan at opensips dot org>
	* [2e782e6b7] :

	parser: fix INVITE & INFO methods parsing
	(cherry picked from commit f9db6d2829dc16a099847b1c4f1aa5600045285a)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [dcfbf0c40] :

	sipmsgops: fix null dereference
	Fixes Coverity CID 40620, 40621
	(cherry picked from commit 49552fa95207c7e87036af376e0d2fe75854a463)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [40f1c3d71] :

	seas: release FILE after printing
	Fixes Coverity CID 40820
	(cherry picked from commit 7e7babff315bb0724dceb092bd0eb49504f1ab8f)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [11d428fbf] :

	path: jump to proper label in case of error
	detected by Coverity
	(cherry picked from commit 65ba1fc82275ff1d4559e5d5d619b5538411b4e0)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [138b2f752] :

	snmpstats: free space in case of error
	Fixes Coverity CID 40799, 40800, 40801, 40804, 40811, 40814, 40817, 40818
	(cherry picked from commit 9b64078ada10287848d6f5853cc5c4cc3dc1b0fb)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [9aa31404e] :

	snmpstats: close fd in case of error
	Fixes Coverity CID 40813
	(cherry picked from commit 42c96119875e852b12759c4f7389df6904a46e91)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [a6ed266e4] :

	statistics: remove uninitilized value test
	Fixes Coverity CID 40909
	(cherry picked from commit 3377bc11a580ec79b3b4449c06ac544189092e3f)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [82846effe] :

	xode_from.c: close handler in case of error
	Fixes Coverity CID 40812
	(cherry picked from commit 616e1bd032ebcd6d676795bb28915d1d8730525a)


2016-11-14  Razvan Crainea  <razvan at opensips dot org>
	* [bf7f40110] :

	changelog: properly update changelog to 1.11.9
	Reported by Chen-Che Huang


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [c8f534293] :

	tm: allow deleting branch avps
	Also fixes coverity CID 40585
	(cherry picked from commit 343a532258fc7b2fe91c6ac4f457823b9f938741)


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [7432e56d5] :

	enum: fix country prefix len detection
	Fixes Coverity CID 40580
	(cherry picked from commit 275f320cd89a3f89dc37eff7e90280c24ff3e805)


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [e38b3463e] :

	dialog: fix message re-generate condition after local route
	Fixes Coverity CID 40553 and 40605
	(cherry picked from commit 85d7d3a1fb550aad4b9d18ba3861e554b331eb91)


2016-11-11  Razvan Crainea  <razvan at opensips dot org>
	* [4b84905d0] :

	json: properly check pv_parse_spec() return
	Fixes Coverity 40485
	(cherry picked from commit 7bc6bd67f8230ea12d79fb5226521a257776583a)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [e3174f301] :

	carrierroute: prevent ch truncate from fgetc()
	Fixes Coverity CID 40507
	(cherry picked from commit a5dccbbed4d95bd18e265f7dd0472375f344d78f)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [ed0089cf3] :

	msilo: replace strncpy with memcpy
	This prevents a coverity warning about null terminated strings
	Fixes Coverity CID 40507
	(cherry picked from commit 1d698a9037346f7f03a77147a5008689998c8069)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [3b92a2b97] :

	b2b_entities: properly check parse_methods() return
	Fixes Coverity CID 40493
	(cherry picked from commit 7b20690e133c0e90110b549d65ee6769b4ca64fa)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [65f5914f2] :

	rls: properly check parse_from_uri() return code
	Fixes Coverity CID 40490
	(cherry picked from commit b310986c6f0a2d76f2092433f06d8cb94e1f08fc)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [93fd2b046] :

	b2b: properly check return codes
	Fixes Coverity CID 40486, 40487 and 40488
	(cherry picked from commit d9967ca2abe54faf6426bb76c369ae6be10bb218)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [431be2c3c] :

	json.c: properly check the pv_parse_spec() return
	Fixes Coverity CID 40485
	(cherry picked from commit b5c02f16645ab48a8910c148ce596d46d2f1b285)


2016-11-10  Razvan Crainea  <razvan at opensips dot org>
	* [64128b86b] :

	b2b_logic: properly check functions' return code
	Fixes Coverity CID 40483 40484
	(cherry picked from commit d12d3795e884c87c1225be3c96f959dd79763806)


2016-11-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [58ec669e2] :

	Fixed bogus test on pointers.
	This may lead to invalid len to be returned.
	(cherry picked from commit f81e9bf5f0e4a75d6279b8c9e2f1397538e6e953)


2016-11-08  Razvan Crainea  <razvan at opensips dot org>
	* [a651b6891] :

	Merge branch 'shimaore-misleading-indentation' into 2.2
	(cherry picked from commit 29971c809c18c6a42d94bf4c7719c88f0791ac09)
	(cherry picked from commit dd52b2f71436084d329ee4d1a214a4a011d26ade)


2016-11-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fb5dfac6c] :

	Fix bogus printing of socket pointer.
	Do not print the '\0', as it will break the logs formating.


2016-11-03  Liviu Chircu  <liviu at opensips dot org>
	* [b51eab998] :

	dialog: Fix incorrect replicated dialog ids
	Also improve code readability with regards to dialog id handling

	Issue reported by Dawid Mielnik
	(cherry picked from commit 00be97f151d254af281c4f05611c1905f51fbcde)


2016-10-27  Razvan Crainea  <razvan at opensips dot org>
	* [153181b37] :

	dialog: add \n to log
	Reported by Hamid on the lists
	(cherry picked from commit efedc90cea45beb42951c5fb933c06757f813976)


2016-10-24  Liviu Chircu  <liviu at opensips dot org>
	* [37f1b6b87] :

	siptrace: Fix invalid memory access

=========================== Release 1.11.9 ==============================

2016-10-19  Razvan Crainea  <razvan at opensips dot org>
	* [141d4da] :

	Increase version to 1.11.9


2016-10-19  Razvan Crainea  <razvan at opensips dot org>
	* [06867b9] :

	userblacklist: sync between reload and read
	This commit fixes possible crash due to concurrency between the data
	read while checking the blacklist and reload.

	Reported by Michele Pinassi

	Close #884
	(cherry picked from commit edad7265c71d2259003e7500872e51c1a461ad9f)


2016-10-19  Razvan Crainea  <razvan at opensips dot org>
	* [18b9901] :

	dns_cache: fix examples
	Credits go to Pete Kelly for reporting it.
	(cherry picked from commit 7cdd3ee99d6c46dcde238c8571f21c46e85e82b3)


2016-10-18  ionutrazvanionita  <ionutionita at opensips dot org>
	* [66ae29f] :

	[sst] fix using unallocated memory bus
	* sst was freeing shm memory after freeing it in dialog callbacs;
	* sst was using memory without checking if it was allocated;
	(cherry picked from commit 33dc084dd553a20cc691b3ec38e17993ac5ae5b6)

	Conflicts:
		modules/sst/sst_handlers.c


2016-10-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f880642] :

	Fix consistency and use dialog_id.
	Dialog_id is printed by dlg_list (along the h_label and h_id) as a simpler alternative to identify the dialog.
	Also, the dlg_end_dlg accepts both h_label and h_id or a dialog_id.
	This is needed as the DB exposes only the dialog_id, and the dialogs from DB cannot be correlated anymore with the MI commands. See #963

	Closes #963.
	(cherry picked from commit 944fdc1e02c0d4da00272f0c80ea2f9c0406b188)


2016-10-12  Liviu Chircu  <liviu at opensips dot org>
	* [abbb653] :

	Fix a possible segmentation fault on startup
	Do not generate a corefile on "listen = udp:eth0:bad_port" errors
	(cherry picked from commit 2352d57e35c15dab34c046566e5a89cbc5d068aa)

	Conflicts:
		cfg.y


2016-10-12  Liviu Chircu  <liviu at opensips dot org>
	* [a2cb338] :

	Fix "use_children" to work with interface names
	(cherry picked from commit c7da1af1642697269eb74865018d017f1a6ee664)


2016-10-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3cce5bb] :

	Downgrade logs from NOTICE to DBG - part 2
	(cherry picked from commit dd518ccdcdc02503ccdbead26f5fc44f2c405093)


2016-10-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8e9aa12] :

	Downgrade logs from NOTICE to DBG
	(cherry picked from commit 7b6d0d7d25ab2440d70fa98ca0bf3314c176dc43)


2016-10-05  ionutrazvanionita  <ionutionita at opensips dot org>
	* [c999663] :

	[sipcapture] memset contact uri structure to 0
	(cherry picked from commit ac66dc14bb736bb5afd70d923db7e7fa065462ff)


2016-10-05  Razvan Crainea  <razvan at opensips dot org>
	* [817d16a] :

	drouting: this version does not use partitions


2016-10-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1ea39dd] :

	Remove unnecessary test.
	"res" cannot be null at that point
	(cherry picked from commit 0b60681f0cc08ffd13fbac3dc5cbde17904ad177)


2016-10-04  Ozzyboshi  <gun101 at email dot it>
	* [89f78e3] :

	Fixed memory leak on modules/drouting/drouting.c
	This leak occures in function get_group_id() when do_routing is called without parameters in opensips.cfg.
	In this case the dr_default_grp variable is not equal -1 and 'return dr_default_grp' is executed without freeing the res variable previously allocated for query execution.
	(cherry picked from commit 65739943151f08aee18a7bc2125c7ac90ee84d00)


2016-09-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e95ccf8] :

	Fix documentation for calculate_ha1 parameter
	Reported by Aqs Younas on the mailing list.
	(cherry picked from commit f10e57f0f7abf9bf899f6649603774898b562013)


2016-09-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c7ed0e0] :

	Fix building the FROM header in XMPP2SIP.
	Reported by Igor Pavlov.
	(cherry picked from commit bf9acc3a15f376f17a8d415a5d48789e19ce3dee)


2016-09-19  Razvan Crainea  <razvan at opensips dot org>
	* [cdc4f6a] :

	usrloc: fix race between update for different registers
	In case there are two REGISTER messages with incremental CSEQ are
	replicated in a different order, skip the processing, since this has
	already been resolved by the master instance.

	Thanks to Deniz Beskök for reporing this

	Closes #956
	(cherry picked from commit 26f6c1bacb33ddf0bcbd54ccffc65bee8754e01d)


2016-09-07  Liviu Chircu  <liviu at opensips dot org>
	* [3981114] :

	TLS server: Properly empty the OpenSSL error queue
	Thanks to Andreas Jansson and Jonas Borjesson from Twilio for providing a
	detailed bug report on the matter


2016-08-30  Razvan Crainea  <razvan at opensips dot org>
	* [bd11206] :

	packaging/debian: move all current files in a common directory
	(cherry picked from commit 03b4a7eae52f21b0676d0ac1a337e6a996c2de42)
	(cherry picked from commit 9f423f94a1327be7fc2250548de4549bc44a55cd)


2016-08-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [10e26d1] :

	Fix calling trace_dialog() after t_newtran().
	The tracing relies on the REQUEST_IN callback - and this callback is triggered by t_newtran() before we decide (at script level) to do any tracing, so it will a try triggering (with no action).
	The fix is to check (in trace_dialog()) if the tranaction exists (meaning the REQUEST_IN callback was already triggered) and if so, we trigger it again after setting all the tracing flags (to force the callback to actually do the job).


2016-08-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ff8dd4f] :

	Do not delete any internal AVP if "C" flag is used.
	When calling do_routing() with "C" flag (only check the prefix, without actually doing any routing), do not remove any AVP (in the beginning) as we do not add any (after prefix matching) -> no adding, so no deleting.
	This allows you to safely call do_routing("C") while looping throuhg the GWs of another do_routing().


2016-08-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [40828a0] :

	Fix bug in evaluating the port spec in lb_count_call
	(cherry picked from commit e7319c1c8eb5632da28a5c1971b6fa9f7495df89)


2016-08-02  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [97cd5c4] :

	Merge pull request #937 from was4444/1.11
	fix: pthread_mutex should be process-shared


2016-07-26  wxf  <xiaofeng.wang at bqvision dot com>
	* [54cdc17] :

	fix: pthread_mutex should be process-shared


2016-07-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [17beb2d] :

	Fix db_url setting - do not make it mandatory if no db is used


2016-07-20  Razvan Crainea  <razvan at opensips dot org>
	* [30ae24a] :

	flatstore: escape delimiter
	(cherry picked from commit 7b5ce3909ac4d4b0002454129ed3cb654e9de279)


2016-07-15  Liviu Chircu  <liviu at opensips dot org>
	* [5fd7faa] :

	rest_client: Fix incorrect trim operation
	(cherry picked from commit d8bf10da34152612e7835a64cedbb7593b8fc57b)

	Conflicts:
		modules/rest_client/rest_methods.c


2016-07-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [497eaa1] :

	Fix building Via Branch in stateless mode
	Instead of copying the branch value from a previous statefull Via header (which may lead to overflow as OpenSIPS has a maximum value for the built branch), we generate a new branch value based on the previous Via branch - in this way, we have full controll over the length of the resulting Branch and we also inherit the uniqueness of the branch value (from the prev Via hdr).

	Reported by Gupta, Rahul and Elliott, Ray
	(cherry picked from commit 482e643469b351d12418ff54c96beee7b27dca94)


2016-07-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [59f1537] :

	Fix advertised port and address per branch.
	Before the advertised_port/address are preserved only in the UAS part of the transaction - that means it is only one value and it is from the setting done in Request Route; whatever later setting done in Failure Route or Branch Route are not preserved at transaction level (even if they are used on the spot, for sending out the INVITE).
	So, when we have to build a local request (ACK or CANCEL), we do not remember which specific address/port were advertised for that particular UAC (branch).

	Fixes #917.
	(cherry picked from commit eb850a22f0af83bf75e75dfadbe1320e8b92784b)


2016-07-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e7610aa] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 7fa9cee5037af26fd1c63b70710f2bc03e6a31f4)


2016-07-12  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ff03d89] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 97f309c34c7333270a3f0f997868bdb9b94107f1)


2016-07-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [38666a2] :

	Fix populating blacklists.
	When creating the blacklists, use the port and protocol of the destination too, otherwise the rules may conflict or be too wide to be used (like 2 destinations with same IP but different ports).
	(cherry picked from commit 0495faa7d96f92da13102480ca43cd1befd37ba0)


2016-07-11  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1d6aa51] :

	[acc][bugfix] check if database loaded before using its handler
	(cherry picked from commit 8dd10d85b408947576223e75a67228ed7c7abd91)

	Conflicts:
		modules/acc/acc.c


2016-07-08  Razvan Crainea  <razvan at opensips dot org>
	* [ac8d93b] :

	dialog: advance to next cell in case of error
	(cherry picked from commit 70db2cfcdb0c74e6437db2aa9663fd0a5000ecdd)


2016-07-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0a3eb39] :

	Fix error message when a route is not defined.
	Print the name of the route too - the ID is irrelevant for the script writter.
	(cherry picked from commit 409481818148d7951e1520c9dd4eb715c2bec7c6)


2016-07-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [19aff20] :

	Fixed compiling on arm6 with fastlocks
	Partial revert of 058e16 as we need some extra asm code for fast locking on arm6.
	See #923
	Closes #912
	(cherry picked from commit a69c32877b99fbd6eef736eff58c9b6ed8228166)


2016-07-04  Liviu Chircu  <liviu at opensips dot org>
	* [e72eec1] :

	acc: Fix incorrect Request-URI handling
	If the config script does not include any Request-URI altering logic
	(e.g. no lookup() or $ru manipulation), the acc module would incorrectly fill
	in a "msg->new_uri" field which should NOT be freed into the SIP request
	structure, leading to the memory pool being corrupted upon transaction release.

	Credits to Guillaume Lacroix for reporting
	(cherry picked from commit 02cb9f048d0a5e1f988aa9ccae1691216ed16ee5)


2016-07-04  Razvan Crainea  <razvan at opensips dot org>
	* [35970f1] :

	permissions: fix get_source_group() return
	In case a group is not found, return -1 instead of true
	(cherry picked from commit e7f8d1b9290d7ca54460efb3c7905209152dbc80)


2016-06-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [947b923] :

	Fix dialplan module when using db_text backend.
	The db_text makes no difference between NULL or "empty string" values in DB -> both are internally translated as NULL . The dialplan module, in a very abusive way, forces "not null" (in DB schema and in the code for data validation) even for columns that are optional (like subst_exp, repl_exp, timerec and attrs). Besides being bogus (if a column is not to be used, you have to set it to empty string rather than let it NULL), it makes impossible the usage of db_text with dialplan.
	This fix allows (DB and code) the mentioned DB columns to be also NULL.
	The change is backward compatible, it should not break any existing usage of the dialplan module.

	(cherry picked from commit 8f548976389ee3968bf06f649b54d88db694f949)
	(cherry picked from commit 618ff9254472e6f4e3c4af6f49b7513bbd49593d)


2016-06-25  Liviu Chircu  <liviu at opensips dot org>
	* [12af967] :

	Fix undefined function
	Thanks to Nick Altmann for the quick report


2016-06-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e61a6b8] :

	Fix script varibles for providing port and proto (as part of SIP URI).
	If the SIP URI does not have an explicit port or proto, determine the default port/proto in a SIP wise manner (rather than returning 5060 / UDP) (Ex: sip:example.com;transport=tls has default port 5061 and not 5060 ; or sips:example.com has default proto TLS and not UDP).

	Affected variables are $dp, $rp, $op and $dP, $rP, $oP
	(cherry picked from commit 6cc850e34dcd022f1ed354bd50d9a1809518fa1f)


2016-06-23  Razvan Crainea  <razvan at opensips dot org>
	* [8c6cf70] :

	init: use the specified CFGFILE in debian init
	In case the CFGFILE changes in the init script, opensips will still start with
	the compiled file instead of the one configured
	(cherry picked from commit 030efef84d240646ed8e99616b8a6eb64f7d17d2)


2016-06-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5fb3434] :

	Fix potential 100 Trying duplicates.
	Added the "auto_100trying" module parameter to allow the script writter to take control (from script level) over when the 100 Trying reply is to be sent back.
	By default, the reply is automatically generated when the INVITE transaction is created (see 908ce1be3766d9c27bfb576e5e0cc3b4eecbee31)
	Fixes #833

	(cherry picked from commit b023c93a8c476e70b1550da4f46c91d6e2679442)
	(cherry picked from commit 71b527446b00fc4e3886d8d02c7d03d313dbee05)
	(cherry picked from commit 248c836280bca280d46a5468acf89a590fb58d29)


2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [e885a77] :

	Update ChangeLog

=========================== Release 1.11.8 ==============================

2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [4438f09] :

	Update version from 1.11.7 to 1.11.8


2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [8034909] :

	Update specs from 1.11.6 to 1.11.7
	Reported by Carlos Oliva (telematico on GitHub)
	Close #908


2016-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [ad25211] :

	rtpproxy: no need to update the len for IPv6
	(cherry picked from commit 5cfd916ca41ed60c9997f95d05694c9083b743b1)


2016-06-17  davesidwell  <davesidwell at users.noreply.github dot com>
	* [b481aef] :

	Update rtpproxy.c
	When moving stored parameters from Branch AVP to Dialog variable, make sure that the integer value "setid" is handled correctly so that it remains valid for the remainder of the dialog.
	(cherry picked from commit e267e9eb83e2345ca716b897975c2fbfbb4e75ce)


2016-06-17  davesidwell  <davesidwell at users.noreply.github dot com>
	* [a706056] :

	Update rtpproxy.c
	When building I/O vector for command to rtpproxy in "force_rtp_proxy_body", after an IPv6 address is detected and the "6" option is added, increase the length component in the I/O vector so it is passed correctly.
	(cherry picked from commit 4e73871adba3f48b67a9ebbf20a2d9c60b823be8)


2016-06-16  Răzvan Crainea  <razvan at opensips dot org>
	* [3bcf310] :

	Merge pull request #860 from andrey-vorobiev/support-uris-without-user
	Add support for SIP URIs without user part in 'avpops' module.


2016-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c788f20] :

	Fixed failure to enable NAT pinging.
	Commit 8f0c677 introduces a bug in testing is usrloc domains are available, and if not, to disable the NAT pinging in nathelper. The test is wrong as it is done in mod_init, while registrar module registerd the usrloc domain via fixup function, after the mod_init section.

	Reported by Nick Altmann
	(cherry picked from commit f150fb75611a6e61eabc134f266064bd23f1c850)


2016-06-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4baead7] :

	Fix memory corruption on $stat() vars
	The $stat() var specs are kept in pkg, while the name (if stat not found) is kept in memeory. This means all the copies (form all procs) of the specs will point to a single shm block. It is not safet to free this block as you have no idea how many copies of the spec (from other processes) still refer the name.
	Closes #902


2016-06-09  Liviu Chircu  <liviu at opensips dot org>
	* [f923d2f] :

	Fix a TLS connection matching bug
	Thanks to Igor Pavlov for reporting and helping with troubleshooting


2016-06-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c589357] :

	Fixed forcing FAST LOCKS for arm6.
	Use FAST locking support for arm6 too.
	For Linux, use POSIX as default locking support.
	(cherry picked from commit 058e16f2a76df9be4e48fa6866b096502981d530)


2016-06-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [11a32c5] :

	Fix evaluating the SIP port from a SIP URI.
	Use the new function get_uri_port() to evaluate the port and proto, in a SIP wise manner, form a SIP URI. If port/proto are not explicitly set in the URI, consider the default port for the used transpor proto. If protocol misses, we assume the default protos according to the URI schema.

	NOTE: it is completly bogus (and dangerous) to assue 5061 if SIPS schema is used as:
	1) SIPS can use used with WSS, which actually has 443 port
	2) TLS can pe required via transport param in a SIP schema URI too
	(cherry picked from commit 4c54bcd8bf0426f899b82505e493c97ef5378c79)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a2132b8] :

	Removed wrong "NOT NULL" constraint over the contact DB fields
	The code actually handles the case of NULL callee / caller contacts, so DB must allow NULL values.


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [40cbcd7] :

	Removed unused "error" jump label
	(cherry picked from commit 5819b0fa7033bf2a6daef824bc21dd4ba497ae1b)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e77e69e] :

	Fix error handling in DB writes.
	If inserting/updating a dlg record in DB fails, do not exit with error, but continue with the rest of the dialogs.
	Credits for finding and reporting this go to Rik Broers @ Motto
	(cherry picked from commit 0ca6cf035471fc010366e4d29ced5d6fd63199ab)


2016-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9d60efd] :

	Proper handle the case of no usrloc domain registered.
	Prevent get_next_udomain() crashing if there are no usrloc domains registered (reported by Qasim Akhan on users mailing list.
	Do not enable the pinging support in nathelper if usrloc has no registered domains.

	(cherry picked from commit 8f0c677be7dfd3fe6b17932173f14e049ae466a5)
	(cherry picked from commit f2ab0dad3b709521d38c2662112cfbd09b1a5085)


2016-06-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [87f2212] :

	Fix documentation on former b2bl_key_avp module param
	(cherry picked from commit ca21c6d2871e01d093c69371ddcc204c5af0355a)


2016-05-31  Razvan Crainea  <razvan at opensips dot org>
	* [b9f0d76] :

	httpd: properly treat select response
	(cherry picked from commit b49d37494d77c81bdbf76406fc568f530cd66379)


2016-05-30  Razvan Crainea  <razvan at opensips dot org>
	* [8cea14e] :

	re-do ChangeLog


2016-04-14  Andrey Vorobiev  <andrey.vorobiev at mind dot com>
	* [459f2e9] :

	Add support for SIP URIs without user part in 'avpops' module.
	This module provides a set of avp_db_xxx functions which take pseudo
	var and flag as first argument. Flag can be one of username, domain,
	uri or uuid. Previosly avp_db_xxx functions used to return an error if
	flag has been set to username, domain or uri and specifed pseudo var
	did not contain username and host after parsing as SIP URI. This
	behaviour seems to be strange because if flag is being set to
	domain/username and sip URI contains domain/username we can still
	load/store/delete this variable.


=========================== Release 1.11.7 ==============================

2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d39cfb7] :

	Fixed backporting error (1.11 does not have the proto structures).


2016-05-30  Razvan Crainea  <razvan at opensips dot org>
	* [7f627e0] :

	Update ChangeLog for 1.11.7


2016-05-30  Razvan Crainea  <razvan at opensips dot org>
	* [f3f21ee] :

	Update version to 1.11.7


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f91441d] :

	Fixed interface matching in loose_route()
	If port is missing in Route URI, do not assume default 5060, but consider the schema and protocol (they may require a different default port).
	Ex: sip:10.0.0.5;transport=tls was previously handled as sip:10.0.0.5:5060;transport=tls, which is wrong as the default TLS port is 5061
	Reported on mailing list by Ravitez Dondeti.
	(cherry picked from commit 3593a5f5b2e012154b1c9a00e1645c67c5ece91c)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [027617c] :

	If POSIX sems are used, be sure to link against pthread lib
	(cherry picked from commit f7de6406056cbae95ba9f7521d822d280afbe6a2)


2016-05-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4dbe583] :

	Fixed proper cleanup on failure of tcpconn_new()
	The chances for going for error cases are very low, still let's do it in the proper way


2016-05-27  Razvan Crainea  <razvan at opensips dot org>
	* [35575e2] :

	add license to rw_locking.h header
	(cherry picked from commit e3a57ac953259a0254a07198aabc88eaac9da9c2)


2016-05-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3f85e2d] :

	Fixed missing MI reply on pua_publish.
	Properly send an MI reply for the async pua_publish with Expires 0.
	Many thanks to Damien Sandrs for invetigating and reporting.

	Closing #657
	(cherry picked from commit 60d01efe811ac7eeaa063032a309b1895c59e92f)


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [b0f29c6] :

	Improve error reporting for unknown script vars
	Fixes #574
	(cherry picked from commit 97ace293dd4c7eb2fe8cd8fbee693455a5737861)


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [000f918] :

	dbtext: convert DBG to ERR for better debugging
	(cherry picked from commit 0f08b26e40b31bb8af325ba62cfa32676c62ae86)


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [47c66e6] :

	dialplan: Improve documentation
	Added paragraphs regarding rule types along with explanations on
	they way priorities and rule tie-breaking work.
	(cherry picked from commit 46894f819d1d7d6092129b334e33956e89e5d4ea)

	Conflicts:
		modules/dialplan/doc/dialplan_admin.xml

	(cherry picked from commit 4ef316b730b35256b3689c83ee3774b137f9fd70)

	Conflicts:
		modules/dialplan/README
		modules/dialplan/doc/dialplan_admin.xml


2016-05-26  Razvan Crainea  <razvan at opensips dot org>
	* [fe94759] :

	fix bin crash if no listener defined
	When using usrloc and dialog replication, if no bin_listen is defined,
	OpenSIPS crashes. This fix ensures that if there are any replication
	destinations defined, the binary listener exists.

	Thanks go to Stas Kobzar for reporting this
	Closes #652
	(cherry picked from commit 8f46c2fb495d664e868cc226e06c9daf02e63fa6)


2016-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [22404a1] :

	dialplan: Fix a rule tie-breaking bug
	When an input string would match both a "string" rule and a "regex"
	rule, the priority based tie-breaking was incorrect (now favouring
	the bigger priority instead - opposite to default module behavior).

	Thanks to @paolodepa for suggesting this fix
	Fixes issue #696
	(cherry picked from commit cbdd79ab3f6d772c6ef1fb7afc44990e9cad294e)


2016-05-25  Razvan Crainea  <razvan at opensips dot org>
	* [a20f158] :

	call_center: obey lock_set interface
	(cherry picked from commit 4a226ced3309a045b11f6e651bebd6b076faefa2)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7b3bd42] :

	Fix warning in SYSTEM V locking functions
	(cherry picked from commit 53b3f402a4d9fb0ff1ba30288d810d41d6b55b1b)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [70e07ba] :

	Fix bogus set locking functions.
	It is used for SYSTEM V locking only, looks like a copy'n'paste error.
	(cherry picked from commit 4bcdf4e6aee07ef965f6ae573b289f3fd082fdde)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [84249fa] :

	Proper support for USE_POSIX_SEM option in Makefile
	(cherry picked from commit 5e40aaf9c3ed8ab4381d847f6a1f6a01a8113bf7)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6765f8d] :

	Obey USE_SYSV_SEM and USE_PTHREAD_MUTEX.
	If USE_SYSV_SEM or USE_PTHREAD_MUTEX are defined via Makefile.conf, do you force autodetection (based on arch type) of the locking support.
	(cherry picked from commit 39592dc9f25ecee982156e365d160642bdde48e8)


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [dc52882] :

	mi_xmlrpc_ng: Remove an incorrect free operation
	Completes commit d047e109
	(cherry picked from commit 99f039e37cd79621b2dcc2b5ec2decc9e7c39670)

	Conflicts:
		modules/mi_xmlrpc_ng/http_fnc.c

	(cherry picked from commit d1e0989c702acd7764dd60de68d0da73b472f17d)


2016-05-25  Liviu Chircu  <liviu at opensips dot org>
	* [5478958] :

	mi_xmlrpc_ng: Fix a shared memory leak
	(cherry picked from commit d047e1096e2f6624f776d9a031f92be3cc9a0a0d)


2016-05-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [33d4723] :

	Fixed bogus pkg_free on pointer in data segment
	Reported by @dzhou121
	Closes #854
	(cherry picked from commit b9aa87360eecf1e77baea661b855eec4f5798f2f)


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [ee4d057] :

	TCP connection and alias lookup: Add matching by transport
	The fact that all currently supported TCP-oriented protocols have different
	standard ports is not an excuse for not including the transport into the
	match condition (i.e. dest IP address + dest port + dest transport).

	This may very well prevent issues with messages being sent out over the
	wrong TCP connection in a number of scenarios where we employ TCP connection
	reusage over both plain TCP and TLS with a Proxy that specifies the same port
	in the topmost Via header when it establishes each of the two connections.


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [3279be7] :

	b2b_entities: Fix memory corruption due to module ordering
	The problem is related to "loadmodule" statement ordering (at script level),
	and the fact that script callbacks are run in the same order.

	This issue has been already fixed in 2.1+ through module dependencies.


2016-05-24  Liviu Chircu  <liviu at opensips dot org>
	* [d188b14] :

	Revert "Accept TCP aliases by default"
	This reverts commit d62bc967b0d6784d2baced88b895da57f3f4ab9a.

	Firstly, TCP connection reusage (RFC 5923) should only be employed between
	TLS endpoints - only TLS allows the endpoints to authenticate each other
	during connection setup, preventing unauthorized connection hijacking.

	Secondly, aside from any security considerations, RFC 5923 must
	not be employed fanatically (Proxy-Proxy, Edge-UA, UA-Proxy) on any TCP
	connection (especially disregarding the ";alias" Via parameter!), but
	rather only between adjacent SIP entities who can both initiate a
	connection towards each other, and also support the RFC. In the real
	world, we're basically only talking about the Proxy-Proxy usage case, as
	any SIP UA scenario will most likely involve some form of NAT and a
	Proxy that cannot open connections backwards, towards the UA. In these
	cases, TCP connection reusage is _completely_ out of the question, as a
	single UA might end up receiving all calls of all users behind their
	public IP.

	Thanks to Jonas Borjesson for reporting the problem in the first place.
	(cherry picked from commit 715339fdd25bc74797e6f978d164eb0c4d5669ce)

	Conflicts:
		net/net_tcp.c
		receive.c


2016-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [785e9e8] :

	Fix a string concatenation operator bug
	This patch fixes an issue with string concatenation where any NULL
	operand would cause all operands to its left to be ignored when
	computing the result of the expression.

	Reported by Ovidiu Sas
	Closes #870
	(cherry picked from commit a420752f436a1f952c255df8d5dbe9ea59b0d653)


2016-05-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f3692b7] :

	Process sequential messages received in CONFIRMED_NA state
	Due to UDP race conditions, sequential messages may be received
	before the ACK confirming the initial INVITE ( eg. Re-INVITE sent
	immediately as the call is established in order to force
	a specific codec ) - also push these requests through the whole
	dialog processing in order to avoid any future issues ( eg. CSEQ
	updating which, if left unprocessed, will lead to generating out
	of order sequentials by OpenSIPS )
	(cherry picked from commit bfaf02242a98c464dfbdcd3c3ebf3fbb555bcc47)


2016-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ccf58c4] :

	Fix bogus timer ref counter during expire update.
	Many thanks to Trevor Francis for reporting and helping with troubleshooting and testing.
	(cherry picked from commit 047b1b3e32a9af30dd44f2487460975ed7b3a815)


2016-05-04  renicok  <renico.koen at gmail dot com>
	* [7cb3ce5] :

	Updated opensipsctl.base to also search /sbin
	The md5 utility is located at /sbin/md5 on FreeBSD 8.3. An additional common location was added to allow the script to accommodate this.
	(cherry picked from commit ca87f55ad071257aa3b891347aadb55a7729d25b)


2016-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [20b4364] :

	MI library: Add comments regarding a known issue
	Currently, MI arrays cannot contain objects with non-identical
	"name" attributes.

	This patch also quickfixes this issue in mi_list_all_profiles() by dropping
	the array idea altogether, in favour of a top-most object.
	(cherry picked from commit 6c105015c3a0a02c6f65822f5ce52e12bd0ae108)


2016-04-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [493f1bf] :

	Properly init from_len before recvfrom().


2016-04-07  Kristian Høgh  <kfh at uni-tel dot dk>
	* [6a0f9b1] :

	cachedb_redis: Prevent crash when re-connect keeps failing
	(cherry picked from commit b501df74a231a987babe6eeadb3c676d8823619c)


2016-04-01  ionutrazvanionita  <ionutionita at opensips dot org>
	* [12f37c0] :

	fix dangling db conns bug
	* database are now started in child_init
	* avoid opening db conns in mod_init and leaving them in the db pool because
	when fork() shall be done all the processes will use the same db
	structure therefore the same tcp connection
	(cherry picked from commit 47b5dc900efd29f14397807e1947c99540159e26)


2016-03-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fc5cf4e] :

	Fixed 491 Pending scenario in B2B.
	Generate 491 Pending reply to the correct transaction (the new incoming one) and drop the requests (do not forward it).
	Credits for debugging, reporting and fixing go to @DMOsipov .
	Closes #679
	(cherry picked from commit ec7b4e54bf7f09fb6ff56e8f8497563cf13719e8)


2016-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [952b358] :

	Accept XMLRPC requests without params node.
	If there are no parameters, the params XML node is not required.
	Repored by Nick Altmann
	Closes #826
	(cherry picked from commit d20b3d05409fc5f712c75b86223fe955e57ec5c4)


2016-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [180ba8b] :

	Fixed port param for lb_is_destination().
	It must accept integer values also, not only variables.
	Reported by @telephone-man on GITHUB
	Closes #808.
	(cherry picked from commit 143328f718e8c1e753e16d187415eb0ba80b7ef7)

	Conflicts:
		modules/load_balancer/lb_data.c
		modules/load_balancer/lb_data.h


2016-03-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a98d0eb] :

	Fixed usage of Prep Statement on failed CDRs.
	The number of inserted columns is variable (n+m or n+m+2), so we need different statements for each.
	Reported by @apsaras (on GITHUB)
	Closes #821
	(cherry picked from commit e49e2e848bbd7243a31d7ca99d4bdc9360466cf9)


2016-03-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [13cbc68] :

	Fix extracting TO hdr.
	Do not add '@' if username is not present.
	Reported by @DMOsipov on GITHUB.
	Closes #818
	(cherry picked from commit e74f6655ee735feb7e5f22298405172fb74e86c1)


2016-03-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d5c3bd1] :

	Reset to 0 the whole branch if failed.
	If we do not reset, on trying to add the next branch (on the same position), we will end up with dangling pointers.


2016-03-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a8bcee4] :

	Fix crash when using $si in non SIP routes.
	If using $si in event, timer or startup routes, return a NULL value.
	Use a dummy AF_INET from src and dst IPs.
	Prevent crashing while evaluating $si by checking return code of ip_addr2a()
	Closes #817
	Outdates #828
	(cherry picked from commit 2d0cebc0be2491984ce357afd89d41212866bc06)

	Conflicts:
		modules/dialog/dlg_req_within.h
		modules/event_route/route_send.c


2016-03-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f13253a] :

	Fixed memory leak on checking disposition hdr.
	Free the parsed disposition body all the time (on success and failure) as it is not attached to any structure, so it will leak if not explicitly be freed.
	Credits for reporting this go to Jarrod Baumann.
	Based on an original fix from Jarrod Baumann
	Closes PR #825
	(cherry picked from commit 4601e5653be202912a3732f08cdafc63d64afe7f)


2016-03-09  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [6a1edb6] :

	Merge pull request #823 from jarrodb/db_postgres
	Add JSONOID to pg_type.h for supporting JSON return types as DB_STRING
	(cherry picked from commit e6bb7acb66cdc8cc1869ba1f8b7ce3ce123d7b39)


2016-03-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [908ce1b] :

	t_newtran() automatically sends a 100 Tryting for INVITE.
	TO have a consistent behavior between:
		t_newtran();
		t_relay();
	and
		t_relay();

	(where in the first case a 100 Trying will not be auto generated), we do not sent the 100 Trying on r_relay (when transaction is built) but on t_newtan().
	Reported by MAxim Sobolev.
	(cherry picked from commit 0db77896288e7ef093352fc0a08f4035c1191bf4)

	Conflicts:
		modules/tm/t_funcs.c


2016-03-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [78dbc17] :

	Fixed leak due wrong return code handling.
	Based on a patch provided by Jarrod Baumann (@jarrodb)
	Closes #822
	(cherry picked from commit 3b37b827746459a538fb86507414d4a26481a946)


2016-03-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [7f3cd63] :

	Merge pull request #814 from sippy/master_rtpp_ip6_fix
	Fix an issue with IPv6 in the rtpproxy module
	(cherry picked from commit f906d931a0908bee05b04843d397fa848158311e)


2016-03-04  Razvan Crainea  <razvan at opensips dot org>
	* [57085a3] :

	tcp: prevent invalid mem access
	Reported by Saúl Ibarra Corretgé
	Closes #813


2016-02-29  Julián Moreno Patiño  <julian at debian dot org>
	* [84e3706] :

	Deprecate 'use UNIVERSAL'
	(cherry picked from commit e5f0b55da6fd24b6e661801d26d4dd53b1793fd3)


2016-02-26  Di-Shi Sun  <di-shi at transnexus dot com>
	* [7bb51b9] :

	Updated to support STIR.


2016-02-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [330dfae] :

	Just code identation.


2016-02-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [23155e5] :

	Fix contact DB delete in CONTACT_ONLY macthing.
	Do not use the callid as part of the key during the DB delete as it may changed (can be updated) in the meanwhile.
	Reported by @ferrored.
	Closing #764
	Many thanks to @ferrored for his support in troubleshooting this issue.


2016-02-17  Liviu Chircu  <liviu at opensips dot org>
	* [84da83f] :

	Improve qvalue parsing
	* accept qvalues with no decimal digits (e.g. "1." and "0.")
	  (this removes E_Q_DEC_MISSING from error.h)
	* improve bad qvalue error reporting
	(cherry picked from commit ed60363d9d66bf230872c535e3fc0cf7f117b2c7)

	Conflicts:
		cfg.y


2016-02-11  Vlad Paiu  <vladpaiu at opensips dot org>
	* [5dec43a] :

	Don't push throug RTPProxy streams with port 0 in SDP


2016-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e8e0353] :

	Fix IPv6 insertion in fix_nated_contact()
	Add the [ ]  around IPv6 in the newly built contact URI.
	Reported by Jonathan Hunter on the mailing list
	(cherry picked from commit ce89e291e0616d80d555f1e386edde5bbd3922e9)


2016-02-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5c6b59e] :

	Fix calculation of timer set on 32b
	A bogus bitwise operation broke the calculation of the timer set on 32bits arch.
	Reported by @mshary (Muhammad Shahzad Shafi)
	Closes #732.
	(cherry picked from commit 5b7b5f78cb675d1d4126866307dc0caa22067d09)


2016-01-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d23a1ad] :

	Fixed wrong warning on memory leak.
	Set the auth_hdr buffer to NULL after moving the buffer into the lump.
	Reported by Colin Martin on mailing list
	(cherry picked from commit bbaf8213ae9856d2345aa66d8aa002ec5f1f3fa5)


2016-01-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ef82ca2] :

	Fix codec handling functions when faulty streams are defined.
	Bogus test on the return code of stream_process() (using bitwise OR for -1, 0 and 1 values :O ), leads to a generic failure to find any codec in any stream if there is an invalid stream in the SDP.
	For example, if a video stream is defined but with no codecs, stream_process() will return -1 for it (as it is a bogus stream). While iterating through all the stream (including the valid audio stream), the -1 ret code will discard any 1 future ret code due the bogus bitwise OR.


2016-01-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a8f0136] :

	Fix STANDARD and EXTRA list of tables.
	Permissions (in postgres) were not granted for the missing tables.
	Reported by Nathaniel L. Keeling III on mailing list
	(cherry picked from commit aebf41f79274679bfc9a984a9d0c6871ac139462)

	Conflicts:
		scripts/opensipsdbctl.base


2016-01-25  Vlad Paiu  <vladpaiu at opensips dot org>
	* [ce6e844] :

	Fix double free in case of errors when running MI command


2016-01-22  Razvan Crainea  <razvan at opensips dot org>
	* [024b49e] :

	use gnu89 for newer compilers no matter what arch/build system is used


2016-01-22  Razvan Crainea  <razvan at opensips dot org>
	* [be7d825] :

	Revert "compile: use GNU89 standard for newer compilers"
	This reverts commit d3c5d3d0e27e0c6f4790a957a706788cdd23404f.


2016-01-21  Razvan Crainea  <razvan at opensips dot org>
	* [7dab301] :

	increase version to 1.11.6


2016-01-21  Nick Altmann  <nick.altmann at gmail dot com>
	* [1d5faae] :

	RPM spec: increase version number and fix for gcc5


2016-01-21  Razvan Crainea  <razvan at opensips dot org>
	* [d3c5d3d] :

	compile: use GNU89 standard for newer compilers


2016-01-19  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [b5d0e1a] :

	Merge pull request #664 from wdoekes/wjd-allow_unset_dlg_in_req_route
	dialog: Document that unset_dlg_profile can be used from request_route.
	(cherry picked from commit 8d23d9bd7e55ede0f68c042204096fe1b4087dae)


2016-01-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [52fdf9b] :

	Fix restoring leg route set.
	Reported by Søren Andersen.
	(cherry picked from commit b602a7fb06a3658b71adedd69cf94eae814e93e5)


2016-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [904896e] :

	uri: fix e164_check overflow checking
	Reported by @ferrored on github
	Closes #762
	(cherry picked from commit 70e5a656c3cd4aa14757245dd710d3869575d3ca)


2016-01-18  Razvan Crainea  <razvan at opensips dot org>
	* [af0bfbf] :

	update ChangeLog with all commits in 1.11.6

=========================== Release 1.11.6 ==============================

2016-01-17  Nick Altmann  <nick.altmann at gmail dot com>
	* [71e1320] :

	RPM spec: prepare for new build system - remove obsolete triggers - change tarball name and url


2016-01-15  ionutrazvanionita  <ionutionita at opensips dot org>
	* [766f7ea] :

	[siptrace]fix proto issues
	leave IPPROTO_* format in hep header(which is returned by
	pipport2su() function) and after setting it use OpenSIPS
	format for sending(PROTO_UDP)
	(cherry picked from commit 5a28baff06912a18193d734af5afee871f6d3502)


2016-01-14  Razvan Crainea  <razvan at opensips dot org>
	* [f6a3e52] :

	1.11.6: update changelog and build version


2016-01-14  Liviu Chircu  <liviu at opensips dot org>
	* [9750241] :

	Coverity PR: minor refactorings


2016-01-14  Liviu Chircu  <liviu at opensips dot org>
	* [92f32a2] :

	Merge branch 'coverity_scan_1_11_merge' of https://github.com/ph4r05/opensips into ph4r05-coverity_scan_1_11_merge


2016-01-14  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [92c6928] :

	Fixing non-null terminated string bug, found by @liviuchircu


2016-01-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [e4965d9] :

	[sipcapture]completely remove mod_init mi_cmds registration
	(cherry picked from commit 02defafe421fa1ff4ab0f05f63cc490fa1717ff3)


2016-01-14  ionutrazvanionita  <ionutionita at opensips dot org>
	* [2c52d1e] :

	[sipcapture]mi_cmds were registered twice
	(cherry picked from commit e36453ee6c687975382c3125b1dad9a382be041a)


2016-01-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [a533e72] :

	[snmpstats]more hints for setting up in the docs
	Conflicts:
		modules/snmpstats/README
		modules/snmpstats/doc/snmpstats_admin.xml

	(cherry-picked from 6e7535207d5531e0fc2562d05b874acd30488368)


2016-01-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0dfb46d] :

	Allow retransmissions and wait for reply/timeout on canceled branches.
	Do not do anything about branches with no received reply; better continue the retransmission hoping to get something back; if still not, we will generate the 408 Timeout based on FR timer; this helps with better coping with missed/lated provisional replies in the context of cancelling the transaction

	Many thanks to Maxim Sobolev for bringing this under discussion.
	More to be read:
	http://lists.opensips.org/pipermail/devel/2015-November/018623.html
	http://lists.opensips.org/pipermail/devel/2015-December/018810.html


2016-01-08  Liviu Chircu  <liviu at opensips dot org>
	* [4902336] :

	cachedb_mongodb: Fix crash when losing DB connection
	Tested with mongo-c-driver v0.6. It turns out that the driver's
	mongo_cmd_get_last_error() does not always return an iterable bson
	structure. This patch adds a safety check, so that iteration is skipped.

	Reported by Sasmita Panda
	Closes issue #747
	(cherry picked from commit 2e5160e5e1d895a5694ba4297058e1ca587e787a)


2016-01-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [f854a42] :

	Merge pull request #746 from lemenkov/remove_has_sdp
	rtpproxy: patch: has_sdp() does not exist
	(cherry picked from commit 2e59ba930001593fcd8b60cf446979f69594bedf)


2016-01-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7e814b2] :

	fix validate_dialog cseq checking
	If prev_cseq from the dlg_leg is not set, check the
	r_cseq

	Conflicts:
		modules/dialog/dlg_handlers.c


2015-12-30  Razvan Crainea  <razvan at opensips dot org>
	* [bb00e71] :

	avpops: remove async undeclared function
	Closes #738


2015-12-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [398b029] :

	avpops: start without db_url if no func is using DB
	Conflicts:
		modules/avpops/avpops.c


2015-12-23  ionutrazvanionita  <ionutionita at opensips dot org>
	* [245b549] :

	strip_body(): check if content-type exists


2015-12-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [128b36c] :

	comparse_uris: unescape all characters in user field


2015-12-21  ionutrazvanionita  <ionutionita at opensips dot org>
	* [7f37f05] :

	Usrloc: modify invalid contacts behaviour
	* stop inserting a contact even though received is OK
	(call parse_uri() for each contact)
	* at startup, if a bogus contact is found continue processing,
	letting the user know that he has to remove that contact from
	the database


2015-12-09  Razvan Crainea  <razvan at opensips dot org>
	* [95f5f79] :

	b2b_logic: set late SDP negociation flag
	For the entity that initiates a call, late SDP negociation is used, because
	the SDP of the first entity is not known. This patch sets the late_sdp flag
	for that entity, to flag the b2b logic to send the ACK with SDP.

	This bug was reported on the mailing list by Sebastian Sastre.
	(cherry picked from commit 20df8362455a60aaded86daa9a79d189b73a1880)


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [4594e82] :

	fixing coverity found defects - null dereference


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [fd57609] :

	fixing coverity found defects - memory corruption, null dereference


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [81aeba4] :

	fixing coverity found defects - null dereference & broken logic


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [906bb91] :

	fixing coverity found defects - null dereference


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [b578dda] :

	fixing coverity found defects - null dereference


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [d471234] :

	fixing coverity found defects - copying into fixed size buffer without check, db_http


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [92a7361] :

	fixing coverity found defects - copying into fixed size buffer


2015-12-06  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [ef3d3de] :

	fixing coverity found defects - null dereference in dispatcher


2015-12-05  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [b8e2318] :

	fixing coverity found defects - null dereference, invalid e164 number check


2015-12-05  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [c004967] :

	fixing coverity found defects - null dereference, break missing


2015-12-05  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [aeedb7d] :

	fixing coverity found defects - logical fix in ul callback check type, null dereference


2015-12-05  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [b22844e] :

	fixing coverity found defects - processing initialized variables, control flow, invalid expressions


2015-12-05  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [e09f09a] :

	fixing coverity found defects - resource leakage


2015-12-05  Dusan Klinec  <dusan.klinec at gmail dot com>
	* [c537cb8] :

	fixing coverity found defects - invalid memory access / memory corruptions


2015-12-04  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [39ed3dc] :

	Merge pull request #681 from shiningstarj/dialoginfo-memory-leak
	Presence_dialoginfo: Fix memory leaks in notify_body.c
	(cherry picked from commit ab5cd613df4ef9831a33923ba5e51bf572203c8c)


2015-12-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a622082] :

	Return <null> value for missing AVPS.
	Maintain database result integrity by supporting null column values.
	Closes #693 and #677
	(cherry picked from commit 88bd36bd8b200bfde902f2bb28c2be8ea0fb18f7)


2015-12-04  Razvan Crainea  <razvan at opensips dot org>
	* [9ce6c4a] :

	b2b_logic: parameters cannot be lower than 1
	(cherry picked from commit 152f22e63cc3f045492367b18ed5357cf5a89f2b)


2015-12-03  ionutrazvanionita  <ionutionita at opensips dot org>
	* [1f5304c] :

	properly handle epoll events


2015-12-03  Nick Altmann  <nick.altmann at gmail dot com>
	* [421f6c2] :

	RPM spec: move ulimit to init-script


2015-12-03  Nick Altmann  <nick.altmann at gmail dot com>
	* [710f111] :

	RPM spec: increase max files limit and add dependencies


2015-11-27  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2ea921b] :

	Fix proper reporting for the statistics types.
	This fixes the charting of SHMEM related stats in Control Panel
	(cherry picked from commit 52d5ef5bdf03aacb245420bc0193069a7b38322a)

	Conflicts:
		statistics.c


2015-11-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4d32349] :

	undo last cherry-pick


2015-11-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c18a21b] :

	Fix bug in populating the PIDs
	(cherry picked from commit eccbf8d5d30bea765f19ab2b9816a57386091692)


2015-11-23  Nick Altmann  <nick.altmann at gmail dot com>
	* [1d8d3bf] :

	RPM spec: remove excess rest client package


2015-11-17  Răzvan Crainea  <razvan at opensips dot org>
	* [f670634] :

	Merge pull request #682 from telematico/1.11
	1.11


2015-11-13  ionutrazvanionita  <ionutionita at opensips dot org>
	* [469e2bf] :

	fix str2int and str2sint input params check
	* if a void string was given to the function ("") 0 value was returned which was not correct
	* input values should be checked for NULL


2015-11-02  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3604ce7] :

	fix mem leak in permissions


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [1dd0700] :

	TCP aliases: Reduce log level of port hijacking alerts
	Allows better log control in deployments where these errors are false positives.


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [85e0634] :

	TCP read errors: Silently discard ECONNRESET
	Also move TCP read errors down to a more disposable debugging level.


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [317af68] :

	Prevent TCP writers from freeing reader structures
	Since a TCP connection's "con_req" field is exclusively used by one reader
	at a time, TCP writers should not attempt to free it when releasing
	connections.

	NB: Issue is fixed in OpenSIPS 2.1+


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [efed06c] :

	TCP aliases: Fix more race conditions (issue #589)
	_tcpconn_find() returns a pointer which should never be used outside of
	TCP lock. This patch completes commit 22f4c1a2e05 by fixing two
	additional issues of the same type in tcpconn_add_alias()


2015-10-27  Liviu Chircu  <liviu at opensips dot org>
	* [fa6034b] :

	Fix potential memory corruption on TCP write errors
	This patch fixes two well-hidden TCP connection referencing bugs which
	would only reveal themselves upon running into failed TCP send() operations
	due to various reasons (e.g. full send buffer) in high-traffic environments.

	Credits to Hieu Ta and Don Steul from Jibe Mobile for detailed reporting
	and providing an adequate replication environment


2015-10-23  Carlos Oliva  <telematico at gmail dot com>
	* [8a81628] :

	updates Debian packaging files to include mi_xmlrpc_ng module as aditional package in default compilation


2015-10-22  Vlad Paiu  <vladpaiu at opensips dot org>
	* [26a0a62] :

	Fixed ACKs CSEQ number when doing in-dialog pinging
	The ACK CSEQ number does not depend on the number of pings or other in-dialog requests since the INVITE transaction, it must be the same as the INVITE
	Closes issue #680


2015-10-22  Carlos Oliva  <telematico at gmail dot com>
	* [ad1e249] :

	Revert "packaging/debian: change MI_XMLRPC to MI_XMLRPC_NG in packaging"
	This reverts commit 4600d259fbe1aabe7dd0f0c5f7880324b8dbd159.


2015-10-20  wxf  <xiaofeng.wang at bqvision dot com>
	* [8455798] :

	fix: some sh(busybox) do not support syntax of `$(< file)'
	(cherry picked from commit ffb25541b6bf4ee841072787f2a09c06c4885ab1)


2015-10-13  Carlos Oliva  <telematico at gmail dot com>
	* [4600d25] :

	packaging/debian: change MI_XMLRPC to MI_XMLRPC_NG in packaging
	mi_xmlrpc has some problems with multithreading and has been
	superseeded by mi_xmlrpc_ng module. Aditionaly needs a very old
	version of libxmlrpc-c3 that is not present in debian wheezy or
	jessie

	This commit change updates Debian packaging files


2015-10-06  Razvan Crainea  <razvan at opensips dot org>
	* [1f5df18] :

	ratelimit: avoid deadlock if counter is not updated
	(cherry picked from commit ec25c07c2e8b2baf792bd49f0044adb4a8f52573)


2015-10-06  Di-Shi Sun  <di-shi at transnexus dot com>
	* [2ef4444] :

	Updated to support CNAM diversion use case.


2015-09-28  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [1de872c] :

	build: fix setting LIBDIR correctly
	(cherry picked from commit 3d485cdff60080124a1257dfdfa68f25408f4114)


2015-09-28  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [d980098] :

	build: fix setting HOST_ARCH on Solaris
	(cherry picked from commit 63bccb458d7a1ec59498439c5e3c952fff6c82c6)


2015-09-28  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [9962f62] :

	makefile: detect target architecture using the compiler
	Fixes producing a 32bit build in a 64bit system.

	Original patch by Andrei Pelinescu-Onciul:
	https://github.com/kamailio/kamailio/commit/c46e79709216c4975abc83869fbce9fa696eac74
	(cherry picked from commit 1161779ab91ac5bbd330ddf5dccc3f00d9e34f35)


2015-09-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [64256bd] :

	Check if at least one DB URL is provided in avpops
	Reported by David Sanders (@dsanders11).
	Closes #644 .
	(cherry picked from commit 34fab0d51ffb473b25871eddd3acef88664c4ec4)


2015-09-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a2b2eb1] :

	Fix auth via B2B module.
	Remove the bogus hooks placed by TM in the outbound SIP buffer (as the buffer may change in local route) and rebuild the B2B invite (with credentials) from the initial sent invite.
	Reported by @DMOsipov and @xxReaper on GITHUB.
	Closing #577 and #628 .


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [25c19b1] :

	dbschema: re-generate SQL scripts
	(cherry picked from commit 70a587fa372e17157c0a8dbb1b26e71620ab2ce4)


2015-09-14  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [09f4be5] :

	xcap: make the 'doc' column a LONGBLOB on MySQL
	A normal-sized XCAP document with external references easily exceedes
	the default column size, leading to all sorts of problems.
	(cherry picked from commit d419f0543c79c12e0e01dc629dede2d872cc6637)


2015-09-14  Razvan Crainea  <razvan at opensips dot org>
	* [0d2535f] :

	regex: release the memory for unused pattern strings
	Thanks go to Federico Edorna <fedorna@anura.com.ar> for reporting and giving
	the solution for this memory leak.
	(cherry picked from commit aa7429e0124478f999ba3737b10ae39900e16b2c)


2015-09-14  Liviu Chircu  <liviu at opensips dot org>
	* [cc82969] :

	cachedb_mongodb: update mongo-c-driver info
	Partial cherry-pick from 7b96d7a7


2015-09-04  Razvan Crainea  <razvan at opensips dot org>
	* [8483800] :

	dialog: return 0 profile size if no value in cache
	Reported by Damien Sanders
	Closes #562
	(cherry picked from commit 7781342ce9366f2a7f9896d66dbc662a643d9d10)


2015-09-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [02e886f] :

	Fix callid for "ul_add" MI command.
	As now the callid is updatable, we need to provide a callid string.
	Reported by Stas Kobzar


2015-09-01  Di-Shi Sun  <di-shi at transnexus dot com>
	* [f2af0c2] :

	1. Updated to support reporting media addresses, proxy local addresses and provider post dial delay. 2. Updated to support CNAM.


2015-08-24  Sergey Khripchenko  <shripchenko at intermedia dot net>
	* [f1fd422] :

	two bugs fixed in db_text module + incorrect use of strncasecmp() + lost pkg_malloc
	(cherry picked from commit de9224b29a4d304b3635818126fde1c234264092)


2015-08-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d6f1b01] :

	Proper handling of 0 ret code from SSL_read


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [0a473f0] :

	tm: fix bavp leaks in case of error
	Thanks go to Mickael Marrache for spotting and debugging
	(cherry picked from commit 70a34b9e974132c6c5269c0c02b2311566bddd12)


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [c0243e9] :

	fix previous commit
	(cherry picked from commit dcd3ec4433548db469492e8a3c96df5c70d81a3f)


2015-08-19  Razvan Crainea  <razvan at opensips dot org>
	* [fb46bc9] :

	Makefile.defs: print target info only if changed
	(cherry picked from commit 14b3bb69ea1d98f5ce06a27e010964f4fac48fbb)


2015-08-19  Răzvan Crainea  <razvan at opensips dot org>
	* [77efd7a] :

	Merge pull request #605 from saghul/makefile-target-master
	makefile: detect target architecture using the compiler
	(cherry picked from commit 87a195823abf123630d06b71cae1150c3ef76ee0)


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2b3a3ea] :

	Fix handling of ASYNC MI commands
	Similar to report #552.


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c08b033] :

	Fix handling of ASYNC MI commands
	Part of fixing #552.
	Reported by @mqandeel .

	Closes #552


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5244b54] :

	Fix handling of ASYNC MI commands
	Part of fixing #552.
	Reported by Damien Sandras.


2015-08-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4791a50] :

	Fix reporting if t_request() failed.
	Capture and report futher if the t_request() failed to send out the PUBLISH request.


2015-08-12  Jarrod Baumann  <jarrod at unixc dot org>
	* [f56a0aa] :

	Do not append colon if uri password is NULL
	(cherry picked from commit 76dc734df0926dbfa5cb6d463dcbf5a82ea6dc2a)


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [719f298] :

	Free double pointer.
	While looping over all location-like tables, set to NULL the result pointer after each iteration.
	Reported by @ionutrazvanionita
	Closes  #566 .


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b2e08eb] :

	Fix use_domain, escaping, cases in remove()
	Use extract_aor() in script function remove() ; extract_aor() takes into account the use_domain and cases settings and is also able to deal with escaped chars.

	Closes #557 .
	(cherry picked from commit 0e1fabbc71c6c315b1f00d3ea58d1796054f2590)


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [db92bfb] :

	Proper test on active destinatins for failover.
	Test both INACTIVE and PROBING flags before considering a destination suitable for failover.
	Reported by @gergelypeli
	Closes #564 .


2015-08-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a0a6f7a] :

	Fix race condition - the log must be under lock
	As information from the alias strucuture is printed, this must be done under lock protection.
	Closes #589 by @dbeskoek.


2015-08-07  Razvan Crainea  <razvan at opensips dot org>
	* [ad90850] :

	add mi_xmlrpc dependency for travis
	(cherry picked from commit 3de60365de262cc8e924f971509792086be176aa)


2015-08-07  Razvan Crainea  <razvan at opensips dot org>
	* [eeef2b6] :

	add travis support
	(cherry picked from commit 63556448a878c06de5b8d695d81d335b075752ff)


2015-08-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3eba3a1] :

	Use SIP pinging when NAT traversal is on
	(cherry picked from commit 67c2c91844641980970d8445291242bdd5ec5310)


2015-08-06  Răzvan Crainea  <razvan at opensips dot org>
	* [235e3e4] :

	fix debian packaging (cherry picked from commit 2d15060e48333ab3cad2e9cf3cafb7a006324185)
	Conflicts:
		packaging/debian/rules


2015-08-06  Razvan Crainea  <razvan at opensips dot org>
	* [2bdd10f] :

	add rest_client specs for debian, fedora and rpms
	Closes #587
	(cherry picked from commit 3dfc83cb254f150d2e6dbbb49f48ec9927be3a3c)

	Conflicts:
		packaging/debian/control
		packaging/fedora/opensips.spec


2015-07-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1b5c86e] :

	Fix  "reload done" marking if reload failed.


2015-07-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ba6a3bd] :

	Fixed memeory exhausting during concurrent reloads.
	Add a new module parameter no_concurrent_reload to prevent multiple reloads in the same time.
	If you have a large routing set (millions of rules/prefixes), you should consider disabling concurrent reload as they will exhaust the shared memory (by reloading into memory, in the same time, multiple instances of routing data).


2015-07-16  Liviu Chircu  <liviu at opensips dot org>
	* [02a7c06] :

	db_virtual: Do not crash if no DB sets are defined
	(cherry picked from commit b391ea3d25dbe286ddd12d4ffc5f53b32cfdc268)


2015-07-10  Liviu Chircu  <liviu at opensips dot org>
	* [636d721] :

	db_virtual: Do not crash if no DB URLs are defined
	(cherry picked from commit 5a832d94bd2af95929a5b8451ee6895a585d6989)


2015-07-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2e0e084] :

	More verbous logging.
	Log the error reported by stat() when it fails.
	(cherry picked from commit 8fefc911e643142b4206fa574896171dbdb1eb82)


2015-06-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [23f2322] :

	Expose unset_dlg_profile() to Request Route.
	Related to issue #554.


2015-06-25  Razvan Crainea  <razvan at opensips dot org>
	* [3c29723] :

	acc: fix multi_leg_bye info behavior
	This bug was making the ACC module to print less information in case there
	were no AVPs populated for the BYE multi_leg_info
	(cherry picked from commit 307388d7499fe2cf4f1ea7f54f2ef11a628e327d)


2015-06-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7728f70] :

	Fix $ct and $ct.fields variables.
	Force parsing of all Contact headers.
	Reported by Nick Altmann.
	(cherry picked from commit 19d0f608c8cb368a324af1a01d381035c0f4f9ad)


2015-06-12  Ovidiu Sas  <osas at voipembedded dot com>
	* [4b8aa79] :

	mi_xmlrpc_ng: unescape xml strings  - related to bug #537
	(cherry picked from commit 8450630617b2504ffdc4089f2500a26b4187e078)


2015-06-12  Ovidiu Sas  <osas at voipembedded dot com>
	* [15176cf] :

	core: adding unescape_xml() function helper to strcommon.[ch]
	(cherry picked from commit f6386ca9029fb56233ef1ac0b2cc2034d88e0928)


2015-06-11  Nick Altmann  <nick.altmann at gmail dot com>
	* [ca2711a] :

	RPM spec: enabled restart feature (in case of crash) in systemd service
	(cherry picked from commit 611b9bb55135b899746a0c71f21f25b0561a81b4)


2015-06-11  Nick Altmann  <nick.altmann at gmail dot com>
	* [f846b41] :

	RPM spec: m4 dependence


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3e46982] :

	Fix documentation on loose_route().
	loose_route() returns FALSE only if there is no Route header or if preloaded local Route only.
	Reported by @gergelypeli on github
	Closes #550
	(cherry picked from commit 2421034845068bbc243a8bd5de8aeebd071fc729)


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [48a7f21] :

	Revert "Fix parsing for Diversion header."
	This reverts commit 31ddc4942d624f4d4cb559c0daa078fcebe527fe.


2015-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f3c2b03] :

	Fix fixing hdr names shorter than 3 chars.
	The fixup function fails to identify header names shorter than 3 (like To or short formats). This affected script functions like is_present_hf() or remove_hf().
	Reported by Nick Altmann
	(cherry picked from commit 1f7bae0915ac93ca231ede55c5540560e5489a7b)


2015-06-09  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [3bb3583] :

	Merge pull request #547 from dynamicpacket/1.11
	fixes for Debian packaging


2015-06-09  User  <user at Users-Mac-Pro dot local>
	* [4027ab2] :

	* Check for freeradius libs in Makefile * Check for json lib include paths in Makefile * Update debian/control with new dependency names and standards * Update debian/rules to remove deprecated dpatch


2015-06-04  Di-Shi Sun  <di-shi at transnexus dot com>
	* [e72d1ef] :

	Updated for OSP Toolkit 4.5.0.


2015-06-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [31ddc49] :

	Fix parsing for Diversion header.
	As Diversion header may be a multi-body header, do not use the parse_to() function as it does not accept multiple bodies. Use parse_rr() function.
	Reported by Nick Altmann.
	(cherry picked from commit 36384927a5d2fd1d900ac36adc2ee15b2acad0c9)


2015-06-03  Razvan Crainea  <razvan at opensips dot org>
	* [948208a] :

	event_xmlrpc: only retry send/recv a couple of times if there are errors
	Credits go to Joseph Frazier (onsip) for spotting this
	(cherry picked from commit 05bc754133dd7fe02dc0c780a7f625a83bfef61f)


2015-06-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [7159148] :

	Merge pull request #534 from seanchann/1.11
	fix rpm build error on centos


2015-06-02  Jarrod Baumann  <jarrod at unixc dot org>
	* [c1baacf] :

	verify pv_export_t parse_name function is set before calling
	(cherry picked from commit 3c47edd9b007aa60e36d6a094e995956509f1da4)


2015-05-30  xqzhou  <zhouxiaoqiang.mstech at gmail dot com>
	* [38402ff] :

	fix rpm build error on centos


2015-05-27  Liviu Chircu  <liviu at opensips dot org>
	* [f09f478] :

	avpops: Fix possible runtime crash
	The patch corrects a bug in commit 685da74670, since mod_init() is
	actually run _before_ module function fixups.

	Detection for raw SQL function calls is now done (properly) at fixup time,
	rather than at module initialization.

	Reported by Antonis Psaras
	Closes #523
	(cherry picked from commit 91d1b4f4b65b4bf70d8db93d956a42d2f58500f9)


2015-05-26  Liviu Chircu  <liviu at opensips dot org>
	* [9c7e869] :

	residential cfg: Set db_url for "uri" module when doing auth
	(cherry picked from commit 724d16d99f9ae46cbeaa6894f45afbb0b4fd650a)


2015-05-26  Vlad Paiu  <vladpaiu at opensips dot org>
	* [64e528d] :

	Set the upsert flag when incrementing / decrementing counters This way the counters don't need to be pre-populated in the DB ( eg. when using them for dialog profiles )
	(cherry picked from commit 74a52d0da12395367019028034c6c20b5cff5b38)


2015-05-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [de477a4] :

	Fix "dialplan addrule" command.
	The match_len column was replaced with match_flags
	Closes #513
	(cherry picked from commit 607fb3e78c9d39b7c0b97fbd5be615369f5a1ef1)


2015-05-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [980b680] :

	Fix NULL value as route param.
	Closes #516, open by @liviuchircu.
	(cherry picked from commit 032c425424846045227d57e88b506c4603315bc4)


2015-05-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [a8971c2] :

	Merge pull request #517 from staskobzar/1.11
	Make sure httpd can recognize Content-Type headers with parameters.


2015-05-20  Liviu Chircu  <liviu at opensips dot org>
	* [9d07e53] :

	route params: increment nesting level on no-param routes
	Completes commit f3ed4db99
	(cherry picked from commit 564acbe638fab63deb2d39462b667b2d83a75f05)


2015-05-20  Stas Kobzar  <stas at modulis dot ca>
	* [876d297] :

	Matching content type parameter value using strcasecmp instead of strncasecmp.


2015-05-19  Stas Kobzar  <stas at modulis dot ca>
	* [fa9e57c] :

	Make sure httpd can recognize Content-Type headers with params (with improved memory management patch from bogdan-iancu).


2015-05-19  Stas Kobzar  <stas at modulis dot ca>
	* [bc8e865] :

	httpd: Make sure httpd can recognize Content-Type headers with params.


2015-05-18  Jarrod Baumann  <jarrod at unixc dot org>
	* [1d9b3e9] :

	set local variable memory to 0 to prevent core dump
	(cherry picked from commit d84df1900267516b30e560d20e225abbe2aea071)


2015-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [fc1a2eb] :

	ChangeLog: update to 1.11.5


=========================== Release 1.11.5 ==============================

2015-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [075b84e] :

	Update packaging to 1.11.5


2015-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [156fba8] :

	Fix crash on building CANCEL requests.
	Avoid the race condition between building a local cancel and handling a negative reply (for the same branch, in different processes). The build_local mya use the temporary uac->reply and end up with a dnagling pointer. Anyhow, in CANCEL situation, you never have a stored reply in transaction (storing is done only during parallel forking for nagative branches - which are not to be cancelled anyhow).


2015-05-06  Liviu Chircu  <liviu at opensips dot org>
	* [8a42143] :

	async TCP: fix memory leak
	Also free the array of chunk pointers when freeing up TCP conns


2015-05-06  Liviu Chircu  <liviu at opensips dot org>
	* [a704d79] :

	DBG_QM_MALLOC: do not abort() on NULL pointer free/realloc
	(cherry picked from commit c26b5a55c22a7533fd52bfe9db3a3418ca09ec70)


2015-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [c9b94ae] :

	sipmsgops: fix possible crash with debug=4
	Introduced in commit 445d90bc7
	Reported by Hieu Ta
	(cherry picked from commit 2e9b36c0031e619899aa2544c7e23caff5b49b80)


2015-05-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0ad5c10] :

	Fix order of rows during query; respect file order
	When buidling the response to a select query, respect the order of rows as given by the file; before the selected rows were given in the reverted order.
	Reported by @jockmckechnie on github.
	Closes bug #479 .
	(cherry picked from commit 54f6c22303f0d258c9e5f24520bba342aeb11ac3)


2015-05-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [ae6372f] :

	Fixed json results for negative integers
	(cherry picked from commit 3bf8b49ec8ee3d29409c75e54581141792ee54e9)


2015-05-04  Liviu Chircu  <liviu at opensips dot org>
	* [dcd8fc4] :

	rest_client: caseless matching when searching for Content-Type
	Also properly handle missing "Content-Type"
	(cherry picked from commit 4d651f4a868e26fb93674950e6f4654a329d3beb)

	Conflicts:
		modules/rest_client/rest_methods.c


2015-05-01  Jarrod Baumann  <j at rrod dot org>
	* [f9281e4] :

	Updated log macro used for reporting event_rabbitmq heartbeat modparam
	(cherry picked from commit 25fc10c1379358de6a25e7ee664d9fd911f7ab0b)


2015-04-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cb547b3] :

	Fix name of variable in passwd test
	(cherry picked from commit 4588f843c7ba81e7b679df9abeadc38f1c08c174)


2015-04-25  satishdotpatel  <satish.lx at gmail dot com>
	* [49aca29] :

	Fix reading password from prompt for PGSQ
	root@dopensips:/etc/opensips# opensipsdbctl create
	INFO: creating database opensips ...
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "version_t_name_idx" for table "version"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "acc_id_seq" for serial column "acc.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "acc_pkey" for table "acc"
	NOTICE:  CREATE TABLE will create implicit sequence "missed_calls_id_seq" for serial column "missed_calls.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "missed_calls_pkey" for table "missed_calls"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "domain_id_seq" for serial column "domain.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "domain_pkey" for table "domain"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "domain_domain_idx" for table "domain"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "grp_id_seq" for serial column "grp.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "grp_pkey" for table "grp"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "grp_account_group_idx" for table "grp"
	NOTICE:  CREATE TABLE will create implicit sequence "re_grp_id_seq" for serial column "re_grp.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "re_grp_pkey" for table "re_grp"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "address_id_seq" for serial column "address.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "address_pkey" for table "address"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "aliases_id_seq" for serial column "aliases.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "aliases_pkey" for table "aliases"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "aliases_alias_idx" for table "aliases"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "location_id_seq" for serial column "location.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "location_pkey" for table "location"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "location_account_contact_idx" for table "location"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "silo_id_seq" for serial column "silo.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "silo_pkey" for table "silo"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dbaliases_id_seq" for serial column "dbaliases.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dbaliases_pkey" for table "dbaliases"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dbaliases_alias_idx" for table "dbaliases"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "uri_id_seq" for serial column "uri.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "uri_pkey" for table "uri"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "uri_account_idx" for table "uri"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "rtpproxy_sockets_id_seq" for serial column "rtpproxy_sockets.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "rtpproxy_sockets_pkey" for table "rtpproxy_sockets"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "speed_dial_id_seq" for serial column "speed_dial.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "speed_dial_pkey" for table "speed_dial"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "speed_dial_speed_dial_idx" for table "speed_dial"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "usr_preferences_id_seq" for serial column "usr_preferences.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "usr_preferences_pkey" for table "usr_preferences"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "subscriber_id_seq" for serial column "subscriber.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "subscriber_pkey" for table "subscriber"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "subscriber_account_idx" for table "subscriber"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "pdt_id_seq" for serial column "pdt.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "pdt_pkey" for table "pdt"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "pdt_sdomain_prefix_idx" for table "pdt"
	Password for user postgres:
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dialog_pkey" for table "dialog"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dispatcher_id_seq" for serial column "dispatcher.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dispatcher_pkey" for table "dispatcher"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dialplan_id_seq" for serial column "dialplan.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dialplan_pkey" for table "dialplan"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "dr_gateways_id_seq" for serial column "dr_gateways.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_gateways_pkey" for table "dr_gateways"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dr_gateways_dr_gw_idx" for table "dr_gateways"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_rules_ruleid_seq" for serial column "dr_rules.ruleid"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_rules_pkey" for table "dr_rules"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_carriers_id_seq" for serial column "dr_carriers.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_carriers_pkey" for table "dr_carriers"
	NOTICE:  CREATE TABLE / UNIQUE will create implicit index "dr_carriers_dr_carrier_idx" for table "dr_carriers"
	NOTICE:  CREATE TABLE will create implicit sequence "dr_groups_id_seq" for serial column "dr_groups.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "dr_groups_pkey" for table "dr_groups"
	Password for user postgres:
	NOTICE:  CREATE TABLE will create implicit sequence "load_balancer_id_seq" for serial column "load_balancer.id"
	NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "load_balancer_pkey" for table "load_balancer"
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	Password for user postgres:
	(cherry picked from commit e0ab1ce8e538fd81356c2cd5feb96658d7517430)


2015-04-24  Jarrod Baumann  <jarrod at unixc dot org>
	* [fa37b3d] :

	Populate the rcode pval in rest get/post methods before returning error


2015-04-22  Liviu Chircu  <liviu at opensips dot org>
	* [a6ece8d] :

	F_MALLOC: suppress warnings for free(NULL)
	(cherry picked from commit 17d639b9f11b415d51062005aadb86dd6c2375e2)


2015-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [deb4485] :

	rtpproxy: store the notification buffer in the main stack frame
	Thanks go to Hamid Elaosta for reporting and helping me debug this bug
	(cherry picked from commit cb9f46ba80ccb4da9f362e4c686be6e497d0ee9e)


2015-04-21  Razvan Crainea  <razvan at opensips dot org>
	* [d69297b] :

	rtpproxy: properly parse rtpproxy timeout notifications
	(cherry picked from commit c26a4a34fcf790741918224ce9557eb4d1f51edf)


2015-04-21  Vlad Paiu  <vladpaiu at opensips dot org>
	* [7e030b8] :

	Fixed json lib dependency
	(cherry picked from commit 138813faf7a72f6580ebb5f7c0959c86634ccf88)


2015-04-20  Liviu Chircu  <liviu at opensips dot org>
	* [eed27b1] :

	db_mysql: properly set TCP-related timeouts
	According to official documentation,  mysql_options() must be used _after_
	mysql_init()
	(cherry picked from commit 1f154c01fc3d064f1cf4f9c333775d857afb6528)


2015-04-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [eaccd49] :

	Do not leak the dialog in case there's an error on creation, after linking
	(cherry picked from commit 57f331fee808f1a039c02d477ebf0048e32ad08c)


2015-04-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [0f34ecf] :

	Merge pull request #442 from rgagnon24/redirect_fix
	Fix get_redirects(max, reason)
	(cherry picked from commit ead10331a2f5b024f885f1f69e160c78c9d8eb7b)


2015-04-16  Liviu Chircu  <liviu at opensips dot org>
	* [0d5edcd] :

	sipmsgops: fix buffer management issue
	is_present_hf() and remove_hf() would sometimes misbehave
	when used with pseudo-variables (commit 6e88f653702).

	Reported by Eric Werkhoven

	Also fix a couple of noisy log messages.


2015-04-16  Razvan Crainea  <razvan at opensips dot org>
	* [750c37f] :

	do not add Makefile.conf to the tarball
	Since every tarball install is independent, Makefile.conf should not be
	inherited
	(cherry picked from commit 0a3803244c1ccfa8598c8d82c15e11b8d89bb015)


2015-04-16  Razvan Crainea  <razvan at opensips dot org>
	* [78fb580] :

	rr: do not force send socket on preloaded routes
	(cherry picked from commit b8c0740a63f80577bff8314b4cf0e17867a1fda4)


2015-04-16  Razvan Crainea  <razvan at opensips dot org>
	* [4bf7283] :

	rr: no need to search the outbound interface
	for single route messages, the outbound interfaces is the same with the
	inbound one, so there is no need to search for an outbound socket
	(cherry picked from commit b6d4230fa35c186e2aa5833f3ad41cd42ce908c1)


2015-04-15  Liviu Chircu  <liviu at opensips dot org>
	* [65de408] :

	hp_malloc.h: properly include sys/time.h
	Prevents compilation issues with some modules

	Credits to Hamid Elaosta for reporting
	(cherry picked from commit 00cdfc6bd5943c8b31de2960ec70e95137ee465a)


2015-04-15  Razvan Crainea  <razvan at opensips dot org>
	* [535f68b] :

	replace libmysqlclient*-dev with metapackage libmysqlclient-dev
	Credits go to Leo for reporting this
	(cherry picked from commit e5b793e2411826a23138298721879f6749f597ac)


2015-04-14  Răzvan Crainea  <razvan at opensips dot org>
	* [4e9aeee] :

	Merge pull request #462 from jarrodb/dlg_hash
	Verify the dialog mi parameter is not null before passing to dlg_hash
	(cherry picked from commit 432c9cc5dcbfadf69c1b9b1fee44a0fcad8cb8f6)


2015-04-07  Liviu Chircu  <liviu at opensips dot org>
	* [429a38e] :

	mem/mem.h: fix header includes
	(cherry picked from commit d49e0d3ba2320c55070ce87a9b283dbcbcbdadb0)


2015-04-07  Liviu Chircu  <liviu at opensips dot org>
	* [dd0b946] :

	mem/mem.h: fix header includes
	(cherry picked from commit fbc796ec99f82b2a10a3a411d0dfdf3979a80629)


2015-04-02  Razvan Crainea  <razvan at opensips dot org>
	* [1534035] :

	Update ChangeLog


=========================== Release 1.11.4 ==============================

2015-04-02  Vlad Paiu  <vladpaiu at opensips dot org>
	* [6227550] :

	Maintain rport and received in VIA header of replies when doing topology hiding


2015-04-02  Razvan Crainea  <razvan at opensips dot org>
	* [dc9922f] :

	Increase versioning to 1.11.4


2015-04-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cf3defd] :

	Fix changing proto via force_send_socket().
	If the RURI does not request any protocol, use the proto of the forced socket (if any).
	Related to #420
	(cherry picked from commit ac8c2e6845ecea7d01d267b61720d332ee571e1d)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [7ea511e] :

	flag fixups: fix a sign conversion bug
	Reported by @hydrosine
	Fixes #448
	(cherry picked from commit bc160a7bab3fb2d0eb979bfedac8f67db05d42b2)


2015-04-01  Vlad Paiu  <vladpaiu at opensips dot org>
	* [3cb1f25] :

	Changed write and connect timeouts ( sync and async ) to milliseconds Changed default values of sync connect and write timeouts to 100ms


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [3a0be7b] :

	opensipsctl: Improve error reporting
	- test READ permission for fifo dir
	- test existence of fifo
	- test WRITE permission for fifo
	(cherry picked from commit d205f017c8b0475837f5cd4096e026ab6f773d6c)


2015-04-01  Vlad Paiu  <vladpaiu at opensips dot org>
	* [7d2c0a3] :

	Accept TCP aliases by default Do not rely on the previous hop signaling alias via param
	(cherry picked from commit faa32f73c4d0425a944fb6ea184476fd5c6bc7ce)

	Conflicts:
		receive.c


2015-04-01  Razvan Crainea  <razvan at opensips dot org>
	* [552a5b6] :

	add LM_BUG alias to report_programming_bug
	(cherry picked from commit 9620397683c859cd313781e8864ceb5ed9b5c3d8)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [a567268] :

	F_MALLOC: add extra safety checks at runtime
	The F_MALLOC allocator now properly reports any free() or realloc() operations
	which are performed on bogus memory regions, making OpenSIPS immediately abort.

	These checks may be skipped by defining F_MALLOC_OPTIMIZATIONS at compile time.
	(cherry picked from commit 35935051fab41b9a86f622e5fcdb852cf49ae742)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [100bfb9] :

	db_mysql: properly NULL the result pointer if a query fails
	This prevents issues with non-initialized pointers (issue #406)
	(cherry picked from commit a268b1d874c79a88309c53ea28ab8e77cfde3c61)


2015-04-01  Razvan Crainea  <razvan at opensips dot org>
	* [a8f79db] :

	opensipsctl: properly enclose strings when checking their values
	(cherry picked from commit 711fa8c6cf80d4806ecf6befc7ea7f4d897b32ad)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [f1b9466] :

	opensipsctl: Fix TLS certificate generation in dev mode
	    * you can now run scripts/opensipsctl tls ...
	    * no need to specify ETCDIR
	    * do not throw error when giving no command
	    * add template for explicit ETCDIR in opensipsctlrc

	Fixes #369
	(cherry picked from commit 7fefe50be5696dc740405a67edf868fd3546744a)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [9f316e2] :

	opensipsdbctl: allow running from root dir for _all_ SQL backends
	(cherry picked from commit 49ed85a252d2b1f6b36eff56709bf73fcbca6d38)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [cff0023] :

	cfg.y: do not start OpenSIPS when using HP_MALLOC cfg params
	Also fix a linking error on other allocators (commit 607fdddf)
	Reported by SamyGo
	(cherry picked from commit 9b626bf2c2c7cadeb6614c2a45767e5a9783a9d8)

	Conflicts:
		mem/common.h


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [91d155c] :

	HP_MALLOC: fix hp_status()
	    * Proper display of free fragment buckets on sig USR1/TERM/shutdown
	    * some code refactoring
	(cherry picked from commit 607fdddff47305d2898b8c368b3880796a803d20)


2015-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [85ffd49] :

	dispatcher: fix merging bug
	Commit 4cb026c83 actually made Round-Robin dispatching behave
	incorrectly should one or more destinations be down


2015-03-31  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4cb026c] :

	Fix balancing on failover.
	First, the way the calls were re-distributed if the calculated destination is inactive was completely unbalanced and did not respect the hashing concepts (same hash hits the same destination). Along with this problem, the fix covers the re-balancing problem - if a destination becomes inactive, the balancing over the remaining destination should not be affected (if hash H1 hits destination D1, after D2 goes inactive, H1 must still hit D1).
	The use_default concept was reworked to properly work with all algorithms and in all cases (with or without weights).

	Closes #387.
	(cherry picked from commit 444b6802980edd4931106b4db1d8c99dd479bb32)

	Conflicts:
		modules/dispatcher/dispatch.c
		modules/dispatcher/dispatch.h
		modules/dispatcher/dispatcher.c


2015-03-31  Ovidiu Sas  <osas at voipembedded dot com>
	* [97f0350] :

	parser: fix memory leak  - add Supported header to the list of headers that performs memory allocation
	(cherry picked from commit b52b2b9239bd59e7515fa35c29e5d6d8c3f6dc2c)


2015-03-24  Liviu Chircu  <liviu at opensips dot org>
	* [cbaf569] :

	TCP child startup: do not generate corefile on failure


2015-03-23  Răzvan Crainea  <razvan at opensips dot org>
	* [a3c8f17] :

	python: add documentation
	(cherry picked from commit 1dd83cfa6a99ce10876f2391d4baf5a7a986b11e)


2015-03-23  Razvan Crainea  <razvan at opensips dot org>
	* [37d8266] :

	python: properly parse the script name
	(cherry picked from commit 593f26913228678d02ee5c5d6a749ed5a52fc846)


2015-03-23  Vlad Paiu  <vladpaiu at opensips dot org>
	* [71e6ddd] :

	opensipsdbctl : Fixed creating Postgres database
	(cherry picked from commit 3eb5f2bf9eb13451f621ced244c7d65ee40ae18c)

	Conflicts:
		scripts/opensipsdbctl.base


2015-03-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [088c819] :

	Fix PKG mem leak


2015-03-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [8e2cad2] :

	Fix route_to_carrier and route_to_gw
	Duplicate the RURI before pushing GWs for usage ( first gw will overwrite the actual URI )


2015-03-12  Vlad Paiu  <vladpaiu at opensips dot org>
	* [6f41bc7] :

	Have osipsconfig generate config files with proper mpath set Fixes issue #418
	(cherry picked from commit ca12c6777e7aa38ada6e3df36676b724be7c85df)


2015-03-05  Liviu Chircu  <liviu at opensips dot org>
	* [960076c] :

	bin interface processing: add check for min length
	(cherry picked from commit 4efeba5bafe482215ac8c42b8af92d4107bb94cc)

	Conflicts:
		bin_interface.c


2015-03-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [96aca84] :

	Put back code accidentaly removed in prev commit.


2015-03-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5daef76] :

	Remove NO_ZERO_CHECKS as it is bogus wuth bin content.
	Reported by @jamesabravo on GH, closing #419


2015-03-03  Liviu Chircu  <liviu at opensips dot org>
	* [78e2652] :

	Fix infinite recursion when nesting $param variables
	Keep an array with the route parameters of each nesting level. This
	makes it possible to access the parameters of previous route()
	statements even if they contain $param variables.

	Closes #412
	(cherry picked from commit f3ed4db9903d85cba7d7d491c931b550e29932d1)


2015-03-03  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f52bc69] :

	Fix param.valueat at param.name - params are stored in the same order
	(cherry picked from commit 1f517c315c6cffe28e6c6743e6b292835af35219)


2015-03-03  Liviu Chircu  <liviu at opensips dot org>
	* [8d978ac] :

	avpops: Proper validation for DB_CAP_RAW_QUERY capability
	Prevent OpenSIPS from starting if avp_db_query() is used and the concerned
	DB engine does not support raw SQL queries. This prevents runtime
	crashes in some rare cases (e.g. issues with db_http module, which might
	not have full support)

	Fixes #405


2015-02-26  Liviu Chircu  <liviu at opensips dot org>
	* [f88f68f] :

	opensipsctl: fix compatibility issues with FreeBSD [part 2]
	Yet another /bin/sh compatibility issue. Completes commit a2494eba
	(cherry picked from commit 7e966f6fe06990103307e0d410bee54aea268338)


2015-02-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1fa6a23] :

	Fix parser error - URI in Contact hdr is mandatory


2015-02-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3eb6f5e] :

	Fix SCTP proto dection in TM module.
	Credits go to @jamesabravo on GITHUB
	Closes #413 .
	(cherry picked from commit 5c3b2a63dbc47398b12bfa72eea8d00b6eacfa8c)


2015-02-20  Liviu Chircu  <liviu at opensips dot org>
	* [9b8b130] :

	sngtc: properly count all SIP listeners (also include TCP and SCTP)
	Also improved documentation on fetching and compiling libsngtc_node


2015-02-19  Ovidiu Sas  <osas at voipembedded dot com>
	* [7297efa] :

	httpd: fix memory leak for non-POST requests
	(cherry picked from commit f3f7f4222f0e8e7b245bb4b2ee41ced20d28cb9b)


2015-02-18  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [611b49a] :

	Merge pull request #414 from jbonicioli/master
	modified source and target table for registrant table migration
	(cherry picked from commit 60e03a1a77e4357bd6a2d78976781e71bf4efc4a)


2015-02-18  Razvan Crainea  <razvan at opensips dot org>
	* [c8226d6] :

	rabbitmq: set the connected flag only after socket is created
	Credits go to Ovidiu Sas for detecting, debugging and solving this issue
	(cherry picked from commit 465c4be1383fa9073164d10052386e580bbc333b)


2015-02-12  Vlad Paiu  <vladpaiu at opensips dot org>
	* [5befeb3] :

	Fix dialog race condition on BIN replication
	The writing of dialog profiles needs to be done under the dialog lock ( in case there's a race condition with the BYE freeing the profile linkers )
	(cherry picked from commit 85d4820eb04c922731156156329dae37e26ec804)


2015-02-10  Vlad Paiu  <vladpaiu at opensips dot org>
	* [8302fc8] :

	Added support for DATE fields in mongodb raw queries - date fields will be returned as UNIX timestamp


2015-02-09  ionutrazvanionita  <ionutionita at opensips dot org>
	* [3b3b4e5] :

	Sip-wisely Content-Type parsing


2015-02-05  Vlad Paiu  <vladpaiu at opensips dot org>
	* [b8054f6] :

	Since the dialog timeout is not done under dialog lock, we might have cases where the state is checked and is established, but until we get to update the timer, the dialog transitions to terminated & removes it from the timer. Use marker that's set under d_timer lock in order to avoid this
	(cherry picked from commit 721e4af58cf5f8348c96a61e7a588056bd918730)


2015-02-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [6e5d02d] :

	Merge branch '1.11' of https://github.com/OpenSIPS/opensips into 1.11


2015-02-04  ionutrazvanionita  <ionutionita at opensips dot org>
	* [14c1a27] :

	avoid memory leak by not making all the table list null when removing only one table


2015-02-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [a20e7a9] :

	Merge pull request #407 from ar45/fix_406
	fixes #406 (a free_result on dangling res in case of error)


2015-02-03  Aron Podrigal  <aronp at guaranteedplus dot com>
	* [b71f6de] :

	fixes #406
	Fix segfault caused by referencing uninitialized pointer
	in dispatcher module.


2015-01-30  ionutrazvanionita  <ionutionita at opensips dot org>
	* [df3dd59] :

	Made null table parameter after being freed to avoid double free ( individual free from each module and group free from db_text in destroy function of each module)


2015-01-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [3fd323e] :

	mi_http: fix escaping
	(cherry picked from commit 4f070e269d3de4c3ba1ae763a371a03e17ab1ae8)


2015-01-22  ionutrazvanionita  <ionutionita at opensips dot org>
	* [b13a3e0] :

	fixed load_credentials avp default name when no name is specified
	(cherry picked from commit b69ae3258faff194c28a6277d52fa318c24ed37a)


2015-01-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ebadc34] :

	Fix updating contact records in DB.
	If Contact-only matching mode is used, the callid is not part of the key in DB query, but part of the updated values (as callid may change).
	Closes #402.
	(cherry picked from commit 2fdeba6fa8ee56d256e465f63317785798f7826d)


2015-01-14  Razvan Crainea  <razvan at opensips dot org>
	* [17c5990] :

	fix the vars db type to BLOB
	Indicate the DB engine that the dlg vars column is a BLOB
	Thanks go to John Nash for reporting this.
	Close #398
	(cherry picked from commit bb7f121202bb4215a388dcff75e0abcea8ec23ed)

	Conflicts:
		modules/dialog/dlg_db_handler.c


2015-01-06  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [eb9bad1] :

	Merge pull request #264 from etamme/mediaproxy-rfc5245fix
	fix for RFC5245 15.1 compliant candidate injection
	(cherry picked from commit 06309a165cc771a44165cc24836de5f9b21ca0b9)


2014-12-30  Damien Sandras  <dsandras at beip dot be>
	* [d59d6e2] :

	Fixed presentity naming.
	'Calling' is disturbing especially when the given peer is _receiving_ a
	call.


2014-12-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0e9a04c] :

	Fix siptrace control over CANCEL request.


2014-12-16  Razvan Crainea  <razvan at opensips dot org>
	* [5416b41] :

	rtpproxy: properly handle ipv6 IPs
	Close #394
	(cherry picked from commit 71eb827831a10b6b78d409628aa1692b4d4edef2)


2014-12-15  Razvan Crainea  <razvan at opensips dot org>
	* [3729bad] :

	ds_is_in_list: properly pass -1 for all sets
	Closes #389


2014-12-15  Razvan Crainea  <razvan at opensips dot org>
	* [6a70848] :

	tm: check if the reply transaction is defined
	closes #388
	(cherry picked from commit 6150e8971c7c269a6a36e973ef2ee5435a7b0fb6)


2014-12-10  Razvan Crainea  <razvan at opensips dot org>
	* [95800fa] :

	dialog: prevent the same reply from changing the same state twice
	(cherry picked from commit 1290571f73571b00decce354796b1ff982d9fad0)


2014-12-10  Liviu Chircu  <liviu at opensips dot org>
	* [a64765c] :

	dispatcher: fix several issues with empty destination sets
	Upon (re)load, a dispatching set may be empty if none of its destinations
	can be resolved. This patch fixes a couple of crashes which are directly
	related to empty destination sets:

	    * fix a bug in reindex_dests() where a single bogus destination
	      would be allocated for each empty set
	    * prevent ds_select_dst() from routing to empty sets
	(cherry picked from commit 127b456a874499b6295008425144ca29b5e69d75)


2014-11-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [44afe25] :

	Readme regenerated


2014-11-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f4d8ded] :

	Docs updated: added t_new request and t_add_hdrs


2014-11-28  Razvan Crainea  <razvan at opensips dot org>
	* [06c8872] :

	mi_xmlrpc_ng: add \n after each node
	(cherry picked from commit fb1fc7a96e8aed5b6c7818c3f63bfaa2dcd4fda0)


2014-11-27  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [4642e32] :

	Revert "Changes to stop keepalives on unregisters"
	This reverts commit 36ad430f0bf50bb20fcdfd1180c9262348e41f79.


2014-11-27  Razvan Crainea  <razvan at opensips dot org>
	* [2f74b58] :

	permissions: raise the proper error when the IP is not provided
	(cherry picked from commit a4f849d3e6553182205fabd1dfbdf5c21005e188)


2014-11-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d4e8188] :

	Fixes realated to previous commit (double siptrace)


2014-11-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [24ba3ed] :

	Fix double tracing in trace_dialog().
	If user AVPs are set and the trace flas is not, the code was forcing the tracing flag which was producing a duplicate of the trace. Now, the flags status (on/off) is also stored in the dialog (as var) and restore later, for each sequential request.


2014-11-19  Liviu Chircu  <liviu at opensips dot org>
	* [41408f0] :

	Makefile: fix concurrency issue leading to linking errors
	main.c needs to be recompiled if the version name changes. When doing
	multi-threaded compiling (make -j), main.o would sometimes be deleted
	right after it was compiled, triggering a linking error of the "opensips" binary.

	The patch also prevents main.c to be recompiled each time if the ".git" dir
	is not present. (i.e. compiling a tarball archive). Credits to Răzvan
	Crainea.

	Thanks to Bobby Hakimi for offering a replication environment.
	Closes #373
	(cherry picked from commit a441867b2b81662136a9fb55c5ad2701c756c2f5)


2014-11-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [42f6d89] :

	More fixing on mk_action usage (function name was added).


2014-11-05  Vlad Paiu  <vladpaiu at opensips dot org>
	* [e515134] :

	Only update the dialog timeout in case we are in established state - otherwise it might lead to multiple unrefs related to multiple removal from timer list


2014-11-05  David Sanders  <dsanders11 at ucsbalum dot com>
	* [36ad430] :

	Changes to stop keepalives on unregisters
	Observed cases where keepalives from `nat_traversal` continued after unregister were traced back to a few lines of code which prevented stopping keepalives on unregister events.
	(cherry picked from commit f4ed457bc10d6ddfcd6dc77dcc9e460e767bdc4b)


2014-11-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [de90f8b] :

	Fix mk_action usage (function name was added).
	Reported by Nick Altmann


2014-11-04  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [96483c0] :

	Merge pull request #372 from dsanders11/1.11
	Backporting filename in runtime error messages to 1.11


2014-11-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7058396] :

	Disable MI commands when presence is in lib mode.
	Reported by Carlos Oliva @telematico, closing #382


2014-10-28  Razvan Crainea  <razvan at opensips dot org>
	* [7e5bbcf] :

	exec: properly handle exec replies
	when using exec on replies, populate the reply code and reason instead of
	R-URI variables


2014-10-24  David Sanders  <dsanders11 at ucsbalum dot com>
	* [b5459c2] :

	Backporting filename in runtime error messages to 1.11


2014-10-24  Răzvan Crainea  <razvan at opensips dot org>
	* [8487e3c] :

	Merge pull request #371 from lovelle/patch-2
	fix load_balancer doc in lb_count_call() function
	(cherry picked from commit 80778fa16334a0cdc2df92ad63f7d1f0a12d1aff)


2014-10-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [634273d] :

	Fix silo table definition - body field can be null.


2014-10-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9e03346] :

	Fix restoring route type and AVP list when droping branch.
	Closes #365.


2014-10-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1d2a8c4] :

	Added support for external body in MSILO.
	Able to deal with MESSAGEs with no body but with conten-type refering to an external body.
	(cherry picked from commit 2e4b2d5ef57b533b3fe40662c8e92b5e0b02b18a)


2014-10-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2759890] :

	Fix bogus unsigned to signed int conversion.
	This leads to failures of computing VIA branches when hash label is higer than 2^31


2014-10-17  Liviu Chircu  <liviu at opensips dot org>
	* [290a771] :

	opensipsctl: fix compatibility issues with FreeBSD
		* FreeBSD's mkfifo only accepts "-m", not "--mode"
		* Improve compatibility of stderr redirect (change "&>" to ">&")

	Reported by buchtajz.
	Closes #364
	(cherry picked from commit a479b72cb52a4bc155491fe26f254ed4ad7730f8)


2014-10-16  Nick Altmann  <nick.altmann at gmail dot com>
	* [d50bd78] :

	RPM spec: support for el7

=========================== Release 1.11.3 ==============================

2014-10-15  Razvan Crainea  <razvan at opensips dot org>
	* [175de6c] :

	increase version to 1.11.3


2014-10-15  Liviu Chircu  <liviu at opensips dot org>
	* [e0c1fea] :

	db_unixodbc: fix query result handling and improve performance
	Until now, query rows were incrementally stored in a list with
	separately allocated length and string buffers, along with a great deal
	of useless pointer dereferencing, effectively wasting CPU cycles and pkg
	mem usage.

	This patch eliminates the linked list logic with a global buffer of
	pointers (doubling in size when required) meant to hold each result column.
	Each column is transparently freed by the DB backend. This completes
	commit d63ee19a8.
	(cherry picked from commit 683dfaa63df0af317f7485042539bdacf8646eab)


2014-10-15  Razvan Crainea  <razvan at opensips dot org>
	* [fb13b39] :

	fix rr force_send_socket when using mhomed
	(cherry picked from commit 56ca96a8d25724d74fc6cd31a1125933dfc62f1c)


2014-10-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5b02a7e] :

	Compatibility fix for add_body() with new body.
	When computing the new content-len, accept the case when there is no pre-existing body and a newly added body.
	Reported by Antonis Psaras via LinkedIn
	(cherry picked from commit 8054dbfb4d0c5c621d35db6bc886da41d3a05294)


2014-10-09  Vlad Paiu  <vladpaiu at opensips dot org>
	* [6045055] :

	Do profile freeing under lock - avoid double free issues
	(cherry picked from commit b7928cf62e4f13f4709114a972018016e58d91e9)


2014-10-09  Razvan Crainea  <razvan at opensips dot org>
	* [7db6d99] :

	fix redis FQDN URL when using a single node cluster
	(cherry picked from commit 5ee8ec52179aefba17d6435f9c516c23d1ebef67)


2014-10-09  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c7066fe] :

	Fix validation of the send_sock in t_uac().
	If a send_sock is already provided, no need to do socket discovery again. We need just the protocol (from mk_proxy) in order to validate (or not) the already given send_sock. Do socket discovery only if there no send_sock given or the protocol does not match.
	(cherry picked from commit c95ddd8f282c8809a0fae233bdb57b4dddb3c628)


2014-10-08  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [67e7e41] :

	Merge pull request #355 from wdoekes/wjd-dialog-modparam-columns-1.11
	dialog: Fix dialog_admin documentation regarding column names.


2014-10-08  Walter Doekes  <walter+github at wjd dot nu>
	* [8112b5a] :

	dialog: Fix dialog_admin documentation regarding column names.
	(backport from b519d6997e6faa654ff4a513843359008f8cb66e)


2014-10-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [95425d4] :

	Fix default timeout for CPL PROXY node.
	(cherry picked from commit 1972d39f1aed8920c8024ba30f3c74e259b31c00)


2014-10-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cc00286] :

	Fix escaping of XML chars in the MI output.
	Credits go to Razvan.
	(cherry picked from commit ae84ff06bcb886f6b169f0fa13fd928f9cb11c4e)


2014-10-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5edb2a9] :

	Fix setting proxy timeout from CPL script.
	Reported by sekil on IRC.
	(cherry picked from commit f647e34f98651a30f86f2f2dc774fa067bcce8ca)


2014-10-08  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b39a42b] :

	Remove useless ops with the AVP list.
	(cherry picked from commit 8762c5e2e72e601337b9b2ddb9aaf32a44ddfc8c)


2014-10-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bef1f93] :

	Fix how the contact URI is build.
	Do not add transport info to URI when storing it, but rather when using it - avoid double "transport" param.


2014-10-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3bad6dd] :

	Fix parsing of the SIP URI in db_get_auth_id() .
	Closes #340.
	(cherry picked from commit 465a978b812a1eae6a219e26f9a55d1d985a176b)


2014-10-06  Razvan Crainea  <razvan at opensips dot org>
	* [a47d814] :

	fix aliases db schema
	(cherry picked from commit 1572ed099c30ac4f8a21c150b25e0252404e6937)

	Conflicts:
		scripts/pi_http/pi_framework.xml


2014-10-03  Vlad Paiu  <vladpaiu at opensips dot org>
	* [914f140] :

	Fixed arrays processing ( arrays can be part of arrays or object ) Fixed processing of sub-objects
	(cherry picked from commit aec12602da85078374135b31a69281d914b5776e)


2014-10-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [f4f6028] :

	Merge pull request #346 from dsanders11/patch-1
	Always update the call ID when updating a contact in usrloc table
	(cherry picked from commit e13ab398d8b14bffa2acb6145b253aec030fdaab)


2014-10-01  Liviu Chircu  <liviu at opensips dot org>
	* [100ecaf] :

	exec: disable 'setvars' on all OpenSIPS versions
	We break backwards-compatibility while improving security
	on the larger proportion of existing OpenSIPS installations.


2014-10-01  Liviu Chircu  <liviu at opensips dot org>
	* [2456295] :

	exec: reduce impact of the Shellshock bash exploit
	Improve documentation awareness for Shellshock


2014-10-01  Liviu Chircu  <liviu at opensips dot org>
	* [b0deb69] :

	cachedb_sql: properly fix git conflict (from f7d30b6e)


2014-10-01  Liviu Chircu  <liviu at opensips dot org>
	* [f7d30b6] :

	cachedb_sql: fix pkg memory leak
	When fetching a key, the db_res_t structure would not be properly freed.
	(cherry picked from commit e5ccde131eb72debd9aa400ced2e1e31bd61612d)

	Conflicts:

		modules/cachedb_sql/cachedb_sql.c


2014-09-17  Liviu Chircu  <liviu at opensips dot org>
	* [611e85f] :

	cachedb_memcached: extend the host+port printing buffer
	(cherry picked from commit 32f2c2434e99802e90e6166de18ad7523f19a603)


2014-09-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c529bb1] :

	Removed useless "ping_interval" parameter.
	Closes  #320, reported by @hydrosine .


2014-09-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e484b60] :

	Fix setting transaction timeout from CPL script.
	Using AVPs in obsolete; we need to do it now via the TM API.
	(cherry picked from commit 307c1730bd205b96ba9ea22d51d998956a26d773)


2014-09-11  Razvan Crainea  <razvan at opensips dot org>
	* [c0029e8] :

	redis: fix crash when using FQDN in URL
	(cherry picked from commit 4cf5a169f27a452187a69c0ca1bda993962491df)


2014-09-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [4c08b62] :

	Fixed the dialog timeout that gets replicated via BIN for updates


2014-08-29  Vlad Paiu  <vladpaiu at opensips dot org>
	* [128d377] :

	Fixed CDR writing for replicated dialogs


2014-08-28  Vlad Paiu  <vladpaiu at opensips dot org>
	* [79a97ad] :

	Avoid useless from header parsing in case the dr group was passed from script Backported from trunk


2014-08-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [da96e3a] :

	Fix sending PRACK for multiple provisional replies.
	Reported by Giuseppe Cardone.
	(cherry picked from commit 3cd6db2be3728e14343697b886cdcfabd4353d51)


2014-08-26  Liviu Chircu  <liviu at opensips dot org>
	* [993385e] :

	db_text: fix issues when database file is missing an ending newline
	* do not crash if file contains columns only and is missing the ending newline
	* do not skip the last row of a database file if it lacks an ending newline

	Reported by gergelypeli on GitHub
	Closes issue #308
	(cherry picked from commit a2172b256fd19aa56b352665a9d598d6a91b36a3)


2014-08-25  Vlad Paiu  <vladpaiu at opensips dot org>
	* [6c83e2b] :

	Fixed simplified callid parser
	(cherry picked from commit 3316a2a518a2ac27401408369e4bd3adc70b4e48)


2014-08-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d4d078c] :

	Fix missing "p" state to MI ds_set_state command.
	Closes #312
	Reported by @gergelypeli


2014-08-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d033336] :

	Better generation of random names for reply FIFO.
	Related to issue #257
	(backport from trunk 7078c0f)


2014-08-21  Liviu Chircu  <liviu at opensips dot org>
	* [ea9191b] :

	core: fix mem statistics when DBG_QM_MALLOC is on
	(cherry picked from commit ffb0cb6d2c3a224ce37b575a7f956cfa881bf63b)


2014-08-21  Liviu Chircu  <liviu at opensips dot org>
	* [b790229] :

	dialog: fix primary key when updating dialogs in REALTIME db mode
	When updating rows in the dialog table in REALTIME db mode, the dlg_id
	update key is not properly initialized (actually contains random data).

	Reported by miko95 on GitHub
	Closes issue #306
	(cherry picked from commit 0ad3e4f949e1d669d53cd584e48b7d2eff740a22)


2014-08-19  Liviu Chircu  <liviu at opensips dot org>
	* [f57025f] :

	dialplan: fix shm leak when parsing invalid regex
	Upon (re)load, if the subst or repl columns contain expressions which
	fail to compile, OpenSIPS will leak shared memory.

	Reported by miko95 on GitHub
	Closes issue #307
	(cherry picked from commit 72028d26bef361b6c99f6ad3653f0e1dbb07c767)


2014-08-19  Liviu Chircu  <liviu at opensips dot org>
	* [632d286] :

	dialog: fix possible hash id conflict on restart
	When restarting the proxy, the auto-generated next_id of each
	hash entry is not properly incremented if a loaded dialog happens to
	have this same next_id as hash id. This will soon lead to duplicate hash ids.

	Reported by miko95 on GitHub.
	(cherry picked from commit b7c3686c176e7c15b806e50f9743ab91656a8da3)


2014-08-18  Razvan Crainea  <razvan at opensips dot org>
	* [29e2674] :

	statistics: fixed MI get_statistics command to cope with mi_json


2014-08-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [c9b3973] :

	Do not crash on replicated update if replicated create has failed Free dlg memory in case replicated create fails


2014-08-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [0705a29] :

	Do not replicate dialog termination if dialog creation was not done ( failed calls )


2014-08-18  Vlad Paiu  <vladpaiu at opensips dot org>
	* [819d49e] :

	Fixed deadlock when replicating dialog which has pinging enabled. Remove pinging entirely for replicated dialogs, since it might cause issues when running in active-backup mode Properly set the dialog timeout for update bin requests
	(cherry picked from commit 837032b63b092b45cae64668fd56e6e7cb3d7184)


2014-08-14  Vlad Paiu  <vladpaiu at opensips dot org>
	* [69f1fda] :

	Fix iteration of to be sent MSILO messages Fixes issue #291 Thanks to Nick Altmann for reporting & testing
	(cherry picked from commit 1dd4ea2b16f6a2f9f46a7e947052da2e1e591d04)


2014-08-12  Vlad Paiu  <vladpaiu at opensips dot org>
	* [4fda9a1] :

	Fixed error reporting for dialog DID matching when dealing with BIN interface replication
	(cherry picked from commit 246d3d8ad7f79c76e05ad74721b5e852208f9aa1)


2014-08-12  Razvan Crainea  <razvan at opensips dot org>
	* [870cee9] :

	consider string size in hex2dec transformation
	Reported by gergelypeli on GitHub
	Closes #296
	(cherry picked from commit 9b79b1bca1fc7fcfac751275de045e08728ddd00)


2014-08-07  Liviu Chircu  <liviu at opensips dot org>
	* [ce9afa8] :

	OpenSIPS version: detect and show the HP_MALLOC flag in the output
	(cherry picked from commit 4461bea6543f885b4a719e767f4a5524fa56803a)


2014-08-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [4669637] :

	Don't report an error if no event registered


2014-07-29  Vlad Paiu  <vladpaiu at opensips dot org>
	* [80793b7] :

	Do not crash if script locks were not initialized ( eg - OpenSIPS failed to start )
	(cherry picked from commit b7bd5b5df9dd61d734cb2ec14fb4b8d970df9628)


2014-07-25  Razvan Crainea  <razvan at opensips dot org>
	* [86c54cc] :

	acc: parse db_extra before initializing db
	Fixes commit aa6f64
	(cherry picked from commit 33c9d48b5933aaadfe0231e4c88a746e30bbb7e7)


2014-07-22  Vlad Paiu  <vladpaiu at opensips dot org>
	* [d41eb41] :

	Check for all negative values when fetching cachedb counter
	(cherry picked from commit 17bc5d970d18a01c4e08a512691264ce3a8c4a80)


2014-07-18  Razvan Crainea  <razvan at opensips dot org>
	* [c585517] :

	dialog: run loaded callbacks after dialog mod_init()
	(cherry picked from commit ea5e7f1c7c5f5eef4032a6869fd80a8c7295f948)


2014-07-18  Razvan Crainea  <razvan at opensips dot org>
	* [465437a] :

	sst: fix UAC enum
	(cherry picked from commit 3d16b304b33a000c882edc5f2335bc6f52df89d6)


2014-07-16  Razvan Crainea  <razvan at opensips dot org>
	* [eea540d] :

	acc: trigger the proper event when doing old-style accounting
	(cherry picked from commit 61d8b2c93db5372313c66e5893a6a7fb3b3320dd)


2014-07-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [78a8c5f] :

	Fix bogus README example.
	Reprted by Alexander (@sashker on HitHub)
	Closes #268 .
	(cherry picked from commit 1a8bfb4a438c3c325ca13b833190a63c740723db)


2014-07-13  Liviu Chircu  <liviu at opensips dot org>
	* [125031c] :

	pi_http: fix compiler warning
	(cherry picked from commit 965baa20f0244161fa21d35f9a94526d7edffe02)


2014-07-12  Liviu Chircu  <liviu at opensips dot org>
	* [7536552] :

	acc: fix startup crash with empty db_url
	(cherry picked from commit aa6f6470b47336ffc1fee76bf236bf8717b650b1)


2014-07-11  Liviu Chircu  <liviu at opensips dot org>
	* [b8aee14] :

	sipcapture: fix startup crash with undefined db_url
	(cherry picked from commit b048a17829fefdef844cfef89d5dfff5904ec32e)


2014-07-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bc759b0] :

	Fix broken dlg_val assigment when value is NULL.
	(cherry picked from commit 2c7e33e67c82ce54addf97e558f5f8b8473bab19)


2014-07-07  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ff23ed0] :

	Merge pull request #265 from jalung/patch-2
	Update osipsconsole
	(cherry picked from commit b573ae6733ee4775a8c236bfa1e85f587efe3a74)


2014-07-04  Liviu Chircu  <liviu at opensips dot org>
	* [5708ad4] :

	flags.c: drop empty-string flags
	Also issue a scripting error warning
	(cherry picked from commit 2a547f6929459e3cdaa1e7c8dc3a8980f2ae4ca8)


2014-07-04  Razvan Crainea  <razvan at opensips dot org>
	* [6979979] :

	Makefile: add extra_objs while opensips linking
	(cherry picked from commit 81b19cb5d24430b5e2ea129a2b0d4b07d8a74c98)


2014-07-04  Liviu Chircu  <liviu at opensips dot org>
	* [58d83cb] :

	config files and templates: fix deprecation warnings
	(cherry picked from commit 9b372b4c796740bfe1510fd2af4e1d689857a638)


2014-07-03  Razvan Crainea  <razvan at opensips dot org>
	* [e4fd120] :

	event_route: properly backup the event's name
	Reported and fixed by Ovidiu Sas
	(cherry picked from commit 924531666462cc90fa68b5e12932894ae56575ad)

=========================== Release 1.11.2 ==============================

2014-07-02  Razvan Crainea  <razvan at opensips dot org>
	* [286c72f] :

	increase version to 1.11.2


2014-07-01  Bill Hau  <zytron at gmail dot com>
	* [a25f8b4] :

	ratelimit: Allow FAILURE_ROUTE instead of duplicate LOCAL_ROUTE
	(cherry picked from commit 633b1b8f637a7a099ea89a6803a94e8f3df70e63)


2014-07-01  Vlad Paiu  <vladpaiu at opensips dot org>
	* [add3371] :

	Added detection for the version of libjson used in the system Also, fixed printing of entire json objects
	(cherry picked from commit 6f9c8c383d6026293ddc095dc3abcef488cd266d)


2014-07-01  jalung  <sevpal at msn dot com>
	* [2cb8bc7] :

	Update cachedb_redis_utils.c
	Opensips 1.11 fails to connect to Redis Cluster (beta6) running three masters. This change should be backwards compatible.
	(cherry picked from commit cba857000cb3f0c9108760cde0a4cba2e5d86525)


2014-07-01  Liviu Chircu  <liviu at opensips dot org>
	* [a8d8d3c] :

	script_helper: minor logging improvements
	Do not report errors when ACKs to 487 responses fail to match any on-going dialogues
	Reported by Gary Nyquist
	(cherry picked from commit a1b0495c6b1eacd9643e9ccfd78d376e6b398ec6)


2014-07-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e15757f] :

	Add index on the pua table for peformance reasons.
	Credits go to "lirakin" on IRC
	(cherry picked from commit 59061f158db03c6d00f0d3121e8db1536ec43aba)


2014-07-01  Vlad Paiu  <vladpaiu at opensips dot org>
	* [4586045] :

	Fixed JSON fetching of array string fields
	(cherry picked from commit 843fdde91e55b5a8234f86fdf496bc27aeec7e15)


2014-07-01  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4f73717] :

	Fix fetching cseq number for replies.
	Closes #165.
	(cherry picked from commit acb1b378e59fc2f7608e566347ceebd5f4159210)


2014-07-01  Razvan Crainea  <razvan at opensips dot org>
	* [3724503] :

	change default prefix to /usr/local
	(cherry picked from commit 84cfab282ad4e8edaa517ef72651a5f6021e70f5)


2014-07-01  Norm Brandinger  <n.brandinger at gmail dot com>
	* [535601a] :

	Fix spelling in Makefile messages


2014-06-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c652e9a] :

	README files re-generated (thanks to Walter Doekes)


2014-06-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7472a7b] :

	Fix bogus trailing dot char in SQL syntax.
	(cherry picked from commit b611ee639c94af69b2ef4acea88ffa383861a6dd)


2014-06-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6c15387] :

	Add missing UPDATE method in rules.
	(cherry picked from commit 35f9d98eab84b2ac90aa83f9ba85511058316ab5)


2014-06-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [dbc8653] :

	Fix moving the AVP list from UAS to UAC in B2B.
	Closes issue #230
	Many thanks to Ovidiu Sas for report and debugging.
	(cherry picked from commit c760b69cb4f1b56b91112ab457fef232b5753fbd)


2014-06-23  Vlad Paiu  <vladpaiu at opensips dot org>
	* [e5c6bbf] :

	Fixed empty tree bug
	(cherry picked from commit b36da5ec0ba5cf4a21d23edc8fe0484f586fb286)


2014-06-20  Răzvan Crainea  <razvan at opensips dot org>
	* [f259215] :

	fixed auth README typo
	(cherry picked from commit 7cbe8a7bdf1eb4680bb3dc274d2abdb070d580b1)


2014-06-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e63eedf] :

	Fix typo in the doc examples
	(cherry picked from commit a550b90d6d4eda70a4e26f696eb4a216625813ff)


2014-06-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [817f956] :

	Replace "flags" with "state" in the ds_list output
	(cherry picked from commit 45afa00fb425ec1e36887fa237438f25c06dc07b)


2014-06-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [84fad89] :

	Replace FLAGS with STATE columns in dispatcher
	(cherry picked from commit 3d9bb5ad30dbe3c6a439bc7ec60da10a845e8dce)


2014-06-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [641cfd3] :

	Readme file re-generated


2014-06-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [88105bd] :

	Fix docs - replace "flags_col" with "state_col".
	(cherry picked from commit 3e71b9bc5b90aa0afd7f7f2a3140c24c42cee61a)


2014-06-17  Razvan Crainea  <razvan at opensips dot org>
	* [6a11ad4] :

	dialog: fix $DLG_timeout printing
	(cherry picked from commit dba4810151dd21ade089ac36aacd766db58b9805)


2014-06-11  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [70de442] :

	Removed obsolete file.


2014-06-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [022b1a8] :

	Fixed handling of REJECT return code.
	(cherry picked from commit 8e42553e44be1b054d2f6e9b84b3632e83e4a0bd)


2014-06-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f48c953] :

	Fixed dbschema doc to point to right modules doc.


2014-06-05  Liviu Chircu  <liviu at opensips dot org>
	* [32b5ce8] :

	core statistics: revert to safe allocations
	Commit 42c3d383 is incomplete since some statistics are allocated
	in multi-process environments (e.g. udp/tcp load statistics)

	This patch fixes this issue, while maintaining the logic behind 42c3d383
	(cherry picked from commit b54afe38bb869cca1c061a1db17abc4869d708c2)


2014-06-05  Liviu Chircu  <liviu at opensips dot org>
	* [9e27541] :

	core: Fix uninitialized number of interface listeners
	Closes issue #246, reported by cityant
	(cherry picked from commit 53e48e1b935b4dfbba11fb54ee105d995c4524db)


2014-06-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a2db8d7] :

	Fixed autobridging in combination with TopoHiding.
	Get information about the next hop from the Transaction layer (when Topo Hiding is used), as we have no second VIA present in the SIP replies.
	Based on an original fix from Nick Altmann, related to push request #238.
	(cherry picked from commit 20d1fe67de5c70ff1ff8a56912c515f1b88ae6bb)


2014-05-30  Ovidiu Sas  <osas at voipembedded dot com>
	* [3754c5f] :

	dialplan: dp_translate(): accept "id" param as STR PVAR  - convert it to INT "id" STR PVAR (if possible)
	(cherry picked from commit 2923d4178484af48d1f3f30c9fa1b8b7464c72f9)


2014-05-30  Ovidiu Sas  <osas at voipembedded dot com>
	* [52532d6] :

	dialplan: return "404 No translation" for failed MI dp_translate command
	(cherry picked from commit f517529a86a2d77a9645e341153b76384e56f4fb)


2014-05-30  Ovidiu Sas  <osas at voipembedded dot com>
	* [424882f] :

	uac_registrant: documentation updates
	(cherry picked from commit cca642b54c8fb6f5324bad65e24b39b1ae2ee010)


2014-05-30  Ovidiu Sas  <osas at voipembedded dot com>
	* [e90adea] :

	uac_registrant: print an error if registrar imposed expires to small
	(cherry picked from commit c616b080da6bac0101b69361fec60bf14cd6ae8a)


2014-05-30  Ovidiu Sas  <osas at voipembedded dot com>
	* [4a9a4a9] :

	uac_registrant: add some sanity checks during db record(s) loading
	(cherry picked from commit 0181bec67c925c2682e92b1d4dafdbf4d2b38a09)


2014-05-30  Ovidiu Sas  <osas at voipembedded dot com>
	* [38089b7] :

	uac_registrant: add some sanity checks during module init
	(cherry picked from commit 2998f06e766e8ce8a1427539ecdddf9c851949c5)


2014-05-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ec10686] :

	Fix ds_list MI command output.
	The values added to the MI tree must be either persistent, either duplicated into the tree.
	Closes issue #243, reported by Ovidiu Sas.
	(cherry picked from commit dd788ff8118c0f0251463b81d50ddecea75262e5)


2014-05-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5b9c010] :

	Fix nameaddr.params if last param has no value.
	Closes again #228 .
	(cherry picked from commit dd109699e2d3fecc744e3aeaa74fbf21227f9288)


2014-05-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9500e9b] :

	Fixed missing \n in log messages.
	(cherry picked from commit 07448cb70f13265dc3b1bd1ff12b1996361589a7)


2014-05-29  Razvan Crainea  <razvan at opensips dot org>
	* [6d44577] :

	rtpproxy: restructure rtpproxy_mi show command
	Due to the initial structure, some useful information was stripped by the mi_json module.
	Added the "Set" as root node, followed by a child for each node
	(cherry picked from commit 213e77758351cd5f4c9b65c70fbd08c42a9c146e)


2014-05-28  Razvan Crainea  <razvan at opensips dot org>
	* [1fd5c74] :

	lb: mark resources as array
	(cherry picked from commit 20c17539f1e77ad75463a8a75c4d6f7171da6237)


2014-05-22  Liviu Chircu  <liviu at opensips dot org>
	* [fce034e] :

	drouting: document the "persistent_state" parameter
	(cherry picked from commit 24517fd9a7fa427dd56e23753418b1bfc3cd1791)


2014-05-21  Liviu Chircu  <liviu at opensips dot org>
	* [3a8fdd9] :

	core: improve CPU usage of the TCP_MAIN process
		* iterate through and close connections at most once per second
	(cherry picked from commit 3ac3b042c7b74cc6c84af0a987ac65cde17f8e6b)

	Conflicts:

		tcp_main.c


2014-05-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1d3f8d1] :

	Fixed setting the pinging flags at start.
	Related to issue #233
	(cherry picked from commit d5ff4c9ce34e348866381ba26c0a58da242242cc)


2014-05-21  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [7bac6d8] :

	Merge pull request #232 from wdoekes/wjd-misc_typos
	Fix a few typo's and double spaces in LM_* messages.
	(cherry picked from commit 3452fbfb7c075fe0eca6bae516eb40337d0d5b75)

	Conflicts:
		script_cb.c


2014-05-20  Razvan Crainea  <razvan at opensips dot org>
	* [46327c1] :

	dispatcher: fix possible bogus gateways
	In case the domain name can not be resolved, the destination should
	be droped and the number of destinations within the set should not be
	increased.
	(cherry picked from commit 310dafa013b1f127c9cf60b4f7a5efac639b1aed)

	Conflicts:
		modules/dispatcher/dispatch.c


2014-05-19  Liviu Chircu  <liviu at opensips dot org>
	* [7b21e35] :

	QM_MALLOC: proper fragment debugging patterns for x86_64
	(cherry picked from commit cd201b680102ffcbe554851d1e6f44ace3c72daa)


2014-05-19  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0e1eb40] :

	Fixed output redirect for "which"
	Credits go to @jalung . Closes #231 .
	(cherry picked from commit f89838976d3b11424cb649cd2b6f376579c42d0e)


2014-05-19  Razvan Crainea  <razvan at opensips dot org>
	* [fb8005d] :

	dialog: prevent double free in case of errors
	(cherry picked from commit eef59c1d7b47ecc35438c01e7dcbdfeea903115a)


2014-05-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f6fd848] :

	Reduce log level for script ops. Better err logging
	(cherry picked from commit e9b17579a00cc9bd4bb04e576d6b10b1c434d80c)


2014-05-14  Razvan Crainea  <razvan at opensips dot org>
	* [21bcff6] :

	call_center: remove cc_agent_login() function from doc


2014-05-14  Razvan Crainea  <razvan at opensips dot org>
	* [c814829] :

	call_center: cc_handle_call() accept strings
	(cherry picked from commit b252b472a58172767d4b3c015f9ef5ec3c2a09ca)

	Conflicts:
		modules/call_center/call_center.c


2014-05-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5669370] :

	Clone in shm requests with all headers parsed.
	For the UAC transactions, when adding the fake msg in the UAS side, be sure all the needed headers are parsed and ready for cloning into SHM.

	Reported by Nick Altmann. Also many thanks for the support with the troubleshooting.


2014-05-14  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cf1ae2a] :

	Fix calculating len of params in nameaddr trans.
	If the value of the last parameter is a quoted string, we need to include in the len calculation the closing quote too (quotes are not included in the actual value).

	Closing #228.


2014-05-14  Liviu Chircu  <liviu at opensips dot org>
	* [63e4f63] :

	tls: allow free(NULL) with DBG_QM_MALLOC enabled
	(cherry picked from commit 99b049b1a04e3619e0aedde45a2209972e299d9c)


2014-05-09  Liviu Chircu  <liviu at opensips dot org>
	* [0f26cc5] :

	cachedb core: properly free raw query results
		* freeing more than 1 result leaked pkg mem

	Fixes #226
	(cherry picked from commit 0338917a979a3280273145b2b3a73400bc90a476)


2014-05-09  Liviu Chircu  <liviu at opensips dot org>
	* [7dca7b5] :

	tcp_no_new_conn_bflag: fix incorrect behaviour when using integer flags
		* also fix some redundant pointer ref/dereferencing
	(cherry picked from commit 0be4225b2bb0ac1081d0c3d5bc886569b9510a13)


2014-05-08  Razvan Crainea  <razvan at opensips dot org>
	* [effd4b5] :

	acc: register dialog loaded callbacks after flags init
	This solves the bug when CDRs were not written in DB after restart
	Reported by Mayama Takeshi, who also provided testing environment
	(cherry picked from commit ff839b85d1e7b9122f348d6277d8f93a9bafca9f)


2014-05-08  Razvan Crainea  <razvan at opensips dot org>
	* [fd4d3a7] :

	update ChangeLog for 1.11.1


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [340f2d6] :

	Merge branch 'version-update' into 1.11


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [5b55545] :

	mi_json: complete rework of the module
	consider the modules MI_IS_ARRAY hints to build a simpler JSON document
	fixes cases where duplicate keys generate invalid documents
	(example: ul_show_contacts)
	(cherry picked from commit 459dffba91ebdda454a250fbad2eed2069eac8e2)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [3b02382] :

	fix previous commit to organize dlg_list_ctx as array too
	(cherry picked from commit 7b83d0783fd6e67347c84cdc8eca6d7234021c81)


2014-05-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [27d3240] :

	When loading new dialogs at runtime ( either via dlg_db_sync or via the bin interface ), also run the load callback ( eg. used by the acc module to write proper CDRs )
	(cherry picked from commit afee8fe8aaa3d8bc5bec54868404e6a4ab49fa3d)


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [492f939] :

	Fix the structure of MI tree (output).
	Mark the nodes that contain arrays of subnodes (versus list of differente nodes). This is a must in order to properly structure the MI output via the json backend.
	(cherry picked from commit 34576f52bcd1351cc7e2f2846e3b37b2e4e35503)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [1dbbe8d] :

	update Makefile defines for 1.11.1


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [b0ac0fb] :

	updated packaging for 1.11


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [ccbe2e2] :

	event_rabbitmq: replace exchange with routing_key
	Closes #220
	(cherry picked from commit eb233f894b1364d20e1f3461304d79a077102a3a)


=========================== Release 1.11.1 ==============================

2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [340f2d6] :

	Merge branch 'version-update' into 1.11


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [5b55545] :

	mi_json: complete rework of the module
	consider the modules MI_IS_ARRAY hints to build a simpler JSON document
	fixes cases where duplicate keys generate invalid documents
	(example: ul_show_contacts)
	(cherry picked from commit 459dffba91ebdda454a250fbad2eed2069eac8e2)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [3b02382] :

	fix previous commit to organize dlg_list_ctx as array too
	(cherry picked from commit 7b83d0783fd6e67347c84cdc8eca6d7234021c81)


2014-05-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [27d3240] :

	When loading new dialogs at runtime ( either via dlg_db_sync or via the bin interface ), also run the load callback ( eg. used by the acc module to write proper CDRs )
	(cherry picked from commit afee8fe8aaa3d8bc5bec54868404e6a4ab49fa3d)


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [492f939] :

	Fix the structure of MI tree (output).
	Mark the nodes that contain arrays of subnodes (versus list of differente nodes). This is a must in order to properly structure the MI output via the json backend.
	(cherry picked from commit 34576f52bcd1351cc7e2f2846e3b37b2e4e35503)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [1dbbe8d] :

	update Makefile defines for 1.11.1


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [b0ac0fb] :

	updated packaging for 1.11


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [ccbe2e2] :

	event_rabbitmq: replace exchange with routing_key
	Closes #220
	(cherry picked from commit eb233f894b1364d20e1f3461304d79a077102a3a)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [fe66e6a] :

	utils: ignore db_berkeley versioning
	(cherry picked from commit 74666b91222bd9df813ec4eeb7959e8ab1b9e18f)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [b874c3e] :

	b2b: restore callbacks mask after reload
	(cherry picked from commit fc3ca077ead8b85098f77e48ef8bb6b193512847)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [8e9a622] :

	call_center: initialize ret variable
	(cherry picked from commit e086595b812587ba15895bbf6b7fea9e8cc4ebd7)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [6b5d8df] :

	b2b_logic: do not call the DESTROY callback at shutdown
	(cherry picked from commit 4ddf1b37cc27a918ba209c06f3cb65f5e3d4342a)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [b496bf8] :

	call_center: fix default scenario readme
	(cherry picked from commit a5f6e10ae6e780e7569bca7099de8f3b0be57bcd)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [554827c] :

	call_center: add cc_calls table
	(cherry picked from commit 2f6eb09c19e01043d167fe168ba45ca3d6163e0e)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [ba9c130] :

	call_center: add last_call_end column
	(cherry picked from commit 4b366c5b3866f1541e073c8799022fbe74e53392)


2014-05-07  Razvan Crainea  <razvan at opensips dot org>
	* [65663b5] :

	call_center: add column info when loading calls from db
	(cherry picked from commit 997ccd335b1ec93397a0d86018ff8543a1cf71ae)


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2aac3c4] :

	Complete documentation added for the Call Center module
	(cherry picked from commit 8f0a1508729276b8b8057e215e20316039f07079)


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [479d434] :

	Fixed compile warnings
	(cherry picked from commit 5c27f464f78235d70414661721470e8213624f5f)


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e481ef3] :

	Support for json-c ; Fixed compile warnings


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [611d47f] :

	Fix DB_BIGINT support and unused vars.


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0196aa8] :

	Fix reusage of proxy_l structures.
	As proxy_l structures contain information about the DNS-based failover (iteration in he struct, which SRV or NAPTR records were used or not), such structure cannot be used more then once for sending a message out.
	Fixes:
	- do not use the same proxy_l for multiple functions in script (remove the add_proxy() and find_proxy() )
	- avoid using the same proxy_l structure for all the calls of same function (when proxy_l is a function parameter)

	Fixes #224
	Many thanks for Chris Maciejewski ( @l7s ) for support on troublehsooting this.
	(cherry picked from commit f7f2cb41d6f562d0c3d6748a827d55e12cb05174)


2014-05-07  Liviu Chircu  <liviu at opensips dot org>
	* [a1317bc] :

	lumps processing: a couple of performance optimizations
	Since we can only have LUMP_DEL or LUMP_NOP along the main lump chain,
	reordering the switch statements will improve code performance.

	This patch also enhances code readability and improves error reporting.
	(cherry picked from commit 6f83e15bba66ca1d1f1437fb5afb1ad25a49c430)


2014-05-07  Liviu Chircu  <liviu at opensips dot org>
	* [0f10e2f] :

	lump processing: correct the handling of DEL lumps with identical offsets
		* for this corner case, only add the _delta_ lengths instead
	(cherry picked from commit f9d9654e6df6c801f19f774e3960a8d6f806a1ca)


2014-05-07  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cb07512] :

	Fix passing the auth AVPs from server to client.
	Fixes #134, testing still required.
	(cherry picked from commit 4ccebfe0ddda37b833cb7cabbe691fbf5f31402d)


2014-05-06  Ovidiu Sas  <osas at voipembedded dot com>
	* [0bb0dc2] :

	scripts: fix gdb detection for opensipsctl
	(cherry picked from commit 92131a48b6bd7768038b0f1d138fa461163652fa)


2014-05-06  Liviu Chircu  <liviu at opensips dot org>
	* [af1cbb0] :

	httpd: fix a couple of size_t printing warnings
	(cherry picked from commit 575c0db9193dbf6a11117d0bdf6e796b78f03a2c)


2014-05-06  Liviu Chircu  <liviu at opensips dot org>
	* [fb09369] :

	db_text: properly initialize memory when caching tables
	(cherry picked from commit 204d08bb18110599317324fefbd64ecc77e6784f)


2014-05-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [db17981] :

	Fixed examples in docs (uac versus uac_auth)
	(cherry picked from commit e1641a4dc82686f2f12051ed22000e54a4b8d846)


2014-05-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d335919] :

	Fixed bogus test on memory allocation.
	(cherry picked from commit d9fe58e721a0e4c53841e91ba766df7bbce2cae5)


2014-05-05  Liviu Chircu  <liviu at opensips dot org>
	* [ba3b48b] :

	db_unixodbc: deallocate the results only after they are processed
		* closes bug #622 on the SF tracker
	(cherry picked from commit d63ee19a8961b6019eda067c0b439f09d8126901)


2014-05-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8ce527e] :

	Postgres schema regenerated.


2014-05-05  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [65acf80] :

	Merge pull request #221 from nikbyte/master
	Fix some PgSQL schema issues


2014-05-05  Vlad Paiu  <vladpaiu at opensips dot org>
	* [721b156] :

	When fetching a counter, do not accidentally create it in case it does not exist
	(cherry picked from commit 67023e99bad1d0569db53853d935abc480c72c19)


2014-05-05  Vlad Paiu  <vladpaiu at opensips dot org>
	* [860e499] :

	When fetching a counter, do not accidentally create it in case it does not exist
	(cherry picked from commit 47cd18c007ee24c3a2c2bdf853fdcbb5790a9e95)


2014-05-05  Vlad Paiu  <vladpaiu at opensips dot org>
	* [705bba1] :

	Fixed the connection handling - some modules would want to run cachedb type ops in the mod init Fixed the DB schema & increased version - the keyname must be a primary key for the counter ops to properly work
	(cherry picked from commit f1fec17d012a54790ce9be47d20cd52daf5a1cbe)


2014-05-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ac42df0] :

	Fix compile error following the backport


2014-05-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d41d8df] :

	Fixed using internal ID for DB updated operations.
	Use the DB ID when doing updates instead of the internal ID.
	(cherry picked from commit d871bc972a4294d0b3ee66eb87a87a811b890659)


2014-05-01  Liviu Chircu  <liviu at opensips dot org>
	* [8a28a98] :

	script statement thresholds: ignore certain statements
	Motivation:
		* could lead to behavior such as:
			"ROUTE, IF, ROUTE, IF and IF took too long..."

		* ignored statements: ROUTE, IF, WHILE, FOR_EACH
	(cherry picked from commit dee5b3fc278500efe49289f77a0f802805e8d626)


2014-05-01  Liviu Chircu  <liviu at opensips dot org>
	* [b565df3] :

	core: fix compiler warning and a rare mem leak
		* setting the global advertised port multiple times leaked pkg mem
	(cherry picked from commit a99688e9bb801fae28a009174b7145688a8b204a)


2014-04-30  Liviu Chircu  <liviu at opensips dot org>
	* [04b2510] :

	error.h: add a bug reporting function
	Motivation:
		* it seems it can be reused quite a lot

	Examples:
		* report_programming_bug("invalid pointer: %p", p);
		* report_programming_bug("we should not process BYEs here!");
	(cherry picked from commit 9f7ce76403a5ef5db8e9ac8da355d4955059af55)


2014-04-30  Liviu Chircu  <liviu at opensips dot org>
	* [29366c0] :

	core: address several advertised address related issues
		* properly duplicate buffers into shared memory when required
		* keep the advertised address of the first branch as a default for
		  future branches
		* also allow set_advertised_port() to receive any kind of parameter
		  (int, string, int pvar, str pvar...)

	Credits for reporting and helping with troubleshooting to GitHub user contact2malay
	(cherry picked from commit ad92fa6ff6f61073270b311475fb9840361b4f2e)


2014-04-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0c56339] :

	Fix bug in fetching all values of a RADIUS AVP.
	Using AVPs from script, you can now retrieve all the values (not only yhe first value of the RADIUS AVP).
	In order to maintain backward compatibility, the fetch_all_values module parameter was added - by default is off.

	Reported and tested by John Quick.


2014-04-29  Liviu Chircu  <liviu at opensips dot org>
	* [5bcd5b9] :

	stun: fix possible memory corruption
		* when processing any STUN packet with unknown attributes
	(Reported by Nick Altmann)
	(cherry picked from commit 70d282354c59cb1882fa2101fa44a54375b7b7dd)


2014-04-28  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [bcb047f] :

	Merge pull request #203 from fabriziopicconi/patch-2
	thrift 0.9


2014-04-27  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [b660610] :

	Update Makefile


2014-04-23  Liviu Chircu  <liviu at opensips dot org>
	* [50fd3bb] :

	drouting: properly set pvar types when setting attribute values
		* fixes commit d24b10e1f
	(Reported by Alexander Mustafin)
	(cherry picked from commit df88864afbfbeb5c415ec63c91ad3920a4fcb227)


2014-04-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [313f41a] :

	Merge pull request #130 from dsandras/ds-pua-dbupdate-fix
	Fixes bug where the pua db elements were deleted too early.
	Conflicts:
		modules/pua/pua.c


2014-04-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [58311b4] :

	Fixed creating tables for b2b and call_center modules


2014-04-20  Nick Altmann  <nikbyte at users.noreply.github dot com>
	* [d52cb7e] :

	Merge pull request #209 from fabriziopicconi/patch-5
	RPM spec: fix opensips-db_oracle library installation


2014-04-20  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [a37e8c7] :

	Fix opensips-db_oracle library installation
	libclntsh.so.11.1() and libocci.so.11.1() not exported by oracle-instantclient


2014-04-20  Nick Altmann  <nick.altmann at gmail dot com>
	* [f5e4d59] :

	RPM spec: added dependencies for mysql and postgresql libs


2014-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [862fd5b] :

	rtpproxy: fix another documentation typo
	rtpproxy_engage() function is not deprecated
	(cherry picked from commit 49194574554d95e6a99320849f858f2f6dd361cd)


2014-04-18  Razvan Crainea  <razvan at opensips dot org>
	* [0b6a348] :

	rtpproxy: fix documentation typo
	rtpproxy_unforce() function is not deprecated
	(cherry picked from commit a9f358e4e34f86df23c7ebd4032cf76b403a2c8a)


2014-04-17  Liviu Chircu  <liviu at opensips dot org>
	* [6b1e171] :

	TLS README: correct spelling and grammar
	(cherry picked from commit 4f7df942a34162619a9c3b7b6d2d25f7ac8aee2f)


2014-04-17  Liviu Chircu  <liviu at opensips dot org>
	* [2b2092b] :

	regenerate the TLS CA and default certificate
		* the CA passphrase did not match the one in the README
	(cherry picked from commit 3a0bca84986d81a8d64037d082b86ae13b5a50f0)


2014-04-16  Nick Altmann  <nick.altmann at gmail dot com>
	* [113693c] :

	RPM spec: corrected changelog section format


2014-04-16  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [5555971] :

	RPM spec: fixed x64_86 compilation problems, added some dependencies


2014-04-16  Razvan Crainea  <razvan at opensips dot org>
	* [9ef8684] :

	acc: make sure we we don't write the same record twice
	this scenario appears when using multi bye leg support and there are no legs
	(cherry picked from commit 48050eeab8e6c2c496e5a746e07a1092a6a523e0)


2014-04-15  Razvan Crainea  <razvan at opensips dot org>
	* [be4c0ca] :

	generate .gitrevision file if it does not exist
	(cherry picked from commit eb06db1a12ee39cc251f3ff7d7fe6918a6c5898c)


2014-04-15  Razvan Crainea  <razvan at opensips dot org>
	* [c4d9368] :

	Makefile: add git revision in the tarballs
	(cherry picked from commit 8ad936f44b5bb5fbe3cbac4ce015ae7bafaf21fb)


2014-04-15  Razvan Crainea  <razvan at opensips dot org>
	* [07e5847] :

	remove id from version output, since it is no longer used
	(cherry picked from commit 1f68d9aade9b0eb2ce15d11a82431e3ff53b12ee)


2014-04-12  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [c3e0466] :

	thrift 0.9
	thrift 0.9 support


2014-04-11  Liviu Chircu  <liviu at opensips dot org>
	* [d427267] :

	msilo dbschema: avoid setting a default value for the body field
		* this causes errors/warnings on backends such as MySQL/MariaDB
	(cherry picked from commit 5c790aa9431401dc0b906a9a8694dffb6bd1d34b)


2014-04-10  Razvan Crainea  <razvan at opensips dot org>
	* [30fa243] :

	rtpproxy: fix rtpproxy_engage() pvar expansion
	Reported by Ovidiu Sas
	Closes #195


2014-04-09  Ovidiu Sas  <osas at voipembedded dot com>
	* [425255b] :

	parser: increase the number of accepted URI unknown params from 5 -> 10
	(cherry picked from commit a6fd82d2d38b95c8815429dad2d5a25b4d998d68)


2014-04-09  Liviu Chircu  <liviu at opensips dot org>
	* [cdaad30] :

	exec doc: update the OpenSIPS routes for each function
	(cherry picked from commit 2f47930ce189815bd9793f7304b00a9dae17f7ac)


2014-04-08  Razvan Crainea  <razvan at opensips dot org>
	* [1a5a259] :

	fix engage fixup function when called without any parameters
	Reported by Ovidiu Sas
	Closes #192
	(cherry picked from commit cee47941726c03583eb37ae046a6f5c0293c9913)


2014-04-04  Liviu Chircu  <liviu at opensips dot org>
	* [47e1f90] :

	hp malloc: properly release the hash lock on redundant shm_reallocs
		* e.g. shm_realloc(shm_malloc(16), 16);
	(cherry picked from commit 4148c3f19d99919bb06aff3d7370cbfb96c40374)


2014-04-04  Liviu Chircu  <liviu at opensips dot org>
	* [8c1f51d] :

	hp malloc: fix pkg max_real_used computation in hp_info()
		* update_shm_stats() should not be called at all
	(cherry picked from commit e56f327aea403aae6982bbb404b2c9f6f4c146a3)


2014-04-03  Liviu Chircu  <liviu at opensips dot org>
	* [3155d87] :

	hp malloc: do not write the pattern file when "mem_warming" = 0
		* also improve the logging at shutdown
	(cherry picked from commit 19832c6a24a8a3f291b744e739d8c3e3c0670267)


2014-04-03  Razvan Crainea  <razvan at opensips dot org>
	* [ca11afb] :

	opensipsctl: change trapping logging method
	the operator '&>>' does not exist for all shells, used '2>&1 >>' instead


2014-04-03  Liviu Chircu  <liviu at opensips dot org>
	* [4b22509] :

	mi_xmlrpc: fix crash when flushing complex MI trees as strings
		* crash was replicated with "ul_dump" command at 51+ contacts
			- "reply_option" must be disabled

	This patch solves a couple of other issues:
		* properly mark completed nodes when "reply_option" = 0
		* a rare memory leak when flushing empty "mi_node"s
	(cherry picked from commit f5da89d27099f405e1242347bdf9e3cb6368423c)


2014-04-03  Razvan Crainea  <razvan at opensips dot org>
	* [bead016] :

	fixed acc to raise the proper event when using acc_evi_request()
	Credits go to Brett Nemeroff for reporting and testing
	(cherry picked from commit 24bd3a843f382860a917dc7da0c8af52afb4c9b8)


2014-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [84d919f] :

	hp malloc: differentiate the pkg and shm statistics code
	When HP_MALLOC is defined:
		* shm statistics are based on 32/64-bit atomic counters
			- the former logic is still available with HP_MALLOC_FAST_STATS
			- however, stat aggregation and the shm threshold checks should be done by a single process
		* pkg statistics are implemented similarly to the other allocators
		* also re-introduce fragment coalescing for pkg memory

	(cherry-picked from commit 268955ba5af0306e849877aecc87967a0b6c7c3e)


2014-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [87cc1ea] :

	core statistics: export a initialization checking function
		* this allows statistics-dependent code to test initialization
		* change all "shm_malloc" calls to "shm_malloc_unsafe"

		* ultimately, memory allocators are now able to make use of core stats
	(cherry picked from commit 42c3d383b1449af42a1ddfb91f4891f28fcbf50b)


2014-04-01  Liviu Chircu  <liviu at opensips dot org>
	* [a09410a] :

	hp malloc statistics: fix incorrect stats when configuring split buckets
	(cherry picked from commit b68cfbab2716efe9bdcc3bfd1724b228ce84bda2)


2014-03-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [30654e5] :

	Fix recalculation of sending socket after local route
	Take into consideration the "force_send_socket" setting in local route.
	(cherry picked from commit d37ae664dcfd9a5f83de62a493628ba12d495e75)


2014-03-27  Liviu Chircu  <liviu at opensips dot org>
	* [51c1518] :

	call_center: fix some db schema errors
		* reduce the cc_agents skills column size
		* fix some primary key issues in cc_flows and cc_agents
		* fix a couple of bad column names in cc_cdrs
	(cherry picked from commit edd872182882536f3cf37bd5c4be633075f265d4)


2014-03-27  Liviu Chircu  <liviu at opensips dot org>
	* [8b8ab79] :

	hp malloc: reorder some initializing operations
		* hp_mem_warming() fails if anything is allocated before
			(it cannot access the big fragment anymore)
	(cherry picked from commit 9f710642b9da0d091d67b79b95b4a89cac954315)


2014-03-27  Liviu Chircu  <liviu at opensips dot org>
	* [5663e41] :

	hp malloc: fix shm statistics
		* processes now update fragment statistics for each bucket
		* the MI workers iterate and aggregate all memory information
		* the built-in maximum sampling rate is 200ms
			- repeating a fetch in < 200ms will return the same results
		* this patch also corrects a rare deadlock in hp_realloc
			- hp_realloc "growth" may deadlock with hp_malloc "shrink"
			- the best solution is to drop the "growth" realloc operation
			- this also merges well with the allocator fragmentation requirements
	(cherry picked from commit 9ad2947eed7add4510b1fa388004524cc50d5bab)


2014-03-27  Liviu Chircu  <liviu at opensips dot org>
	* [5c82191] :

	dispatcher init: initialize the old_data pointer
		* otherwise, the code will dereference a random pointer
	(cherry picked from commit dbf1b4bfe98e0d18debaca9c33fc0adc2a1809fe)


2014-03-26  Walter Doekes  <walter+github at wjd dot nu>
	* [fad3491] :

	presence_dialoginfo: Fix bounds checking by using a helper function.
	Reported by: dsandras
	> About the bound checking error, the code was cut&pasted from another
	> place in the same file where the same error is still present:
	> ...

	Also I replaced a heap str with a stack one in build_dialoginfo. This
	one wasn't freed either unless an error condition was hit.
	(cherry picked from commit 6d058ec495c2faa015b24f412e2fe1b55526657e)


2014-03-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5cb96e4] :

	Fixed detection of the module functions used in script - we need to look also into the logical expressions (like IF and WHILE conditions) Credits for reportind and helping with the troubleshooting go to Justin Zondagh
	(cherry picked from commit ab22467a2ed8af97ba89ce53144d4414dbcd5a52)


2014-03-26  Ovidiu Sas  <osas at voipembedded dot com>
	* [23dd8e7] :

	pi_http: fix HTTP escaping
	(cherry picked from commit 980dfc853c411730e07db74242188bc6190aafdf)


2014-03-26  Ovidiu Sas  <osas at voipembedded dot com>
	* [0961608] :

	pi_http: fix html output
	(cherry picked from commit a1f454bcc6e9eb45249eafe1f49726121b792a67)


2014-03-26  Ovidiu Sas  <osas at voipembedded dot com>
	* [d5871e2] :

	pi_http: samples regenerated
	(cherry picked from commit cbf2f118c407aa6549cce43fc6e9b6bcf9ae09fc)


2014-03-26  Ovidiu Sas  <osas at voipembedded dot com>
	* [16bdc3a] :

	pi_http: update pi_framework_mod.xsl to generate new pi_http samples  - add link_cmd to the primary key for DB_UPDATE commands
	(cherry picked from commit d0ced797fce24c00502a008ab12e88eeeea85b0f)


2014-03-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [74c5b3e] :

	core: list_tcp_conns: compute properly the tmeout attr
	(cherry picked from commit 344cd96ca6e9cef70525b92cd824f44e38476d55)


2014-03-25  Ovidiu Sas  <osas at voipembedded dot com>
	* [24353c6] :

	core: list_tcp_conns: print Timeout attr in human readable format
	(cherry picked from commit 6ac1dc8251c597b60f0787026d65d95158d00a77)


2014-03-25  Liviu Chircu  <liviu at opensips dot org>
	* [eaea7ff] :

	hp malloc: reduce the built-in maximum split factor
		* dividing the list into too many smaller ones may actually hurt performance
		* this also reduces the minimum pkg and shm consumption by 3.4MB when
		  enabling HP_MALLOC
	(cherry picked from commit 7d302c18fbd6c4c4d7af64aeddb1e9c65b6c9fc3)


2014-03-25  Liviu Chircu  <liviu at opensips dot org>
	* [22ca1a6] :

	hp malloc: fix the hash size macros
		* the old ones actually led to bad memory accesses within hp_malloc()
	(cherry picked from commit faaca742a06d5a1e5f8925a1e95cfafcdd85c709)


2014-03-25  Ovidiu Sas  <osas at voipembedded dot com>
	* [4b90882] :

	presence: subs_phtable_list - print expires attr in human readable format
	(cherry picked from commit ddaf00470e4f376a572483a3d1e8bf8c2bc98c4e)


2014-03-24  Ovidiu Sas  <osas at voipembedded dot com>
	* [d84ffc8] :

	httpd: fix compiler warning
	(cherry picked from commit 4e703a579d74587fe8f82fa040e3b39fe4b93b2d)


2014-03-24  Ovidiu Sas  <osas at voipembedded dot com>
	* [0bc24b5] :

	mi: declare/move MI_DATE_BUF_LEN into the mi headers
	(cherry picked from commit 8925239f47bec295e1b0188c5b8c0deb2903a4ca)


2014-03-24  Nick Altmann  <nick.altmann at gmail dot com>
	* [a345f50] :

	Update CentOS and RHEL/Fedora specs: fixed b2b submodule, added additional dependencies


2014-03-24  Liviu Chircu  <liviu at opensips dot org>
	* [3285be4] :

	sipmsgops: Fix trailing whitespaces when doing "codec_delete_re"
		* deleting the last payload attribute led to trailing whitespaces
		* some UAs would return "488 Not Acceptable Here" in this case
	(cherry picked from commit c9657d4154ebc3ee271e981db036a10d9b9a7922)


2014-03-24  Nick Altmann  <nick.altmann at gmail dot com>
	* [5508a27] :

	Update centos spec file: fixed b2b submodule and removed some odd files from main module


2014-03-23  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [bb3c2df] :

	New modules included
	Some new rpm optional modules are added:
	b2b_sca,call_center,mi_json,script_helper


2014-03-22  Nick Altmann  <nick.altmann at gmail dot com>
	* [eb2dee6] :

	Update rpm specs for 1.11


2014-03-21  Liviu Chircu  <liviu at opensips dot org>
	* [ea6ab4d] :

	tm: fix fr_inv_timeout bug from commit d244686dc5f
		* also improve code readability with a couple of macros
	(cherry picked from commit 2535935327f30a2c004c3f2619c1cc9f0ed0e26c)


2014-03-21  Liviu Chircu  <liviu at opensips dot org>
	* [5973c96] :

	hp malloc: expose memory warming parameters in the script
	(cherry picked from commit 83c97e8a6f9a3c14dd393722467d701c7d03f87b)


2014-03-21  Liviu Chircu  <liviu at opensips dot org>
	* [3da4c5d] :

	hp malloc: increase built-in PKG mem size to match the larger hash
		* otherwise, "opensips -V" would fail
	(cherry picked from commit 6246df172cede302e33bb63e667a4786e2a47c17)


2014-03-21  Liviu Chircu  <liviu at opensips dot org>
	* [f7ab6ce] :

	hp malloc: rename functions, update headers, add some comments
	(cherry picked from commit d504e9fe6d531b2102133ac56337f17f60accbe8)


2014-03-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ec75efb] :

	Fixed DH and EC compiling on openssl < 1.0.1 - credits go to Nick Altmann for reporting and testing the fix
	(cherry picked from commit aefe6c18319eaf6348695c5865aa2b2a5d451378)


=========================== Release 1.11.0 ==============================

2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [1c7f225] :

	Makefile.conf.template: disable HP_MALLOC from the default setup


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [56b325b] :

	core: High Performance Memory Allocator included
		* ideal for systems with high volumes of calls-per-second
		* fine-grained locking
		* tunable two-level hashing of free memory fragments
		* memory allocation pattern recording
		* fragmentation-on-startup
		* enable "HP_MALLOC" within "make menuconfig"


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [5fbc82f] :

	atomic.h: add 64-bit atomic operations


2014-03-20  Razvan Crainea  <razvan at opensips dot org>
	* [66354d1] :

	update specs for 1.11


2014-03-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [fcc1ab5] :

	Changed 1.11 status to beta


2014-03-20  Răzvan Crainea  <razvan at opensips dot org>
	* [1a0310f] :

	dialog: remove timeout_avp from docs


2014-03-20  Razvan Crainea  <razvan at opensips dot org>
	* [c6b1a6a] :

	packaging: remove old debian-lenny


2014-03-20  Razvan Crainea  <razvan at opensips dot org>
	* [d110328] :

	update credits for 1.11


2014-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [e2c7ece] :

	MYSQL DB migration script updated from 1.10 to 1.11 migration


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [bffa103] :

	tm: fix README


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [6d41b53] :

	tm: update doc for "own_timer_proc" parameter  - it defines the number of timer procs  - completes commit f001f098a0cf3996655e1ca47675b15d2f69c984


2014-03-20  Răzvan Crainea  <razvan at opensips dot org>
	* [ff3f11a] :

	rtpproxy: update documentation


2014-03-20  Razvan Crainea  <razvan at opensips dot org>
	* [3c36a16] :

	rtpproxy: rename script functions
	* engage_rtp_proxy() is deprecated and replaced by rtpproxy_engage()
	* unforce_rtp_proxy() is deprecated and replaced by rtpproxy_unforce()
	* start_recording() is deprecated and replaced by rtpproxy_start_recording()


2014-03-20  Razvan Crainea  <razvan at opensips dot org>
	* [00c42e3] :

	call_center: fix compile warning for unsigned printing


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [c2b3726] :

	drouting: use constans for indexing values while loading dr_rules table


2014-03-20  Razvan Crainea  <razvan at opensips dot org>
	* [7b3ead2] :

	makefile: prevent Makefile.conf from being ovewritten


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [bdda717] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [f552335] :

	mi_xmlrpc_ng: make module opensips-cp compatible


2014-03-20  Razvan Crainea  <razvan at opensips dot org>
	* [6d76fe3] :

	compile: add Makefile.conf dependency


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [ca046ae] :

	drouting: use constans for indexing values while loading dr_carriers table


2014-03-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [a6f42db] :

	Fixed compile warning Module compiles even with STATISTICS support disabled


2014-03-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [8c83b13] :

	fixed sched_yield() warning


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [ecbc003] :

	drouting: use constans for indexing values while loading dr_gateways table


2014-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [791ab01] :

	fixed compile warning


2014-03-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f14766a] :

	Fixed free which lead to bogus memory access:


2014-03-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [804c9f7] :

	Fixed compile warning


2014-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5492dbf] :

	Code cleanup - removed variables which are not actually used for anything


2014-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8ad0901] :

	Fixed return code in case of error


2014-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a4cdbcb] :

	Added db schema for the Call Center module; DB stuff re-generated


2014-03-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [4f5b87a] :

	pua_usrloc: fix error: SCB_RUN_ALL undeclared (first use in this function)


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [276339f] :

	[NEW] Script Helper module
		* simplifies the scripting process in OpenSIPS
		* transparent sequential request management
		* embedded record routing and loose routing logic
		* may be configured to include dialog support
		* future directions include NAT and auth support


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [f333109] :

	tm: reset $T_fr_timeout to default when setting a NULL value
		* same for $T_fr_inv_timeout
		* docs updated


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [a9c8016] :

	rest_client: rename "ssl_ca_path" to match documentation


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [ff4f8c1] :

	call_center: added README


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [6e46a57] :

	script callbacks: add a priority-based register function
		* useful for modules which must run their callback first/last


2014-03-20  Liviu Chircu  <liviu at opensips dot org>
	* [4570b22] :

	script callbacks: new return code mechanism
		* script callbacks must now return a "what-to-run-next" bitmask
		* e.g. a module may now skip running top route, yet run post callbacks


2014-03-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cb847c1] :

	Adding new module "Call-Center" for call queueing and distribution TODO : add documentation and add DB schema


2014-03-19  Ovidiu Sas  <osas at voipembedded dot com>
	* [657ce89] :

	mi_xmlrpc_ng: align output format with mi_xmlrpc module


2014-03-19  Razvan Crainea  <razvan at opensips dot org>
	* [beb383f] :

	makefile: add FASTER variable
	Increase the compile time of opensips by compiling all modules in parallel.
	Because the output of the command gets mixed and it is hard to parse, we
	simply suppress it.
	Usage example: FASTER=1 make -j all


2014-03-19  Walter Doekes  <walter+github at wjd dot nu>
	* [176a41f] :

	Address concern: readability of compiling modules without -j.


2014-03-19  Walter Doekes  <walter+github at wjd dot nu>
	* [67cfefe] :

	Address concerns: clearly note that there was an error.


2014-03-19  Walter Doekes  <walter+github at wjd dot nu>
	* [9271a45] :

	Replace odd -j in module-submake with ability for proper parallelism.
	Recently `-j` was added to the list of flags passed to the modules
	$(MAKE) command. That's bad practise for two reasons: (1) the caller
	should decide on how much -j is required, not the programmer, and (2)
	just -j without any numeric argument is "use all resources you can
	get", which can be too much.

	We order the Makefile around so the supermake (the user invocation)
	can dispatch individual submakes in a parallel fashion. This is done
	by (a) making the module directories phony targets and (b) replacing
	the sequential for-loop over the modules with a simple dependency.


2014-03-19  Razvan Crainea  <razvan at opensips dot org>
	* [0260de0] :

	event_rabbitmq: URI-decode fields in rabbitmq socket
	Closes issue #148


2014-03-19  Ovidiu Sas  <osas at voipembedded dot com>
	* [ff5f403] :

	pi_http: fix copy/paste error that can lead to a crash when 'order_by_cols' are used


2014-03-18  Razvan Crainea  <razvan at opensips dot org>
	* [a65eca9] :

	fix sst dialog timeout after timeout_avp removal


2014-03-18  Liviu Chircu  <liviu at opensips dot org>
	* [b91cba4] :

	cfgutils doc: specify RFC 2445 compatibility of "check_time_rec()" params


2014-03-18  Liviu Chircu  <liviu at opensips dot org>
	* [26af2e8] :

	tm: update documentation with latest changes


2014-03-18  Liviu Chircu  <liviu at opensips dot org>
	* [4b5e4f8] :

	tm: rename "fr_timer" and "fr_inv_timer" 	* to "fr_timeout", "fr_inv_timeout" 	* rename equivalent variables to $T_fr_timeout and 	* $T_fr_inv_timeout 	* backwards-compatible


2014-03-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [253753e] :

	Added new script function t_new_request() to allow sending SIP initial requests (as UAC transactions) from the OpenSIPS script.


2014-03-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6c0cdf3] :

	Before DB flush, check if the DB connection was actually open (during failed starts, destroy may be triggered without having init done)


2014-03-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d244686] :

	Fixed setting timeout (via script vars) for UAC transactions


2014-03-17  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b4bb68b] :

	Forgotten file from commit 1db2fc (local route changes) Reported by Ovidiu Sas.


2014-03-17  Ovidiu Sas  <osas at voipembedded dot com>
	* [40a34fb] :

	drouting: fix compiler warnings  - * may be used uninitialized in this function


2014-03-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1db2fc5] :

	LOCAL Route support enhanced :     - serial forking for UAC transactions added     - possibility to use ONREPLY and FAILURE routes for UAC transactions     - ability to use (transaction wise) AVPs, flags, timeouts     - DNS based failover works now for UAC transactions (solving #140)


2014-03-15  Ovidiu Sas  <osas at voipembedded dot com>
	* [75f1ed6] :

	pi_http: run DB_UPDATE commands with prefilled values


2014-03-13  Liviu Chircu  <liviu at opensips dot org>
	* [3f3d52d] :

	drouting: update documentation with latest changes
	* also fix some missing paragraph tags


2014-03-13  Liviu Chircu  <liviu at opensips dot org>
	* [d24b10e] :

	drouting: Rework of all "attributes" AVPs
	* now exported at script level using optional function pvar parameters
	* by default, they are not stored at all inside the transaction
	* stored internally if pvars are given to do_routing|route_to_carrier|route_to_gw
	* no additionally required module parameters
	* NOT backwards-compatible


2014-03-12  Vlad Paiu  <vladpaiu at opensips dot org>
	* [61e21a0] :

	Added support for embedded arrays within MongoDB documents


2014-03-12  Vlad Paiu  <vladpaiu at opensips dot org>
	* [2520b8a] :

	For topo hiding and fix_route_dialog() usage, do not try do add del lumps for already deleted route headers
	(cherry picked from commit 5a119db9031d6231c521367847bf1b3c1b6bb7a5)


2014-03-11  Liviu Chircu  <liviu at opensips dot org>
	* [e93234b] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2014-03-11  Liviu Chircu  <liviu at opensips dot org>
	* [4b4ac96] :

	residential config: Also define the "xcap" db_url


2014-03-11  Razvan Crainea  <razvan at opensips dot org>
	* [ab80ade] :

	db_http: add value_delimiter parameter
	Add a new parameter used to specify the fields delimiters for queries
	variables


2014-03-11  Răzvan Crainea  <razvan at opensips dot org>
	* [112f504] :

	Merge pull request #125 from rrb3942/index_trans
	Add s.index and s.rindex transformations


2014-03-10  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [1e02b32] :

	Merge pull request #174 from wdoekes/wjd-fix_dialogaggr_memleak
	presence_dialoginfo: Fix memory leak in dlginfo_agg_nbody.


2014-03-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3c1164a] :

	When updating the database records, first perform all update and inserts and then check the timeout for expired records -> records to be deleted. Doing first the delete may hide records "expired but to be updated". Credits go to Nick Altmann Closes bug #112.


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [ec56716] :

	tm: compute the timer set based on the fragments align


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [ed31ed5] :

	tm: prevent timer list overflow when using multiple timer procs


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [67ced1c] :

	dialog: only update timer if the timeout is set on current request


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [ea19362] :

	rtpproxy: properly unforce dialog when using engage


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [ff18c53] :

	rtpproxy: updated documentation for the setid and pvar changes


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [6a213ed] :

	rtpproxy: properly store/fetch variables by engage


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [dbe4535] :

	rtpproxy: properly parse the bavp set


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [26ed2fa] :

	rtpproxy: removed the 'rtpp_sock_pvar' parameter
	now all functions return the rtpproxy server used in the 4th optional
	parameter


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [2d4ce86] :

	rtpproxy: allow functions to receive optional parameters


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [b528acd] :

	rtpproxy: remove set_rtp_proxy_set() function
	The set_rtp_proxy_set() function has been completely remove. From now on, you
	can specify the set directly in the rtpproxy comands. If not specified, the
	default set is used.


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [ba80ddd] :

	nathelper: remove unused nathelper.h header


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [6b3c22c] :

	rtpproxy: allow unexisting set
	Do not exit if a set is not found during startup, since it may be later on
	loaded from database.


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [b5fd777] :

	dialog: add $DLG_timeout pvar documentation


2014-03-10  Razvan Crainea  <razvan at opensips dot org>
	* [dc57fed] :

	dialog: replace timeout_avp with $DLG_timeout
	* removed the timeout_avp parameter
	* added DLG_timeout pseudovariable for specifying dialog timeout


2014-03-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f001f09] :

	Added support for multiple timer processes in TM. The timer process may easyly become a bottleneck in TM because: 	 (a) single lock on the timer lists, 	 (b) single process to purge/free all transactions, 	 (c) single process running all failure routes (with all script complexity of failure routes). This patch addresses all the above problems allowing multi-locking and multi-processing for the the overall timer concept in TM. Existing "own_timer_proc" module parameter extended from boolean value to an integer value : 0 - no separate timer proc for TM; 1 - one separate timer proc for TM; n - multiple timer procs for TM.


2014-03-10  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9314abb] :

	Output the address of previous fragment when overwritten is detected (just better logging)


2014-03-06  Walter Doekes  <walter+github at wjd dot nu>
	* [60716e8] :

	presence_dialoginfo: Fix memory leak in dlginfo_agg_nbody.
	This commit fixes a couple of presence issues (introduced in 80c48e6):
	 * There was a memory leak in dlginfo_agg_nbody.
	 * Bounds checking in dlginfo_agg_nbody was off by 4 (potential stack
	   corruption).
	 * There were 2 PKG allocs, straight after one another while no alloc
	   was needed at all: reduced to 1 optional one.
	 * Replace "dumy" with "dummy" in the vicinity.


2014-03-05  Liviu Chircu  <liviu at opensips dot org>
	* [9a801ba] :

	Remove 18KB worth of whitespace from all .c, .h and .cpp files


2014-03-05  Liviu Chircu  <liviu at opensips dot org>
	* [1f47b10] :

	Fix various typos throughout documentation and code


2014-03-05  Liviu Chircu  <liviu at opensips dot org>
	* [15784be] :

	statistics: fix compiler warning in 32-bit environments


2014-03-05  Liviu Chircu  <liviu at opensips dot org>
	* [a1d61f3] :

	Merge branch 'wjd-compile_warnings' of https://github.com/wdoekes/opensips into wdoekes-wjd-compile_warnings


2014-03-05  Razvan Crainea  <razvan at opensips dot org>
	* [f544472] :

	config: skip optional parameters
	when a parameter is not mandatory, you can skip it by adding the next comma.
	For example: uac_replace_from(,"sip:robin@gotham.org")


2014-03-05  Vlad Paiu  <vladpaiu at opensips dot org>
	* [5cf71c3] :

	Fixed the lex for tcp_max_msg_chunks and tcp_max_msg_time


2014-03-05  Walter Doekes  <walter+github at wjd dot nu>
	* [f2e64f5] :

	core: Fix pass_fd.c aliasing warnings by forcing proper packing.
	    Compiling pass_fd.c
	    pass_fd.c: In function ‘send_fd’:
	    pass_fd.c:132:2: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
	      *(int*)CMSG_DATA(cmsg)=fd;
	      ^
	    pass_fd.c: In function ‘receive_fd’:
	    pass_fd.c:240:3: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]
	       *fd=*((int*) CMSG_DATA(cmsg));
	       ^


2014-03-05  Walter Doekes  <walter+github at wjd dot nu>
	* [0b18a17] :

	exec: Fix kill.c compile warnings by including <unistd.h>.
	    Compiling kill.c
	    kill.c: In function ‘__popen’:
	    kill.c:129:2: warning: implicit declaration of function ‘pipe’ [-Wimplicit-function-declaration]
	      if (pipe(fds) != 0) {
	      ^
	    ...


2014-03-05  Liviu Chircu  <liviu at opensips dot org>
	* [4aa4f49] :

	rest_client: update documentation


2014-03-05  Liviu Chircu  <liviu at opensips dot org>
	* [15423bb] :

	rest_client: allow disabling of SSL remote host verifications
	* with the new *ssl_verifypeer* and *ssl_verifyhost* modparams


2014-03-04  Liviu Chircu  <liviu at opensips dot org>
	* [277f587] :

	stun: update documentation


2014-03-04  Liviu Chircu  <liviu at opensips dot org>
	* [d5f7ddf] :

	stun: add the option to specify advertised addresses and ports
	* as an extension to the existing modparam strings


2014-03-04  Ovidiu Sas  <osas at voipembedded dot com>
	* [7c171aa] :

	dispatcher: ds_select_dst/domain - fast emty slot detection


2014-03-04  Ovidiu Sas  <osas at voipembedded dot com>
	* [650a60b] :

	drouting: enforce route_to_gw() param parsing  - no empty slots allowed inside GW list


2014-03-04  Ovidiu Sas  <osas at voipembedded dot com>
	* [d809369] :

	drouting: do not alter PVARs while scanning GW lists in route_to_gw()


2014-03-04  Ovidiu Sas  <osas at voipembedded dot com>
	* [b3696d2] :

	dispatcher: update documentation for ds_select_dst/domain


2014-03-03  Ovidiu Sas  <osas at voipembedded dot com>
	* [37f8774] :

	dispatcher: add ability to dispatch over multiple dispatchng groups  - ds_select_dst/domain can accept lists of comma separated values as parameters


2014-03-03  Ovidiu Sas  <osas at voipembedded dot com>
	* [671b81d] :

	core: add q_memrchr - faster memrchr version


2014-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [9bfce00] :

	for-each statement completed
	* final syntax: for ($var(it) in $(ct[*])) { ... }
	* now works for any pvar which supports indexing
	* current such pvars in OpenSIPS: $avp, $ct, $ct.fields, $branch, $hdr(xxx))


2014-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [c09c126] :

	Update .gitignore


2014-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [cd93704] :

	core: $hdrcnt should not be indexed


2014-03-02  Liviu Chircu  <liviu at opensips dot org>
	* [a5cd55b] :

	core: improve script_trace() performance with a wrapper macro


2014-03-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [0e37b92] :

	mod_fix: return error for fixup_get_isvalue() if no int or str value is available


2014-03-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [3186e69] :

	core: new function: str_trim_spaces_lr()  - same as trim_spaces_lr() but without '0' padding


2014-03-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [08eb851] :

	dispatcher: fix erroneous forced mode 0 introduced by previous commit


2014-03-01  Liviu Chircu  <liviu at opensips dot org>
	* [aeb4e88] :

	Fix crash when printing $(ct[*])


2014-03-01  Ovidiu Sas  <osas at voipembedded dot com>
	* [2b64f2a] :

	dispatcher: use a single helper function for all ds_select_dst/domain functions


2014-02-28  Ovidiu Sas  <osas at voipembedded dot com>
	* [2049108] :

	dispatcher: change signature for ds_select_dst  - group all controlling params in a single structure


2014-02-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [abf3947] :

	mod_fix:fixup_get_isvalue - make sure that we have a valid string for int converision


2014-02-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [d15578c] :

	dispatcher: enhance error probe  - print dispatching id for unknown dispatching algorithm


2014-02-27  Liviu Chircu  <liviu at opensips dot org>
	* [52b6793] :

	mod_fix: have commit 4e3b6b7c390a work on strings and pv_elem_t as well


2014-02-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [bf56024] :

	dispatcher: simplify ds_select_dst/domain params handling


2014-02-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [4e3b6b7] :

	mod_fix: fixup_get_isvalue - return the int value if possible


2014-02-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [bc4ccbe] :

	dispatcher: reorganize the code by using a define


2014-02-26  Liviu Chircu  <liviu at opensips dot org>
	* [79bc8d7] :

	tm: change the "fr_(inv_)?timer_avp" params into module vars
	* namely $T_fr_timer and $T_fr_inv_timer
	* simplifies the scripting logic (also prevents some errors)
	* less CPU cycles, less mem usage
	* documentation updated


2014-02-26  Liviu Chircu  <liviu at opensips dot org>
	* [1d5e117] :

	Fix issue introduced in commit "23174d2629c"


2014-02-26  Ovidiu Sas  <osas at voipembedded dot com>
	* [ff6e145] :

	dispatcher: add ability to handle string PVs for ds_select_dst/domain


2014-02-26  Liviu Chircu  <liviu at opensips dot org>
	* [23174d2] :

	dialplan: move the "attrs" pvar into the "dp_translate" param list
	* simplifies the scripting logic
	* more efficient - it is now a local option, as opposed to a global one


2014-02-26  Liviu Chircu  <liviu at opensips dot org>
	* [6da4e47] :

	registrar: Fix harmless compiler warning


2014-02-26  Ovidiu Sas  <osas at voipembedded dot com>
	* [7870f22] :

	mod_fix: new helper fixup function that returns string and/or int value from a gparam_t


2014-02-24  Liviu Chircu  <liviu at opensips dot org>
	* [1ccdca4] :

	Job timeout for the 'exec' module
	* the "time_to_kill" parameter now works for all "exec_*" commands
	* improved overall documentation and usage examples


2014-02-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aaa5f60] :

	docs updated for route_to_gw()


2014-02-21  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5232238] :

	allow route_to_gw() to receive a list of gw IDs (instead of only one) - the list is a comma separated list of gw IDs


2014-02-20  Liviu Chircu  <liviu at opensips dot org>
	* [7637f58] :

	Proper reporting for invalid module parameter types


2014-02-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [57d60b6] :

	improve docs


2014-02-10  Ovidiu Sas  <osas at voipembedded dot com>
	* [14c2630] :

	cachedb_mongodb: complete previous commit - handle _id based queries


2014-02-10  Ovidiu Sas  <osas at voipembedded dot com>
	* [a6148b1] :

	cachedb_mongodb: handle _id based queries


2014-02-10  Ovidiu Sas  <osas at voipembedded dot com>
	* [4b48f18] :

	cachedb_mongodb: fix sorting results for mongo queries


2014-02-07  Ovidiu Sas  <osas at voipembedded dot com>
	* [49a9f2a] :

	cachedb_mongodb: retieve ObjectId _id as string


2014-02-06  Ovidiu Sas  <osas at voipembedded dot com>
	* [36fa3cc] :

	cachedb_mongodb: use constants for oip size


2014-02-06  Liviu Chircu  <liviu at opensips dot org>
	* [5d61f37] :

	Fix NULL pointer deref. in "acc_db_request" when "db_url" is not set


2014-02-06  Ovidiu Sas  <osas at voipembedded dot com>
	* [abdcbaf] :

	cachedb_mongodb: fix BSON_DATE conversion


2014-02-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cdd3c51] :

	Fixed bogus test over the presence of a request route. This was generating bogus warning messages to the logs, but without any negative impact over the actual processing. Credits go to rrb3942 on GITHUB Closes issue #162


2014-02-05  Ovidiu Sas  <osas at voipembedded dot com>
	* [5bdd706] :

	dispatcher: enhance MI ds_list command  - print socket if set  - print attr if set


2014-02-05  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [7949175] :

	Merge pull request #164 from wdoekes/wjd-allow_domain_in_digest_user
	digest+m_auth: Allow a domain in the digest username.


2014-02-05  Walter Doekes  <walter+github at wjd dot nu>
	* [3b66855] :

	digest+m_auth: Allow a domain in the digest username.
	Before this patch, a domain in the digest username was allowed:

	    Digest username="abc@domain", realm="domain"

	but only if the domain is equal to the realm. This was introduced in
	a92bf789 (Juha Heinanen, Mar. 29 2006).

	The SIP spec. doesn't mention any such restriction.

	This patch undoes that commit and makes sure the whole username is used
	when authenticating through `pv_www_authorize` and `pv_proxy_authorize`.
	That makes the following valid:

	    Digest username="abc@domain", realm="something different"


2014-02-04  Ovidiu Sas  <osas at voipembedded dot com>
	* [11db9b8] :

	dispatcher: fix crash at shutdown with incorrect table version


2014-01-30  Liviu Chircu  <liviu at opensips dot org>
	* [707982e] :

	Fix "mf_process_maxfwd_header" retcode in case of parsing errors


2014-01-28  Ovidiu Sas  <osas at voipembedded dot com>
	* [76d2499] :

	dialog: print dialog start and timeout in human readable format (MI)


2014-01-28  Ovidiu Sas  <osas at voipembedded dot com>
	* [45d660d] :

	pua_dialoginfo: documentation updates


2014-01-28  Ovidiu Sas  <osas at voipembedded dot com>
	* [188b2e7] :

	pua_dialog_info: failed calls should not trigger PUBLISH errors  - related to Issue #142


2014-01-28  Ovidiu Sas  <osas at voipembedded dot com>
	* [51b5195] :

	pua: define constants for send_publish return codes


2014-01-27  Ovidiu Sas  <osas at voipembedded dot com>
	* [f10288b] :

	dialog: do not print missing to tag error for final replies in DLG_STATE_UNCONFIRMED


2014-01-21  Vlad Paiu  <vladpaiu at opensips dot org>
	* [ce35927] :

	Added new flag to is_from_gw/goes_to_gw , 'c' , which will push the respective carrier ID to the carrier_id_avp AVP


2014-01-15  vladpaiu  <vladpaiu at opensips dot org>
	* [11a74d7] :

	Merge pull request #160 from rrb3942/localcache_counter_expire
	Do not reset counter expiration on incr/decr


2014-01-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [adc3aaa] :

	"Interrupted system call" on "select" must not be reported as error/warning


2014-01-14  Razvan Crainea  <razvan at opensips dot org>
	* [e8195fc] :

	properly print statistics while running "-V"


2014-01-10  Ryan Bullock  <rrb3942 at gmail dot com>
	* [4eed903] :

	Do not reset counter expiration on incr/decr


2014-01-10  Liviu Chircu  <liviu at opensips dot org>
	* [5685379] :

	Merge pull request #144 from shimaore/mathops_extension
	Mathops extension: new RPN expression parsing function


2014-01-10  Liviu Chircu  <liviu at opensips dot org>
	* [6c06594] :

	Correct an error message


2014-01-10  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [09500ab] :

	Merge pull request #158 from nikbyte/master
	Fixed bugs with processing m4 in fedora init scripts


2014-01-10  Nick Altmann  <nick at altmann dot pro>
	* [4f10a57] :

	Fixed bugs with processing m4 in fedora init scripts


2014-01-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [934fa69] :

	Fixed copy'n'paste error in the state flushing routine. Reported by Stéphane Alnet (shimaore) Closing issue #154


2013-12-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7565996] :

	Fixed crash when dr_state_flusher() (via timer) may be called before data is loaded (by first SIP worker) Credits go to shimaore on GITHUB


2013-12-20  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [e4a334e] :

	mediaproxy: fixed detecting messages without a body


2013-12-20  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [359db7f] :

	mediaproxy: always parse To header


2013-12-17  Ovidiu Sas  <osas at voipembedded dot com>
	* [54a22de] :

	scripts/opensipsctl: nicer output for 'trap' if opensips is not running


2013-12-17  Ovidiu Sas  <osas at voipembedded dot com>
	* [55bde1d] :

	Makefile.conf.template: add newline at end of file


2013-12-16  Ovidiu Sas  <osas at voipembedded dot com>
	* [9d25d0c] :

	opensipsctl: new command 'trap'  - useful to get a full bt dump of all opensips processes  - handy in dead-lock investigatigations


2013-12-15  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [0ecaccb] :

	Fixed bogus triggering of PUBLISHing for non-INVITE sequential requests. Credits go to Damien Sandras Closes pull request #149
	(cherry picked from commit e0cc9d009151a086f42c08d7f8092b8c7d5835ed)


2013-12-15  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [6b6be30] :

	Merge pull request #150 from staskobzar/master
	opensipsctl is calling ds_relaod for dr instead of dr_reload


2013-12-15  Stas Kobzar  <stas at modulis dot ca>
	* [da687c5] :

	opensipsctl is calling ds_relaod for dr instead of dr_reload


2013-12-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [017e0c0] :

	scripts: db files for b2b_sca module


2013-12-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [b1cd8a5] :

	db/schema: xml files for b2b_sca module


2013-12-11  Ovidiu Sas  <osas at voipembedded dot com>
	* [29e1b28] :

	b2b_sca: new module providing SCA functionality


2013-12-11  Vlad Paiu  <vladpaiu at opensips dot org>
	* [d4e8c03] :

	Re-formatted the dlg_list_ctx output
	Added extra intermediary nodes for the dlg values and profiles in order to avoid key duplication for certain MI output formats ( eg. xml, json )


2013-12-11  Razvan Crainea  <razvan at opensips dot org>
	* [0935742] :

	fixing the '\b' hexa representation for dialog vals
	Thanks go to Walter Doekes for reporting on IRC


2013-12-11  Razvan Crainea  <razvan at opensips dot org>
	* [0d47a32] :

	remove bogus flushing for mi_json
	TODO: find a proper way for handling flushing, since the current
	implementation leads to a infinite loop


2013-12-11  Razvan Crainea  <razvan at opensips dot org>
	* [28b399b] :

	mi_json: escape '\\' character
	also fix incorrect '"' escaping


2013-12-11  Razvan Crainea  <razvan at opensips dot org>
	* [9df9872] :

	properly fix the dialog values escaping for nonascii chars


2013-12-10  Liviu Chircu  <liviu at opensips dot org>
	* [c8f47c8] :

	Fix compile warnings when defining -DDBG_LOCK


2013-12-09  Razvan Crainea  <razvan at opensips dot org>
	* [9eacde3] :

	fixed dialog dlg_vals printing
	Also encode DEL (0x7f) character since it does not print properly at the
	console


2013-12-07  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [8988cdb] :

	Merge pull request #138 from secusmartChris/master
	Feature request #77 fulfilled


2013-12-07  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [1076300] :

	Merge pull request #135 from bat-modulis/master
	Renamed permissions parameter 'from_col' to 'pattern_col'


2013-12-07  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [ef43e3d] :

	Merge pull request #129 from dsandras/ds-pua-expires-refresh-fix
	Fix bug where a new publication does not extend the desired expire time.
	(cherry picked from commit ccac0fac1da8ad663e500148fb7f7d9e43e34fd1)


2013-12-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [012ad21] :

	Fixed keeping DB conn open in the process doing shutdown Fixed bug in memory handling (size and init)


2013-12-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [89b8ffb] :

	At shutdown, do not attempt to use the DB conn if not opened.


2013-12-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1f18541] :

	Generate proper branch param for the NAT ping requests Credits go to Varun (varunvairavan on GITHUB) Closes #145


2013-12-06  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d0086df] :

	Fixed bogus condition in GT, GTE, LT and LTE script tests. Reported by dcb314 on GITHUB Closing issue #146
	(cherry picked from commit 96921f5f90919bdc3dc1a573bcb0c32899c65075)


2013-12-06  Razvan Crainea  <razvan at opensips dot org>
	* [6adb5c3] :

	fixed compile error when statistics are not enabled
	Thanks to Liviu Chircu for reporting them


2013-12-06  Liviu Chircu  <liviu at opensips dot org>
	* [21f543d] :

	Fix a couple of potential deadlocks in commit b30b43b4


2013-12-05  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b30b43b] :

	Rework the reload part - use readers/writers locking for ensure safe and efficient reload.


2013-12-03  Răzvan Crainea  <razvan at opensips dot org>
	* [f93bbd3] :

	fixed doc avp names


2013-12-03  vladpaiu  <vladpaiu at opensips dot org>
	* [9a807b8] :

	Merge pull request #141 from shimaore/db_http_timeout_doc
	Corrected db_http example: the timeout is an integer.


2013-12-02  Razvan Crainea  <razvan at opensips dot org>
	* [8587e79] :

	sort the db_berkeley and dbtext version entries
	this makes further updating easier, since the entries are no longer in a
	random entry. Moreover, they can be easily followed in the file.


2013-12-02  Razvan Crainea  <razvan at opensips dot org>
	* [177fe84] :

	drouting: properly update the drouting versions


2013-12-02  Razvan Crainea  <razvan at opensips dot org>
	* [f25c8e1] :

	drouting: fix drc_table doc default value


2013-12-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bd1b78e] :

	Updated DB schema for dispatcher in order to reflect latest changes (state persistency)


2013-12-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3583ab2] :

	Added persistency for the state of the destinations : (1) persistency across opensips restart, via DB amd (2) persistency across reloads.


2013-12-02  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d2facc3] :

	State of the destination is persistent across reloads.


2013-12-02  Vlad Paiu  <vladpaiu at opensips dot org>
	* [0625610] :

	Properly take into account the dialplan priority in case entry matches both string and regex rules


2013-12-02  Vlad Paiu  <vladpaiu at opensips dot org>
	* [adebbe6] :

	For dialog pvars, we don't actually need a SIP msg in order to evaluate


2013-12-02  Vlad Paiu  <vladpaiu at opensips dot org>
	* [11e393a] :

	For db_extra & db_extra_bye params, create dummy SIP message in case we have NULL msg, in order to allow the evaluation of PVARs that don't actually need the SIP msg ( eg. $DLG_end_reason )


2013-11-30  Stephane Alnet  <stephane at shimaore dot net>
	* [2776156] :

	Rebuilt README


2013-11-30  Stephane Alnet  <stephane at shimaore dot net>
	* [d823932] :

	Corrected typos.


2013-11-30  Stephane Alnet  <stephane at shimaore dot net>
	* [be2ce6f] :

	Built README


2013-11-30  Stephane Alnet  <stephane at shimaore dot net>
	* [a87b2af] :

	Mathops extensions
	Add a new `math_rpn` function, and capacity to add new operators when using the RPN parser.
	New operators (RPN only): `exp`, `floor`


2013-11-28  Ovidiu Sas  <osas at voipembedded dot com>
	* [c631abc] :

	pua_dialoginfo: do not blindly load all dialogs  - only dialogs with "dlg_peer" vals should be registered for callbacks


2013-11-28  Răzvan Crainea  <razvan at opensips dot org>
	* [25289f0] :

	Merge pull request #139 from shimaore/pkg_mem_events
	Allow for `event_pkg_threshold` support.

	Credits go to Stéphane Alnet (shimaore)


2013-11-28  Razvan Crainea  <razvan at opensips dot org>
	* [609c81c] :

	sipmsgops: prevent remove_hf from removing header twice
	closes #137


2013-11-28  Razvan Crainea  <razvan at opensips dot org>
	* [1ed8107] :

	Merge branch 'dialog-vars-fix'
	Conflicts:
		scripts/db_berkeley/opensips/version
		scripts/dbtext/opensips/version


2013-11-28  Razvan Crainea  <razvan at opensips dot org>
	* [62d644e] :

	dialog: hexa representation for dlg_list_ctx binary values


2013-11-28  Razvan Crainea  <razvan at opensips dot org>
	* [6c7e9c7] :

	dialog: update dialog dbschema


2013-11-28  Razvan Crainea  <razvan at opensips dot org>
	* [36b533b] :

	dialog: dialog variables should be blob


2013-11-28  Razvan Crainea  <razvan at opensips dot org>
	* [0aec9af] :

	dbtext: generate blob instead of string for binary columns


2013-11-27  Razvan Crainea  <razvan at opensips dot org>
	* [4c1fb5d] :

	event_xmlrpc: pass parameters as struct
	Added a new parameter that allows the possibility to send the event parameters
	as XMLRPC structures, instead of simple values.


2013-11-27  Vlad Paiu  <vladpaiu at opensips dot org>
	* [144e112] :

	fixed README typo


2013-11-27  Razvan Crainea  <razvan at opensips dot org>
	* [fae8dc3] :

	dbtext: fix newline typo


2013-11-27  Razvan Crainea  <razvan at opensips dot org>
	* [0636a00] :

	dbschema: fix tmp file usage in makefile


2013-11-26  Stephane Alnet  <stephane at shimaore dot net>
	* [2c1af18] :

	Corrected db_http example: the timeout is an integer.


2013-11-26  Stephane Alnet  <stephane at shimaore dot net>
	* [e86bf5d] :

	Allow for `event_pkg_threshold` support.
	PKG_MEM is not defined or use anywhere else in the code, so assuming `PKG_MALLOC` is meant here.


2013-11-26  Christian Lahme  <christian.lahme at secusmart dot com>
	* [9394e0a] :

	Added IFDEF to ensure TLSv1.2 is only used when openssl >= 1.0.1 is used


2013-11-26  Christian Lahme  <christian.lahme at secusmart dot com>
	* [2383515] :

	Feature request #77 fulfilled


2013-11-26  Ovidiu Sas  <osas at voipembedded dot com>
	* [40962ce] :

	pua: set db_flag to UPDATEDB_FLAG only if there was a previous update (NO_UPDATEDB_FLAG)  - in case of a server restart, if the db_flag went from INSERTDB_FLAG to UPDATEDB_FLAG    the record will be lost because the record is marked as to be updated,    and since there's no record in the db, the update will fail.  - if the db_flag is INSERTDB_FLAG, any updates should leave the flag as is and this    will cause the new record to be properly inserted (and not updated) into the db.


2013-11-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [4e51f8d] :

	STEP 3 - flushing changes in GW/CARRIER's state back to DB (periodically and at shutdown) ; preserve the state of GWs/CARRIERs during reload.


2013-11-24  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [253704e] :

	Updated DB schema to reflect the changes in the DR module (adding persistency for carrier/gateway's state and sockets for gateways)


2013-11-24  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [a802488] :

	Load xcap module, presence_xml depends on it


2013-11-24  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [002b43f] :

	Fixed residential example when using presence


2013-11-23  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [175f853] :

	Merge pull request #122 from dsandras/ds-fix-dialog-info-entity
	This patch fixes the entity URI in XML documents to contain "sip:".
	(cherry picked from commit 377e7574d411aa974cf469d6df18b6213b43a31f)


2013-11-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [8c64901] :

	Merge pull request #131 from dsandras/ds-pua-mi-warning-fix
	Fixes bug where a refreshed PUBLISH request triggers an error message.
	(cherry picked from commit ded0559c527f30181e9bbd494f0e63b048059108)


2013-11-22  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [3cf2c68] :

	Merge pull request #133 from shimaore/add-callid-to-ul_mi
	Add `callid` field to information returned by the `ul` module's MI.


2013-11-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cfb8457] :

	Fixed bogus warning because of variables not being reset. Reported by Jeff Pyle, part of fixing issue #126.


2013-11-22  Liviu Chircu  <liviu at opensips dot org>
	* [f456377] :

	Ignore all cscope database files


2013-11-22  Ovidiu Sas  <osas at voipembedded dot com>
	* [f9a8d98] :

	uac_registrant: re-register with expires value imposed by the registrar


2013-11-22  Liviu Chircu  <liviu at opensips dot org>
	* [f90e347] :

	Fix the DB representation of message flags in the acc module
	* storing flags as strings rather than bitmasks prevents flag conflicts
	  when doing flag modifications in the script, then restarting the proxy
	* similar usrloc issue was fixed in commit 98b6b0437


2013-11-22  Liviu Chircu  <liviu at opensips dot org>
	* [0845069] :

	Add the "remove" script function to the registrar module
	* remove(domain, AOR[, target]])
	* explicitly remove	contacts behind specific addresses-of-record
	* may delete contacts by Contact URI or by domain
	* domains are resolved before they are matched


2013-11-22  Liviu Chircu  <liviu at opensips dot org>
	* [9d5889b] :

	Add the SIP-wise determined "next_hop" field to ucontact_t
	* based on Path -> Received -> Contact (decreasing priorities)
	* URIs are parsed only at contact creation
	* useful for the nathelper SIP pinging routine and domain-based lookups
	* compatible with all DB modes, no extra DB columns required


2013-11-22  Razvan Crainea  <razvan at opensips dot org>
	* [7401a7a] :

	revert commit ec0d05a
	dialog variables might be binary, therefore strlen should not be used


2013-11-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b279e17] :

	Do not free the header string as it is part of the lumps (and freed together with the lumps). Reported by Jeff Pyle. Fixing bug #126


2013-11-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [a0ba76e] :

	Fixed keeping turns on handling PUBLISHes for the same presentity - when presentity is deleted (due a unPUBLISH) do not do any turn related ops anymore Reported by Damien Sanders


2013-11-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3d33b3b] :

	Step 2: use the socket info during routing to GW


2013-11-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [24f9366] :

	Reset the lump cond flags when the condition evaluates to false.
	In case there are multiple branches, the conditions can evaluate
	differently on each branch - which might lead to bad counting of the
	added lumps ( used by the dialog module for dlg validation )


2013-11-20  Vlad Paiu  <vladpaiu at opensips dot org>
	* [b4b3517] :

	Added exec_threshold parameter to cachedb_* modules in order to be able to track slow queries


2013-11-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [cc657ff] :

	Fixed restoring SOCKET info from AVP during failover


2013-11-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fdfc71d] :

	Step 1 in enhancing drouting: - GW - load state and outbound sokcet from database - carriers - load state (as separate field) from database - cleanup - remove the avp "type" as no longer used (work in progress)


2013-11-20  Ovidiu Sas  <osas at voipembedded dot com>
	* [f7dac99] :

	httpd: remove bogus error log


2013-11-19  Baptiste Cholley  <baptiste.cholley at modulis dot ca>
	* [4f285d1] :

	Renamed parameter 'from_col' to 'pattern_col'


2013-11-17  Liviu Chircu  <liviu at opensips dot org>
	* [c4b8be1] :

	Mask compile-time shift/reduce conflict due to if statement ambiguity


2013-11-16  Stephane Alnet  <stephane at shimaore dot net>
	* [6408bd7] :

	Add `callid` field to information returned by the `ul` module's MI.
	This allows e.g. to retrieve the information even when using a memory-only store.


2013-11-15  Razvan Crainea  <razvan at opensips dot org>
	* [5852895] :

	when joining two frags, only the used memory changes


2013-11-15  Razvan Crainea  <razvan at opensips dot org>
	* [27197fa] :

	memory statistics can be used only if stats are on


2013-11-15  Razvan Crainea  <razvan at opensips dot org>
	* [a8bdfa8] :

	rework ratelimit distributed queries
	instead of adding -1 to the counter, use the cachedb_sub function exported by
	the cachedb module. This prevents ratelimit counters from adding extremely
	large values for some backends (ex: memcached).
	Thanks go to Brett Nemeroff for reporting and testing.


2013-11-12  Ryan Bullock  <rrb3942 at gmail dot com>
	* [ba22d03] :

	Add s.index and s.rindex transformations


2013-11-08  Ovidiu Sas  <osas at voipembedded dot com>
	* [cae7f80] :

	core: set proper identification label for timer procs  - check labels via 'ps' MI command


2013-11-07  Liviu Chircu  <liviu at opensips dot org>
	* [2418f37] :

	Fix bogus comma when printing an AVP array with $(avp(foo)[*])


2013-11-05  Razvan Crainea  <razvan at opensips dot org>
	* [26d9adc] :

	removed Makfile.conf from versioning


2013-11-05  Razvan Crainea  <razvan at opensips dot org>
	* [2055db5] :

	menuconfig reads from template if config does not exist


2013-11-05  Razvan Crainea  <razvan at opensips dot org>
	* [2cdf24f] :

	separate file for the original Makefile.conf
	The original Makefile.conf is now found in Makefile.conf.template. This
	prevents merge conflicts while updating the Makefile.conf


2013-11-05  Vlad Paiu  <vladpaiu at opensips dot org>
	* [cbe8d24] :

	Rebuilt mi_json README


2013-11-05  vladpaiu  <vladpaiu at opensips dot org>
	* [fefa37c] :

	Merge pull request #121 from shimaore/mi_json
	mi_json documentation: corrected typo and XML translation problem


2013-11-05  Stephane Alnet  <stephane at shimaore dot net>
	* [fff5c39] :

	mi_json documentation: corrected typo and XML translation problem


2013-11-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [52405e6] :

	Added mi_json module README


2013-11-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [afa15e3] :

	If commands accepts parameters, doesn't mean they are mandatory Leave it to the MI function to decide if it's ok to have empty params


2013-11-04  vladpaiu  <vladpaiu at opensips dot org>
	* [7339345] :

	Merge pull request #119 from shimaore/mi_json
	mi_json module (new module)


2013-11-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [02f983d] :

	Proper usage of build_req_buf_from_sip_req() function - socket and proto are required. Closes Bug 664 on SF.


2013-11-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [92a2c9d] :

	Allow drouting module to be used for DID matching only ( where you only have prefixes provisioned, no GWs, and call do_routing with the 'C' flag )


2013-11-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [43de2d8] :

	rebuilt the cachedb_couchbase documentation to reflect the recent changes


2013-11-04  vladpaiu  <vladpaiu at opensips dot org>
	* [4d1736d] :

	Merge pull request #106 from rrb3942/couchbase
	Switches to LCB_SYNCHRONOUS. Enables better reconnect support with command retry as well as a lazy_connect option.


2013-11-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [f59fef0] :

	Support returning the new value from cache_add/cache_sub Credits to rrb3942


2013-11-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [5635d71] :

	Do proper return code to script from cachedb_* functions ( treat 0 as success )


2013-11-04  Vlad Paiu  <vladpaiu at opensips dot org>
	* [3738a7c] :

	Added Redis Raw query capability


2013-11-01  Razvan Crainea  <razvan at opensips dot org>
	* [bbdd474] :

	event_rabbitmq: added heartbeat parameter doc


2013-11-01  Răzvan Crainea  <razvan at opensips dot org>
	* [a6090ec] :

	Merge pull request #100 from franklyfox/1.9_rabbitmq_heartbeat
	enable rabbitmq heartbeat to solve issues of hanging SIP processing because of a broken amqp socket


2013-11-01  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [34df519] :

	Merge pull request #111 from csollet/rfc6598
	nat_uac_test() : Add support for Shared Address Space (RFC 6598)


2013-11-01  Vlad Paiu  <vladpaiu at opensips dot org>
	* [043606a] :

	Also trace the CANCEL requests in case we're doing trace_dialog()
	(cherry picked from commit 50463f044c5bd42eb5485cac52419a8ec45ee201)


2013-11-01  Stephane Alnet  <stephane at shimaore dot net>
	* [7f5019b] :

	mi_json documentation


2013-11-01  Stephane Alnet  <stephane at shimaore dot net>
	* [0263804] :

	Modified httpd to support `application/json` for our purposes.


2013-11-01  Stephane Alnet  <stephane at shimaore dot net>
	* [90b909a] :

	mi_json: simplify datasets
	Also rewrote the string handling code.


2013-10-31  Stephane Alnet  <stephane at shimaore dot net>
	* [c1d6f19] :

	libmicrohttpd5 is no longer in Debian/testing


2013-10-31  Stephane Alnet  <stephane at shimaore dot net>
	* [ece1322] :

	Initial code, copied over from mi_xmlrpc_ng, with output changed to JSON.
	The input is statically set to the "which" command.


2013-10-30  Ovidiu Sas  <osas at voipembedded dot com>
	* [57e6092] :

	core: enhance error log for un-parsable msg by adding the source IP and port


2013-10-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [c5b2030] :

	Use proper locking function (via the generic locking API) Reported by Max E. Reyes Vera Juarez.


2013-10-29  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [adfe53f] :

	Re-install dlg callbacks (for restoring FROM/TO hdr) upon re-loading dialogs on startup. Reported by Jeff Pyle.


2013-10-24  csollet  <csollet-git at keyyo dot com>
	* [9af4953] :

	nat_uac_test() : Add support for Shared Address Space (RFC 6598) 100.64.0.0/10 address block is processed like any RFC 1918 blocks


2013-10-23  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [d2c84e7] :

	Merge pull request #109 from rrb3942/shutdown_segfault
	Reset prepared statement between query lists on shutdown


2013-10-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [aa61cec] :

	Fixed the weight-based balancing alg. Credits go to Rob Gagnon (rgagnon24)


2013-10-23  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [582a949] :

	Proper support for BIGINT (as long) in the db_text SQL driver. Many thanks to Jeff Pyle for reporting and troubleshooting this.


2013-10-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [fbab4a8] :

	Removed "auto" flag for the dlg_id in DB_TEXT spec file Reported by Jeff Pyle.


2013-10-22  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2739d12] :

	README files regenerated from XMLs


2013-10-20  Ryan Bullock  <rrb3942 at gmail dot com>
	* [a24848f] :

	Reset prepared statement between query lists on shutdown


2013-10-20  Ryan Bullock  <rrb3942 at gmail dot com>
	* [83e6399] :

	Revert "Reset prepared statement between query lists on shutdown"
	This reverts commit 1a070015f4cffe612d3a3cb3a66e864d7374db04.


2013-10-20  Ryan Bullock  <rrb3942 at gmail dot com>
	* [1a07001] :

	Reset prepared statement between query lists on shutdown


2013-10-18  Liviu Chircu  <liviu at opensips dot org>
	* [1b12e26] :

	Scripting enhancement: for-each statement - syntax: for ($var(it) in $avp(array)) { ... } - faster than the "while"-based equivalent loop - currently only allows iterating over an avp's values


2013-10-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bd0952d] :

	Fixed bad prototype for abort when compiling with TM_TIMER_DEBUG. Reported by Mayama Takeshi Closes issue #105


2013-10-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [47a3386] :

	Fixed locking on purging profiles for terminated dialogs - in strange cases of concurancy between provisional and final replies, the profile ops for provisional reply may end up iterating on a deleted list. Reported by Trevor Francis (46labs) Closes issue #102


2013-10-18  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [9ceb0c0] :

	Fixed accepting "after" changes in lumps attached to the beginning of a del lump Reported by NicK Altmann Solves issues with missing Route hdrs when using the dialog based TH


2013-10-17  Liviu Chircu  <liviu at opensips dot org>
	* [62cadee] :

	Enhance usrloc with the binary replication feature - 3 additional module parameters - extra parameter in some usrloc_api functions - properly works with all DB modes


2013-10-17  Razvan Crainea  <razvan at opensips dot org>
	* [72ab3f4] :

	fix ratelimit memory corruption


2013-10-15  Ryan Bullock  <rrb3942 at gmail dot com>
	* [b51b980] :

	Switches to LCB_SYNCHRONOUS. Enables better reconnect support with command retry as well as a lazy_connect option.


2013-10-15  Ovidiu Sas  <osas at voipembedded dot com>
	* [8689767] :

	uac_auth: fix memory leak reported by Jeff Pyle <jpyle@fidelityvoice.com>  - affected modules: b2b_entities, uac, uac_registrant


2013-10-16  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [1abc835] :

	Make pv_parse_format() more verbous on reporting the causes to fail. Reported by peppolon on IRC


2013-10-15  Liviu Chircu  <liviu at opensips dot org>
	* [268803b] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2013-10-15  Liviu Chircu  <liviu at opensips dot org>
	* [0dc6524] :

	Minor binary interface improvements - better debugging on receive operations - improve readability with a couple of macros


2013-10-15  Di-Shi Sun  <di-shi at transnexus dot com>
	* [4145040] :

	1. Added support for appending parameter string in outbound URI. 2. Removed skip plus feature for called number.


2013-10-10  Liviu Chircu  <liviu at opensips dot org>
	* [3a334c3] :

	Allow NULL strings to be pushed into binary interface packets


2013-10-10  Liviu Chircu  <liviu at opensips dot org>
	* [101ee78] :

	Fix a particular startup crash
	e.g. when defining only 1 tcp interface while specifying
	"disable_tcp=true"


2013-10-07  vladpaiu  <vladpaiu at opensips dot org>
	* [6ce4321] :

	Merge pull request #85 from earlruby/master
	Changed -lcurses to -lncurses


2013-10-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [ec0d05a] :

	Fixed the re-loading of dlg vars after restart Credits to Nick Altmann


2013-10-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [b200e11] :

	Fixed topology_hiding("U") in case of no username in Contact header Credits for report & fix to Nick Altmann


2013-10-06  Norm Brandinger  <n.brandinger at gmail dot com>
	* [8dbef29] :

	route.c - correct spelling


2013-10-05  Norm Brandinger  <n.brandinger at gmail dot com>
	* [de01e4c] :

	dialog module - correct spelling in documentation


2013-10-04  liviuchircu  <liviu at opensips dot org>
	* [d54a04c] :

	Fix duplicated code in db_virtual


2013-10-04  franklyfox  <franklyfox at outlook dot com>
	* [8c21659] :

	enable rabbitmq heartbeat to solve issues of hanging SIP processing because of a broken amqp socket
	This implementation enabled the rabbitmq's client side's heartbeat negotiation.

	Issue:
	Because of TCP's nature, it takes very long time for a TCP peer to make the decision of closing a local socket when the connection actually is broken. The event_rabbitmq module didn't handle the situation which causes the Opensips1.9 stop processing UDP packets until the O.S decides to close the local socket. One of the consequence is that UAC cannot register to the registrar during this time period.

	Issue Reproduce:
	1. Block an existing amqp connection from the rabbitmq-server that event_rabbitmq module connects to.
	2. From the event_rabbitmq side, the UDP receive-buffer that Opensips uses should be full.

	Solution:
	If the module, even_rabbitmq/rabbitmq-client, doesn't get a heartbeat message from the rabbitmq-server within X seconds, the rabbitmq-client will kill the local socket connection actively.

	Added a modparam:

	modparam("event_rabbitmq", "heartbeat", [X seconds]


2013-10-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bdf49e0] :

	Fixed is_mod_func_used() (used from is_script_func_used()) to determin if a function is used from script - we need to follow the IF / WHILE / MODULE set of instructions too. Reported by Mayama Takeshi - many thanks for the detailed report on this. Closes issue #98


2013-10-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [2ca05d9] :

	In DELAYED mode, flush vars & profile to DB at ACK time too - no timer tick between 200 OK and ACK was droping the update operation to DB. Please note that this "bug" had actually no implications, as dialog data is either used from memory cache, either from DB after a restart (and a shutdown flushes everything to DB). Related to issue #97.


2013-10-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [d990644] :

	handle the signals while waiting for the startup route to end (if not, the main proc will never know if the child running startup route crashed and it will hang for ever during startup)


2013-10-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [00b8b63] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2013-10-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [b341dde] :

	Fixed the un-initialized "reason" string when certain headers are missing Fixed reported "invalid" code on maxforrward missing (closes Issue #95)


2013-10-03  Vlad Paiu  <vladpaiu at opensips dot org>
	* [7ad1db2] :

	Fixed menuconfig errors when selecting mi_xmlrpc vs mi_xmlrpc_ng


2013-10-03  liviuchircu  <liviu at opensips dot org>
	* [39119d1] :

	Properly load contact flags even when NAT pinging is disabled


2013-10-03  liviuchircu  <liviu at opensips dot org>
	* [bfcc635] :

	Fix unpatched assignment in commit b33d4b3f


2013-10-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [af195e9] :

	Merge branch 'master' of github.com:OpenSIPS/opensips


2013-10-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7ccddbe] :

	- doc examples fixed   Reported by "miha" on IRC


2013-10-02  liviuchircu  <liviu at opensips dot org>
	* [286f06f] :

	"registered" must also populate the 'attr' avp, if defined


2013-10-01  franklyfox  <franklyfox at outlook dot com>
	* [62ce85f] :

	enable rabbitmq heartbeat to solve processes hang by amqp socket


2013-10-01  liviuchircu  <liviu at opensips dot org>
	* [c229d98] :

	Fix some documentation typos


2013-10-01  liviuchircu  <liviu at opensips dot org>
	* [5bcab39] :

	Fix missing GPL headers in event_xmlrpc module


2013-09-27  liviuchircu  <liviu at opensips dot org>
	* [f2b283d] :

	Fix invalid pointer when fetching the usrloc extra info column


2013-09-25  Earl C. Ruby III  <eruby at knowledgematters dot net>
	* [7ae769d] :

	The latest Linux distros from OpenSUSE, Fedora, and other non-Debian based distros no longer add symlinks for libcurses.so -> libncurses.so. Trying to compile menuconfig with -lcurses will not work on these distros, so I changed -lcurses to -lncurses, since -lncurses will work on any modern Linux distro with the ncurses5 libraries installed.
	See http://stackoverflow.com/questions/1517756/whats-the-difference-between-lcurses-and-lncurses-when-compiling-c-using-ncur for more info.


2013-09-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [8fbdcc4] :

	- fixed double free when building insert fails (in buffered insert mode)   Reported by Brett Nemeroff


2013-09-25  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [3559383] :

	- fixed overflow in parsing the content len value   Reported by franklyfox on GITHUB   Closing issue #78


2013-09-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [5c3bcaa] :

	Merge pull request #69 from dsandras/ds-try-naptr2
	Added new dns_try_naptr option.


2013-09-20  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [615a36e] :

	Merge pull request #73 from wdoekes/wjd-pua_min_expires_doc
	pua.c sets int min_expires= 300, not 0 as documentation states.


2013-09-20  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [7938941] :

	- fixed updating the index of the last DEL operation - this is essential for deciding which lumps must be skipped (as overlapping with delete parts of the message)   Credits go to Nick Altmann for reporting and helping with troubleshooting.   Closes issue #79


2013-09-17  Damien Sandras  <dsandras at beip dot be>
	* [c5a57a8] :

	Fix PUA module so that it sends a final PUBLISH on expiration.
	A final PUBLISH with expires=0 is now generated when a publication has
	expired. This will trigger the transmission of a final state NOTIFY.


2013-09-16  liviuchircu  <liviu at opensips dot org>
	* [ba04cba] :

	Fix evi crash when defining more than 10 events


2013-09-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [98330c7] :

	- UAC module does not load (no dependency) on UAC_AUTH if the uac_auth() function is not used. - UAC module does not load RR and DIALOG (with further dependencies on the params of those modules) if no FROM/TO replace ops are done.


2013-09-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [99b233a] :

	- new functions added to help a module to check if its functions are used from the script (we cannot rely on the fixup functions as we have functions without parameters or need for fixup). Such function is needed for fixing dependencies between modules (to follow up)


2013-09-04  liviuchircu  <liviu at opensips dot org>
	* [6f048e0] :

	Fix: allow rest_client functions in onreply_route
	Credits to Jayesh Nambiar for reporting


2013-09-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [01db912] :

	- fixed CANCEL matching in B2B


2013-09-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [bb2313d] :

	-  Gracefully detect if the uac_auth modules is available for usage in b2b_entities modules - do not through an error message but rather an info one, as find the uac_auth module is optional.


2013-09-04  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ea44068] :

	- when starting the FR timer, it should not override any previous setting of a FR or FR_INV timers.   Solves Issue #25 (reported and troubleshooted by Mayama Takeshi) when a very fast 100 reply may stop retransmissions, but brake the updating of fr timer from FR to FR_INV state.


2013-09-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [ec82ef8] :

	- fixed how lumps can overlap on the edge - an "add" just next to a "delete"   Reported by Saul Ibarra Corretge   Closes issue #59


2013-09-03  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6dd4b76] :

	- fixed incomplete function call (resulted from the merged commit 09a291e)


2013-09-03  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [31a7aa2] :

	Merge pull request #62 from dsandras/ds-dialoginfo-notifications-fixes
	Fixed RFC 4235 notifications compliance.


2013-09-03  Damien Sandras  <dsandras at beip dot be>
	* [515b790] :

	Added new dns_try_naptr option.
	The rationale behind this is that many stacks do not implement NAPTR
	correctly and rely only on DNS SRV. With misconfigured DNS servers, it
	can lead to useless lookups generating potentially long delays.

	This can now be disabled if not needed.


2013-09-03  liviuchircu  <liviu at opensips dot org>
	* [b33d4b3] :

	Fix several usrloc named flag issues
	- fix get_all_db_ucontacts() lookup logic to work with named flags
	- fix "Cflags" row of MI *ul_dump* command
	- fix DB contact update function to properly store the flags


2013-09-02  liviuchircu  <liviu at opensips dot org>
	* [5a63dcd] :

	Fix replication of dialog delete events
	- instead of sending "deleted" packets based on hash delete operations,
	they are now sent when a dialog changes state to "DLG_STATE_DELETED"
	- this prevents the receiving instance from replicating the event again


2013-08-30  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5e33750] :

	- fixed NULL sockets in external scenarios (this leads to crashing when building the contact hdr)   Reported by dexteruk on IRC .


2013-08-30  liviuchircu  <liviu at opensips dot org>
	* [6f82449] :

	Fix compilation issue introduced in commit a9fcd84c


2013-08-29  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [3eb2a54] :

	Merge pull request #68 from wdoekes/wjd-fix_nathelper_memleak
	Fix memleak in nathelper natping when "failed to fetch contacts".


2013-08-29  liviuchircu  <liviu at opensips dot org>
	* [20c9245] :

	Fix replicated dialog profile management in distributed systems
	- replication-receiving instances must not do any profile-related
	  DB queries


2013-08-29  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [50117fb] :

	Merge pull request #58 from saghul/pua_double_free
	Fixed double free issue in pua module


2013-08-29  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [9da5524] :

	Fixed double free issue in pua module
	Also fix a couple of related memory leaks


2013-08-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [5fb6bb8] :

	- complete port of pull request #34


2013-08-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f26c257] :

	- complete backport from 1.8 of pull request #15


2013-08-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [6cfdc3a] :

	- complete backport from 1.8 of pull request #15


2013-08-28  Vlad Paiu  <vladpaiu at opensips dot org>
	* [18257f3] :

	Fixed bug introduced by previous commit : 	- downstream BYEs should go to 200OK leg in order to trigger dialog termination 	- upstream BYEs have no such limitation ( there's only one caller leg :) )


2013-08-28  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [78ff5db] :

	- proper backport of all changes from 1.8 branch


2013-08-27  liviuchircu  <liviu at opensips dot org>
	* [389de52] :

	Fix: also run child_init for bin listeners
	- bin listeners are now identified by the PROC_BIN rank
	- this way, only the UDP listeners receive positive ranks


2013-08-26  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [f153a9a] :

	- BYE requests received in confirmed state should terminate the dialog only if they match the TO-tag from 200 OK INVITE.   This affects parallel forking scenarios where rejected branches are terminated via BYE by caller.   Thanks for reporting and testing to Marco Hierl.


2013-08-14  Norm Brandinger  <n.brandinger at gmail dot com>
	* [879eacb] :

	pike: correct spelling


2013-08-14  liviuchircu  <liviu at opensips dot org>
	* [a5e9f4b] :

	Fix: sdp_free() bug introduced in commit bde8c0a045
	Credits to csollet for reporting.


2013-08-13  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [b19eca9] :

	Merge pull request #37 from fabriziopicconi/patch-5
	wrong mpath folder (detected by rpmbuild)


2013-08-13  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [9e8a497] :

	Merge pull request #39 from fabriziopicconi/patch-6
	Update Centos spec file


2013-08-13  Bogdan Andrei IANCU  <bogdan at opensips dot org>
	* [c00b39a] :

	Merge pull request #54 from nikbyte/master
	yum package specs / init-scripts changes for el/fedora


2013-08-13  Bogdan-Andrei Iancu  <bogdan at opensips dot org>
	* [39669e8] :

	fixed setting the default min_expires and max_expires module parameters. Credits go to MayamaTakeshi.


2013-08-13  Nick Altmann  <nick.altmann at gmail dot com>
	* [775d22f] :

	changed el/fedora spec version to 1.11.0


2013-08-13  Nick Altmann  <nick.altmann at gmail dot com>
	* [2425adf] :

	add m4 config support for el/fedora distros, spec file synced with build server


2013-08-13  Nick Altmann  <nick.altmann at gmail dot com>
	* [310e195] :

	add m4 config support for debian distros


2013-08-13  Damien Sandras  <dsandras at beip dot be>
	* [b31075d] :

	Added documentation for recent changes.


2013-08-13  Damien Sandras  <dsandras at beip dot be>
	* [b4d0368] :

	PUBLISH requests are now handled in the same order than received.
	That is specifically useful for pua dialoginfo which was generating dialog
	info notifications that were handled in the wrong order with that patch.
	PUBLISH with older documents were sometimes treated after PUBLISH requests
	with newer documents, leading to incoherent states.


2013-08-13  Nick Altmann  <nick.altmann at gmail dot com>
	* [196ec52] :

	spec file for el/fedora synced with build server


2013-08-13  vladpaiu  <vladpaiu at opensips dot org>
	* [3a49140] :

	Merge pull request #46 from fabriziopicconi/patch-8
	remove warning compilation


2013-08-12  vladpaiu  <vladpaiu at opensips dot org>
	* [c8e64b8] :

	Merge pull request #48 from fabriziopicconi/patch-10
	improved parallel compilation


2013-08-12  Vlad Paiu  <vladpaiu at opensips dot org>
	* [db24ec0] :

	Fixed double free issue when reading multiple SIP messages in one TCP chunk Do proper zero-ing out of the tcp_req structure


2013-08-11  Vlad Paiu  <vladpaiu at opensips dot org>
	* [41157e7] :

	Increased menuconfig parsing buffer to 1024 (Reported by Richard Revels)
	Removed mi_http from the excluded modules list - has no external dependencies


2013-08-09  liviuchircu  <liviu at opensips dot org>
	* [aeddd31] :

	Fix: mathops internal parsing bug
	Credits to Jayesh Nambiar for reporting


2013-08-08  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [56f0269] :

	parallel compilation
	speedup compilation on multicore/multicpu machines


2013-08-08  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [6dfb090] :

	remove warning compilation
	remove warning: ‘ret’ may be used uninitialized in this function


2013-08-08  saghul  <saghul at gmail dot com>
	* [dc83eb1] :

	Kill compilation warnings
	io_wait.c: In function ‘check_poll_method’:
	io_wait.c:368:15: warning: variable ‘os_ver’ set but not used [-Wunused-but-set-variable]
	  unsigned int os_ver;
	               ^
	io_wait.c: In function ‘choose_poll_method’:
	io_wait.c:448:15: warning: variable ‘os_ver’ set but not used [-Wunused-but-set-variable]
	  unsigned int os_ver;
	               ^


2013-08-08  saghul  <saghul at gmail dot com>
	* [7d727aa] :

	Fixed compilation in systems without EPOLL


2013-08-07  saghul  <saghul at gmail dot com>
	* [4d4d3db] :

	Cleanup menucnfig files when doing make proper


2013-08-07  Saúl Ibarra Corretgé  <saghul at gmail dot com>
	* [6e3b16e] :

	Fixed crash if send_subscribe fails early
	In that case presentity is still NULL, check for it


2013-08-07  Vlad Paiu  <vladpaiu at opensips dot org>
	* [1ee176a] :

	Fixed warning Fixed compilation error for libcurl < 7.16.2 ( due to CURLOPT_TIMEOUT_MS )


2013-08-06  Vlad Paiu  <vladpaiu at opensips dot org>
	* [8f642ba] :

	Properly mentioned Steve Frécinaux from Be IP as the module creator


2013-08-06  Vlad Paiu  <vladpaiu at opensips dot org>
	* [3bfd505] :

	Fixed goes_to_gw, is_from_gw and dr_is_gw so that they accept negative gateway types ( to match all gw types)


2013-08-06  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [7fe3f81] :

	Update Centos spec file
	Some new rpm optional modules are added:
	mi_xmlrpc_ng,sngtc,db_cachedb,mathops,rest_client


2013-08-06  fabriziopicconi  <fabrizio.picconi at alice dot it>
	* [9e1f0d3] :

	wrong mpath folder (detected by rpmbuild)
	change modules-prefix (tmp folder) to modules-target (installation folder)

